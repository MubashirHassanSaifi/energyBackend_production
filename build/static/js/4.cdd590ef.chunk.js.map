{"version":3,"sources":["../node_modules/@material-ui/icons/NavigateNext.js","../node_modules/@fullcalendar/core/main.esm.js","../../../src/_helpers/utils.ts","../../../src/constants/dimensions.ts","../../../src/wrappers/StaticWrapper.tsx","../../../src/_shared/ModalDialog.tsx","../../../src/_shared/hooks/useKeyDown.ts","../../../src/wrappers/ModalWrapper.tsx","../../../src/wrappers/InlineWrapper.tsx","../../../src/wrappers/Wrapper.tsx","../../../src/constants/ClockType.ts","../../../src/views/Clock/ClockPointer.tsx","../../../src/_helpers/time-utils.ts","../../../src/views/Clock/Clock.tsx","../node_modules/rifm/dist/rifm.esm.js","../../../src/views/Calendar/Day.tsx","../../../src/_shared/ToolbarText.tsx","../../../src/_shared/ToolbarButton.tsx","../../../src/_shared/PickerToolbar.tsx","../../../src/_shared/PureDateInput.tsx","../../../src/_shared/icons/KeyboardIcon.tsx","../../../src/_helpers/text-field-helper.ts","../../../src/_shared/KeyboardDateInput.tsx","../../../src/_shared/hooks/usePickerState.ts","../../../src/_shared/hooks/useOpenState.ts","../../../src/_shared/hooks/useKeyboardPickerState.ts","../../../src/Picker/makePickerWithState.tsx","../../../src/constants/prop-types.ts","../../../src/views/Year/Year.tsx","../../../src/views/Year/YearView.tsx","../../../src/views/Month/Month.tsx","../../../src/views/Month/MonthView.tsx","../../../src/_shared/hooks/useIsLandscape.tsx","../../../src/Picker/Picker.tsx","../../../src/_shared/hooks/useViews.tsx","../../../src/views/Clock/ClockNumber.tsx","../../../src/views/Clock/ClockNumbers.tsx","../../../src/views/Clock/ClockView.tsx","../node_modules/dom-helpers/esm/removeClass.js","../node_modules/react-transition-group/esm/CSSTransition.js","../node_modules/dom-helpers/esm/addClass.js","../node_modules/dom-helpers/esm/hasClass.js","../../../src/_helpers/date-utils.ts","../../../src/views/Calendar/DayWrapper.tsx","../../../src/views/Calendar/SlideTransition.tsx","../../../src/views/Calendar/CalendarHeader.tsx","../../../src/_shared/icons/ArrowLeftIcon.tsx","../../../src/_shared/icons/ArrowRightIcon.tsx","../../../src/_shared/WithUtils.tsx","../../../src/views/Calendar/Calendar.tsx"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","elementPropHash","className","colSpan","rowSpan","containerTagHash","tagName","attrs","content","el","document","attrName","applyStyle","setAttribute","innerHTML","appendToElement","htmlToElement","html","trim","container","computeContainerTag","firstChild","htmlToElements","Array","prototype","slice","call","childNodes","htmlToNodeList","substr","normalizeContent","i","length","appendChild","prependToElement","parent","newEls","afterEl","insertBefore","insertAfterElement","refEl","nextSibling","parentNode","Node","removeElement","removeChild","matchesMethod","Element","matches","matchesSelector","msMatchesSelector","closestMethod","closest","selector","this","documentElement","contains","elementMatches","parentElement","nodeType","elementClosest","findElements","containers","HTMLElement","allMatches","querySelectorAll","j","push","findChildren","parents","children","childNode","forceClassName","bool","classList","add","remove","PIXEL_PROP_RE","props","propName","applyStyleProp","name","val","style","test","pointInsideRect","point","rect","left","right","top","bottom","intersectRects","rect1","rect2","res","Math","max","min","translateRect","deltaX","deltaY","constrainPoint","getRectCenter","diffPoints","point1","point2","isRtlScrollbarOnLeft","getIsRtlScrollbarOnLeft","outerEl","position","border","padding","overflow","direction","body","getBoundingClientRect","computeIsRtlScrollbarOnLeft","sanitizeScrollbarWidth","width","round","computeEdges","getPadding","computedStyle","window","getComputedStyle","borderLeft","parseInt","borderLeftWidth","borderRight","borderRightWidth","borderTop","borderTopWidth","borderBottom","borderBottomWidth","scrollbarLeftRight","offsetWidth","clientWidth","scrollbarBottom","offsetHeight","clientHeight","scrollbarLeft","scrollbarRight","paddingLeft","paddingRight","paddingTop","paddingBottom","computeInnerRect","goWithinPadding","outerRect","computeRect","edges","pageXOffset","pageYOffset","computeHeightAndMargins","height","computeVMargins","computed","marginTop","marginBottom","getClippingParents","overflowY","overflowX","computeClippingRect","map","concat","reduce","rect0","preventDefault","ev","listenBySelector","eventType","handler","realHandler","matchedChild","target","addEventListener","removeEventListener","transitionEventNames","whenTransitionDone","callback","realCallback","forEach","eventName","DAY_IDS","addWeeks","m","n","a","dateToUtcArray","arrayToUtcDate","addDays","addMs","diffWeeks","m0","m1","diffDays","valueOf","diffWholeDays","timeAsMs","startOfDay","getUTCFullYear","getUTCMonth","getUTCDate","weekOfGivenYear","marker","year","dow","doy","firstWeekStart","firstWeekOffset","dayStart","days","floor","fwd","getUTCDay","dateToLocalArray","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","arrayToLocalDate","Date","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","UTC","apply","isValidDate","isNaN","INTERNAL_UNITS","PARSE_RE","createDuration","input","unit","_a","s","exec","sign","years","months","milliseconds","parseString","normalizeObject","obj","month","day","getWeeksFromInput","hours","hour","minutes","minute","seconds","second","millisecond","ms","weeks","week","durationsEqual","d0","d1","isSingleDay","dur","addDurations","multiplyDuration","asRoughDays","asRoughMs","asRoughMinutes","asRoughSeconds","wholeDivideDurations","numerator","denominator","localRes","isInt","greatestDurationDenominator","dontReturnWeeks","compensateScroll","rowEl","scrollbarWidths","marginLeft","marginRight","uncompensateScroll","disableCursor","enableCursor","distributeHeight","els","availableHeight","shouldRedistribute","minOffset1","minOffset2","flexEls","flexOffsets","flexHeights","usedHeight","undistributeHeight","minOffset","naturalHeight","naturalOffset","newHeight","matchCellWidths","maxInnerWidth","innerEl","innerWidth_1","subtractInnerElHeight","reflowStyleProps","diff","resetStyleProps","preventSelection","allowSelection","preventContextMenu","allowContextMenu","compareByFieldSpecs","obj0","obj1","fieldSpecs","cmp","compareByFieldSpec","fieldSpec","func","b","String","localeCompare","flexibleCompare","field","order","capitaliseFirstLetter","str","charAt","toUpperCase","padStart","len","compareNumbers","applyAll","functions","thisObj","args","ret","firstDefined","_i","arguments","undefined","debounce","wait","timeout","context","timestamp","result","later","last","setTimeout","refineProps","rawProps","processors","defaults","leftoverProps","refined","key","processor","Function","Number","Boolean","computeAlignedDayRange","timedRange","dayCnt","start","end","computeVisibleDayRange","nextDayThreshold","startDay","endDay","endTimeMS","isMultiDayRange","range","visibleRange","diffDates","date0","date1","dateEnv","largeUnit","diffWholeYears","diffWholeMonths","m0day","m1day","diffDayAndTime","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","__assign","assign","t","expandRecurringRanges","eventDef","duration","framingRange","recurringTypes","markers","recurringDef","typeId","expand","typeData","subtract","allDay","mergeProps","propObjs","complexProps","complexObjs","dest","unshift","filterHash","hash","filtered","mapHash","newHash","arrayToHash","a_1","hashValuesToArray","isPropsEqual","parseEvents","rawEvents","sourceId","calendar","allowOpenRange","eventStore","defs","instances","rawEvents_1","tuple","parseEvent","eventTupleToStore","def","defId","instance","instanceId","expandRecurring","defaultAllDayEventDuration","defaultTimedEventDuration","starts_1","pluginSystem","hooks","createEventInstance","getRelevantEvents","def_1","newStore","filterEventStoreDefs","lookDef","def0","def1","groupId","transformEachRawEvent","refinedEvents","rawEvents_2","rawEvent","refinedEvent","createEmptyEventStore","mergeEventStores","store0","store1","filterFunc","parseRange","createMarker","invertRanges","ranges","constraintRange","dateRange","invertedRanges","sort","compareRanges","range0","range1","intersectRanges","newRange","rangesEqual","rangesIntersect","rangeContainsRange","outerRange","innerRange","rangeContainsMarker","isArraysEqual","a0","a1","memoize","workerFunc","EXTENDED_SETTINGS_AND_SEVERITIES","separator","omitZeroMinute","meridiem","omitCommas","STANDARD_DATE_PROP_SEVERITIES","timeZoneName","era","weekday","MERIDIEM_RE","COMMA_RE","MULTI_SPACE_RE","LTR_RE","UTC_RE","NativeFormatter","formatSettings","standardDateProps","extendedSettings","severity","name_1","buildFormattingFunc","format","formatRange","diffSeverity","ca","getMarkerYear","getMarkerMonth","getMarkerDay","computeMarkerDiffSeverity","calendarSystem","biggestUnitForPartial","full0","full1","partialFormattingFunc","options","biggestUnit","partialOptions","name_2","computePartialFormattingOptions","partial0","partial1","insertion","i0","found0","indexOf","before0","after0","i1","found1","before1","after1","before","after","findCommonInsertion","getLargestUnit","standardDatePropCnt","keys","formatTimeZoneOffset","timeZoneOffset","num","weekLabel","locale","display","parts","simpleNumberFormat","isRtl","reverse","join","formatWeekNumber","computeWeekNumber","sanitizeSettings","timeZone","zeroFormat","normalFormat","Intl","DateTimeFormat","codes","zeroProps","replace","tzoStr","replaced","injectTzoStr","toLocaleLowerCase","postProcess","buildNativeFormattingFunc","CmdFormatter","cmdStr","cmdFormatter","createVerboseFormattingArg","FuncFormatter","createFormatter","defaultSeparator","formatIsoTimeString","doIso","abs","mins","startInfo","expandZonedMarker","localeCodes","dateInfo","markerToArray","array","EventSourceApi","internalEventSource","dispatch","type","refetch","sourceIds","get","publicId","enumerable","configurable","meta","url","EventApi","_calendar","_def","_instance","setProp","_b","DATE_PROPS","NON_DATE_PROPS","mutate","standardProps","UNSCOPED_EVENT_UI_PROPS","ui","backgroundColor","borderColor","startEditable","durationEditable","setExtendedProp","extendedProps","setStart","startInput","startDelta","granularity","maintainDuration","datesDelta","setEnd","endInput","endDelta","hasEnd","setDates","instanceRange","moveStart","deltaInput","delta","moveEnd","moveDates","setAllDay","opt","formatInput","formatter","forcedStartTzo","forcedEndTzo","forcedTzo","mutation","fromApi","state","eventSources","toDate","title","rendering","constraints","overlap","allows","textColor","classNames","sliceEventStore","eventUiBases","inverseBgByGroupId","inverseBgByDefId","defByGroupId","bgRanges","fgRanges","eventUis","compileEventUis","origRange","normalRange","slicedRange","isStart","isEnd","invertedRanges_1","invertedRange","invertedRanges_2","bg","fg","hasBgRendering","filterSegsViaEls","segs","isMirror","view","hasPublicHandlers","filter","seg","custom","publiclyTrigger","event","eventRange","segs_1","setElSeg","fcSeg","getElSeg","eventDefs","compileEventUi","uis","combineEventUis","triggerRenderedSegs","isMirrors","segs_2","publiclyTriggerAfterSizing","loadingLevel","afterSizingTriggers","_eventsPositioned","triggerWillRemoveSegs","segs_3","trigger","segs_4","computeEventDraggable","eventUi","transformers","isDraggableTransformers","transformers_1","transformer","computeEventStartResizable","eventResizableFromStart","computeEventEndResizable","applyMutationToEventStore","eventConfigBase","eventConfigs","applyMutationToEventDef","eventDefMutationAppliers","applyMutationToEventInstance","eventConfig","appliers","copy","appliers_1","applier","eventInstance","forceAllDay","clearEnd","getDefaultEventEnd","reduceEventStore","action","dateProfile","eventSource","fetchId","fetchRange","latestFetchId","subset","calEachTransform","sourceEachTransform","eventDataTransform","transformRawEvents","excludeEventsBySourceId","receiveRawEvents","expandRange","addEvent","activeRange","oldDateEnv","newDateEnv","canComputeOffset","rezoneDates","relevant","applyMutationToRelated","excludeInstances","removals","isInteractionValid","interaction","isNewPropsValid","eventDrag","newProps","businessHours","dateSelection","eventSelection","eventResize","isPropsValid","dateSpanMeta","filterConfig","subjectEventStore","mutatedEvents","subjectDefs","subjectInstances","subjectConfigs","isEvent","selectionConfig","otherEventStore","affectedEvents","otherDefs","otherInstances","otherConfigs","subjectInstanceId","subjectInstance","subjectRange","subjectConfig","subjectDef","allConstraintsPass","overlapFunc","otherInstanceId","otherInstance","calendarEventStore","subjectAllow","subjectDateSpan","origDef","origInstance","eventApi","buildDateSpanApi","isInteractionPropsValid","relevantEventStore","relevantDefs","relevantInstances","selection","selectionRange","relevantInstanceId","relevantInstance","selectionAllow","fullDateSpan","isDateSelectionPropsValid","businessHoursUnexpanded","constraints_1","anyRangesContainRange","constraintToRanges","constraint","eventStoreToRanges","outerRanges","outerRanges_1","htmlEscape","cssToStr","cssProps","statements","parseClassName","raw","isArray","split","editable","allow","color","processUnscopedUiProps","leftovers","normalizeConstraint","processScopedUiProps","prefix","rawScoped","rawUnscoped","wasFound","scopedKey","EMPTY_EVENT_UI","combineTwoEventUis","item0","item1","id","uid","allDayDefault","source","computeIsAllDayDefault","leftovers0","recurringRes","eventInput","localLeftovers","parsed","parse","allDayGuess","parseRecurring","parseEventDef","leftovers1","singleRes","startMeta","endMeta","pluckDateProps","startMarker","endMarker","createMarkerMeta","isTimeUnspecified","parseSingle","preLeftovers","pluckNonDateProps","eventDefParsers","newLeftovers","eventDefParser","freeze","DEF_DEFAULTS","startTime","endTime","daysOfWeek","parseBusinessHours","rawDefs","rawDef","refineInputs","memoizeRendering","renderFunc","unrenderFunc","dependencies","thisContext","prevArgs","dependents","unrender","dependents_1","dependencies_1","EMPTY_EVENT_STORE","Splitter","getKeysForEventDefs","_getKeysForEventDefs","splitDateSelection","_splitDateSpan","splitEventStore","_splitEventStore","splitIndividualUi","_splitIndividualUi","splitEventDrag","_splitInteraction","splitEventResize","eventUiBuilders","splitProps","_this","keyInfos","getKeyInfo","defKeys","dateSelections","individualUi","eventStores","eventDrags","eventResizes","info","buildEventUiForKey","keyInfo","buildEventUi","dateSpan","dateSpans","keys_1","getKeysForDateSpan","getKeysForEventDef","splitStores","_c","splitHashes","splitStates","affectedStores_1","mutatedKeysByDefId","mutatedStores_1","populate","origSeg","allUi","eventUiForKey","baseParts","stuff","buildGotoAnchorHtml","allOptions","gotoOptions","innerHtml","forceOff","finalOptions","formatIso","omitTime","attrsToStr","navLinks","JSON","stringify","getAllDayHtml","allDayHtml","allDayText","getDayClasses","noThemeHighlight","todayStart","todayEnd","theme","classes","monthMode","currentRange","getNow","getClass","EmitterMixin","_super","on","addToHash","_handlers","one","_oneHandlers","off","removeFromHash","triggerWith","hasHandlers","Mixin","mixInto","destClass","mixIntoObj","destObj","getOwnPropertyNames","mixOver","PositionCache","originEl","isHorizontal","isVertical","build","originClientRect","buildElHorizontals","buildElVerticals","originClientLeft","lefts","rights","originClientTop","tops","bottoms","leftToIndex","leftPosition","topToIndex","topPosition","getWidth","leftIndex","getHeight","topIndex","ScrollController","getMaxScrollTop","getScrollHeight","getClientHeight","getMaxScrollLeft","getScrollWidth","getClientWidth","canScrollVertically","canScrollHorizontally","canScrollUp","getScrollTop","canScrollDown","canScrollLeft","getScrollLeft","canScrollRight","ElementScrollController","scrollTop","scrollLeft","setScrollTop","setScrollLeft","scrollWidth","scrollHeight","WindowScrollController","scroll","ScrollComponent","applyOverflow","clear","setHeight","destroy","lockOverflow","getScrollbarWidths","Theme","calendarOptions","processIconOverride","iconOverrideOption","setIconOverride","iconOverrideHash","iconClassesCopy","buttonName","iconClasses","applyIconOverridePrefix","iconOverridePrefix","getIconClass","baseIconClass","getCustomButtonIconClass","customButtonProps","iconOverrideCustomButtonOption","guid","ComponentContext","dir","eventOrderSpecs","token","specs","tokens","substring","parseFieldSpecs","eventOrder","extend","Component","addEqualityFuncs","newFuncs","equalityFuncs","receiveProps","oldContext","firstContext","oldProps","comboProps","anyChanges","recycleProps","beforeUpdate","render","afterUpdate","DateComponent","buildPositionCaches","queryHit","positionLeft","positionTop","elWidth","elHeight","validRange","isDateSelectionValid","isValidSegDownEl","isPopover","isInPopover","isValidDateDownEl","segEl","fgSegSelector","bgSegSelector","uid$1","createPlugin","deps","reducers","eventDragMutationMassagers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","views","viewPropsTransformers","externalDefTransforms","eventResizeJoinTransforms","viewContainerModifiers","eventDropTransformers","componentInteractions","calendarInteractions","themeClasses","eventSourceDefs","namedTimeZonedImpl","defaultView","elementDraggingImpl","optionChangeHandlers","PluginSystem","addedHash","plugin","dep","hooks0","hooks1","ArrayEventSourcePlugin","ignoreRange","parseMeta","events","fetch","arg","success","FuncEventSourcePlugin","failure","isResolved","wrappedSuccess","wrappedFailure","then","unpromisify","bind","startStr","endStr","requestJson","method","params","successCallback","failureCallback","encodeParams","injectQueryStringParams","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","responseText","err","onerror","send","encodeURIComponent","JsonFeedEventSourcePlugin","extraParams","startParam","endParam","timeZoneParam","requestParams","customRequestParams","buildRequestParams","errorMessage","message","SimpleRecurrencePlugin","startRecur","endRecur","anyValid","clippedFramingRange","dowHash","dayMarker","instanceStarts","instanceStart","expandRanges","DefaultOptionChangeHandlers","deepEqual","handleEventSources","plugins","inputs","addPluginInputs","unfoundSources","newInputs","inputs_1","inputFound","_raw","splice","unfoundSources_1","unfoundSource","newInputs_1","newInput","addEventSource","config","globalDefaults","defaultRangeSeparator","titleRangeSeparator","forceEventDuration","columnHeader","aspectRatio","header","center","weekends","weekNumbers","weekNumberCalculation","scrollTime","minTime","maxTime","showNonCurrentDates","lazyFetching","locales","timeGridEventMinHeight","themeSystem","dragRevertDuration","dragScroll","allDayMaintainDuration","unselectAuto","dropAccept","eventLimit","eventLimitClick","dayPopoverFormat","handleWindowResize","windowResizeDelay","longPressDelay","eventDragMinDistance","rtlDefaults","buttonIcons","prev","next","prevYear","nextYear","complexOptions","INTERNAL_PLUGINS","RAW_EN_LOCALE","code","buttonText","today","list","eventLimitText","noEventsMessage","parseRawLocales","explicitRawLocales","defaultCode","globalArray","globalObject","allRawLocales","rawLocaleMap","en","allRawLocales_1","rawLocale","buildLocale","inputSingular","available","codeArg","simpleId","queryRawLocale","parseLocale","queryLocale","merged","NumberFormat","OptionsManager","overrides","dynamicOverrides","compute","updates","isDynamic","overrideHash","removals_1","localeDefaults","dirDefaults","calendarSystemClassMap","theClass","GregorianCalendarSystem","arrayToMarker","arr","ISO_RE","DateEnv","settings","isNamedTimeZone","namedTimeZoneImpl","createCalendarSystem","weekDow","weekDoy","firstDay","weekNumberFunc","createNowMarker","timestampToMarker","getYear","addYears","addMonths","greatestWholeUnit","diffWholeWeeks","diffHours","diffMinutes","diffSeconds","countDurationsBetween","asRoughMonths","startOf","startOfYear","startOfMonth","startOfWeek","startOfHour","startOfMinute","startOfSecond","y","w","nextW","weekOfYear","dateOptions","offsetForMarker","isEndExclusive","extraOptions","omitTimeZoneOffset","stripZeroTime","toISOString","buildIsoString","timestampToArray","getTimezoneOffset","offsetForArray","SIMPLE_SOURCE_PROPS","uid$2","doesSourceNeedRange","sourceDefId","parseEventSource","parseEventSourceProps","isFetching","reduceEventSources","eventSourceHash","sources","sources_1","fetchDirtySources","addSources","fetchSourcesByIds","excludeStaticSources","sourceHash","receiveResponse","uid$3","isSourceDirty","prevSources","sourceIdHash","nextSources","fetchSource","sourceDef","calSuccessRes","sourceSuccessRes","calSuccess","error","callFailure","console","warn","DateProfileGenerator","viewSpec","initHiddenDays","buildPrev","currentDateProfile","currentDate","prevDate","currentRangeUnit","dateIncrement","buildNext","nextDate","forceToValid","currentInfo","isRangeAllDay","renderRange","isValid","buildValidRange","trimHiddenDays","buildCurrentRangeInfo","buildRenderRange","adjustActiveRange","buildDateIncrement","getRangeOption","dayCount","durationUnit","buildRangeFromDuration","buildRangeFromDayCount","buildCustomVisibleRange","getFallbackDuration","class","usesMinMaxTime","dateIncrementInput","dateIncrementDuration","alignment","dateAlignment","computeRes","isHiddenDay","skipHiddenDays","customAlignment","runningCount","fallback","otherArgs","hiddenDays","isHiddenDayHash","Error","inc","isExclusive","viewType","currentViewType","reduceViewType","newDateProfile","dateProfileGenerators","dateMarker","generator","p0","p1","reduceDateProfile","nextState","reduceCurrentDate","reduceDateSelection","reduceSelectedEvent","reduceEventDrag","reduceEventResize","eventSourceLoadingLevel","computeLoadingLevel","reducerFunc","newDate","currentSelection","currentInstanceId","eventInstanceId","currentDrag","newDrag","currentResize","newResize","cnt","STANDARD_PROPS","parseDateSpan","defaultDuration","span","parseOpenDateSpan","isDateSpansEqual","span0","span1","isSpanPropsEqual","fabricateEventRange","ensureViewDef","defaultConfigs","overrideConfigs","viewDef","defaultConfig","overrideConfig","queryProp","superType","findViewNameBySubclass","superDef","buildViewDef","viewSubclass","configs","superProto","getPrototypeOf","parseViewConfigs","parseViewConfig","VIEW_DEF_PROPS","buildViewSpecs","defaultInputs","optionsManager","compileViewDefs","durationInput","singleUnit","singleUnitOverrides","denom","queryButtonText","buttonTextMap","buttonTextKey","buttonTextOverride","buttonTextDefault","buildViewSpec","Toolbar","extraClassName","_renderLayout","renderLayout","unrenderLayout","_updateTitle","updateTitle","_updateActiveButton","updateActiveButton","_updateToday","updateToday","_updatePrev","updatePrev","_updateNext","updateNext","layout","activeButton","isTodayEnabled","isPrevEnabled","isNextEnabled","viewsWithButtons","renderSection","buttonStr","viewSpecs","sectionEl","calendarCustomButtons","customButtons","calendarButtonTextOverrides","calendarButtonText","buttonGroupStr","groupEl","groupChildren","isOnlyButtons","buttonClick","buttonIcon","buttonInnerHtml","buttonClasses","buttonEl","buttonAriaAttr","click","text","changeView","buttonGroupClassName","toggleButtonEnabled","titleEl","innerText","disabled","CalendarComponent","elClassNames","renderSkeleton","_renderSkeleton","_unrenderSkeleton","renderToolbars","_renderToolbars","_unrenderToolbars","buildComponentContext","buildViewPropTransformers","computeTitle","freezeHeight","renderView","updateSize","thawHeight","footer","updateElClassNames","contentEl","modifyViewContainer","savedScroll","queryScroll","removeElClassNames","headerLayout","footerLayout","dateProfileGenerator","now","todayInfo","prevInfo","nextInfo","toolbarProps","addScroll","viewProps","transform","isResize","isHeightAuto","computeHeightVars","viewHeight","updateNowIndicator","popScroll","heightInput","contentHeightInput","queryToolbarsHeight","parentEl","viewOptions","titleFormat","computeTitleFormat","theClasses","Interaction","component","interactionSettingsToStore","interactionSettingsStore","EventClicking","handleSegClick","hasUrlContainer","querySelector","href","jsEvent","defaultPrevented","location","EventHovering","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","onMouseEnter","onMouseLeave","currentMatchedChild","realOnMouseLeave_1","listenToHoverBySelector","publicEvName","StandardTheme","widget","widgetHeader","widgetContent","buttonGroup","button","buttonActive","popoverHeader","popoverContent","headerRow","dayRow","listView","close","Calendar","buildComponentContext$1","buildDateEnv","buildTheme","buildEventUiSingleBase","_buildEventUiSingleBase","buildSelectionConfig","_buildSelectionConfig","buildEventUiBySource","equalityFunc","cachedRes","newRes","memoizeOutput","buildEventUiBases","interactionsStore","actionQueue","isReducing","needsRerender","isRendering","renderingPauseDepth","buildDelayedRerender","isViewUpdated","isDatesUpdated","isEventsUpdated","handleOptions","hydrate","calendarInteractionClass","pluginInputs","pluginDefs","pluginInputs_1","pluginInput","globalName","refinePluginDefs","pluginDefs_1","pluginDef","requestRerender","renderableEventStore","bindHandlers","executeRender","unbindHandlers","removeNavLinkListener","anchorEl","getAttribute","customAction","viewOpt","zoomTo","windowResizeProxy","windowResize","buildInitialState","rawSources","singleRawSource","rawSources_1","batchRendering","getInitialDate","oldState","shift","newState","delayedRerender","tryRerender","renderComponent","eventUiSingleBase","eventUiBySource","releaseAfterSizingTriggers","setOption","mutateOptions","getOption","viewOpts","changeHandlers","normalUpdates","specialUpdates","isTimeZoneDirty","isSizeDirty","anyDifficultOptions","name_3","pluginHooks","rerenderDelay","availableRawLocales","dateProfileGeneratorClass","getAvailableLocaleCodes","rawOpts","eventEditable","optHandler","name_4","isValidViewType","dateOrRange","unselect","spec","getUnitViewSpec","viewTypes","defaultDateInput","gotoDate","zonedDateInput","incrementDate","formatDate","isHandlingWindowResize","registerInteractiveComponent","settingsInput","useEventCenter","parseInteractionSettings","interactions","interactionClass","unregisterInteractiveComponent","select","dateOrObj","endDate","triggerDateSelect","pev","triggerDateUnselect","origEvent","triggerDateClick","dayEl","buildDatePointApi","dateStr","sourceInput","sourceApi","getEventSourceById","getEventById","getEvents","eventApis","removeAllEvents","rerenderEvents","getEventSources","sourceApis","internalId","removeAllEventSources","refetchEvents","scrollToTime","timeInput","scrollToDuration","View","renderDatesMem","renderDatesWrap","unrenderDatesWrap","renderBusinessHoursMem","renderBusinessHours","unrenderBusinessHours","renderDateSelectionMem","renderDateSelectionWrap","unrenderDateSelectionWrap","renderEventsMem","renderEvents","unrenderEvents","renderEventSelectionMem","renderEventSelectionWrap","unrenderEventSelectionWrap","renderEventDragMem","renderEventDragWrap","unrenderEventDragWrap","renderEventResizeMem","renderEventResizeWrap","unrenderEventResizeWrap","initialize","isAuto","updateBaseSize","renderDates","stopNowIndicator","unrenderDates","renderDateSelection","unrenderDateSelection","sliceEvents","renderEventSelection","unrenderEventSelection","renderEventDrag","unrenderEventDrag","renderEventResize","unrenderEventResize","startNowIndicator","update","delay","nowIndicator","initialNowDate","getNowIndicatorUnit","initialNowQueriedMs","nowIndicatorTimeoutID","nowIndicatorIntervalID","setInterval","unrenderNowIndicator","renderNowIndicator","isNowIndicatorRendered","clearTimeout","clearInterval","isForced","queuedScroll","applyQueuedScroll","applyScroll","queryDateScroll","computeDateScroll","applyDateScroll","FgEventRenderer","renderSegs","mirrorInfo","rangeUpdated","renderSegEls","attachSegs","_segs","detachSegs","displayEventTime","displayEventEnd","eventTimeFormat","computeEventTimeFormat","computeDisplayEventTime","computeDisplayEventEnd","renderSegHtml","getSegClasses","isDraggable","isResizable","isDragging","isResizing","getTimeText","displayEnd","_getTimeText","getSkinCss","sortEventSegs","objs","buildSegCompareObj","c","_seg","computeSizes","force","computeSegSizes","assignSizes","assignSegSizes","hideByHash","visibility","showByHash","selectByInstanceId","unselectByInstanceId","FillRenderer","fillSegTag","dirtySizeFlags","containerElsByType","segsByType","getSegsByType","renderedSegs","containerEls","css","toLowerCase","ElementDragging","emitter","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","DRAG_META_PROPS","DRAG_META_DEFAULTS","parseDragMeta","renderDateCell","datesRepDistinctDays","colCnt","colHeadFormat","colspan","otherAttrs","isDateValid","columnHeaderHtml","columnHeaderText","DayHeader","dates","renderIntroHtml","columnHeaderFormat","computeFallbackHeaderFormat","dates_1","thead","DaySeries","indices","dayIndex","sliceRange","firstIndex","getDateDayIndex","lastIndex","clippedFirstIndex","clippedLastIndex","ceil","dayOffset","DayTable","daySeries","breakOnWeeks","daysPerRow","rowCnt","cells","buildCells","headerDates","buildHeaderDates","rows","row","col","buildCell","seriesSeg","index","nextIndex","firstCol","lastCol","Slicer","sliceBusinessHours","_sliceBusinessHours","sliceDateSelection","_sliceDateSpan","_sliceEventStore","sliceEventDrag","_sliceInteraction","sliceEventResize","sliceProps","extraArgs","eventSegs","dateSelectionSegs","businessHourSegs","fgEventSegs","bgEventSegs","sliceNowDate","computeActiveRange","rangeRes","sliceEventRanges","affectedInstances","sourceSeg","eventRanges","eventRanges_1","sliceEventRange","isComponentAllDay","arrayIncludes","itemOrItems","item","DIALOG_WIDTH","DIALOG_WIDTH_WIDER","VIEW_HEIGHT","useStyles","makeStyles","staticWrapperRoot","minWidth","flexDirection","paper","StaticWrapper","React.createElement","ModalDialog","onAccept","onDismiss","onClear","onSetToday","okLabel","cancelLabel","clearLabel","todayLabel","clearable","showTodayButton","wider","other","role","onClose","clsx","dialog","root","onClick","styles","createStyles","dialogRoot","dialogRootWider","withAdditionalAction","justifyContent","useIsomorphicEffect","React","runKeyHandler","e","keyHandlers","useKeyDown","active","keyHandlersRef","handleKeyDown","ModalWrapper","DialogProps","showTabs","InputComponent","DateInputProps","Enter","InlineWrapper","PopoverProps","ref","inputRef","anchorOrigin","vertical","horizontal","transformOrigin","VariantContext","Wrapper","variant","getWrapperFromVariant","ClockType","ClockPointer","toAnimateTransform","previousType","isInner","angle","hasSelected","getDerivedStateFromProps","nextProps","pointer","animateTransform","transition","thumb","borderRadius","boxSizing","noPoint","main","x","cx","cy","getAngleValue","step","offsetX","offsetY","atan","deg","distance","angleStep","getMeridiem","utils","convertToMeridiem","Clock","isFinish","isPointerInner","clock","tabIndex","onTouchMove","onTouchEnd","onMouseUp","onMouseMove","handleMove","pin","defaultProps","ampm","minutesStep","alignItems","margin","pointerEvents","squareMask","outline","touchActions","userSelect","cursor","Rifm","_React$Component","_state","_del","_handleChange","evt","stateValue","op","del","noOp","setState","local","selectionStart","refuse","di","fv","onChange","_hKD","_hKU","_inheritsLoose","_proto","componentWillUnmount","componentDidMount","componentDidUpdate","selectionEnd","fontSize","fontWeight","hidden","opacity","current","daySelected","dayDisabled","hint","Day","selected","toolbarTxt","fade","toolbarBtnSelected","ToolbarText","label","ToolbarButton","align","typographyClassName","toolbarBtn","textTransform","toolbar","toolbarLandscape","maxWidth","PickerToolbar","isLandscape","PureDateInput","inputValue","inputVariant","validationError","InputProps","onOpen","openPicker","TextFieldComponent","TextField","PureDateInputProps","readOnly","helperText","onKeyDown","getDisplayDate","invalidLabel","emptyLabel","labelFunc","isEmpty","getComparisonMaxDate","getComparisonMinDate","pick12hOr24hFormat","formats","KeyboardDateInput","KeyboardButtonProps","InputAdornmentProps","mask","maskChar","keyboardIcon","rifmFormatter","inputMask","makeMaskFromFormat","maskedDateFormatter","fill","useDateValues","initialFocusedDate","nowRef","useRef","useValueToDate","useUtils","usePickerState","autoOk","onError","setIsOpenState","useState","isOpen","setIsOpen","useCallback","newIsOpen","useOpenState","pickerDate","setPickerDate","useEffect","acceptDate","wrapperProps","useMemo","pickerProps","maxDate","minDate","disablePast","disableFuture","maxDateMessage","minDateMessage","invalidDateMessage","strictCompareDates","parsedValue","validate","pickerState","inputProps","useDebugValue","useKeyboardPickerState","displayDate","innerInputValue","setInnerInputValue","dateValue","parseInputString","innerInputProps","makePickerWithState","Input","useOptions","getCustomProps","DefaultToolbarComponent","allowKeyboardControl","animateYearScrolling","dateRangeIcon","disableToolbar","hideTabs","leftArrowButtonProps","leftArrowIcon","loadingIndicator","onMonthChange","onYearChange","openTo","orientation","renderDay","rightArrowButtonProps","rightArrowIcon","shouldDisableDate","timeIcon","ToolbarComponent","injectedProps","PropTypes","datePickerDefaultProps","dateTimePickerDefaultProps","fontWeightMedium","yearSelected","yearDisabled","Year","onSelect","forwardedRef","handleClick","onKeyPress","YearSelection","currentVariant","selectedYearRef","block","behavior","currentYear","onYearSelect","yearNumber","flex","monthSelected","monthDisabled","Month","handleSelection","flexWrap","alignContent","MonthSelection","currentMonth","shouldDisableMonth","utilMinDate","utilMaxDate","firstEnabledMonth","lastEnabledMonth","isBeforeFirstEnabled","isAfterLastEnabled","onMonthSelect","monthNumber","monthText","getOrientation","viewsMap","ClockView","containerLandscape","pickerView","minHeight","pickerViewLandscape","Picker","unparsedMinDate","unparsedMaxDate","rest","customOrientation","setOrientation","eventHandler","useIsLandscape","openView","setOpenView","handleChangeAndOpenNext","nextViewToOpen","useViews","onHourChange","onMinutesChange","onSecondsChange","positions","size","clockNumber","clockNumberSelected","contrastText","ClockNumber","transformStyle","getHourNumbers","currentHours","hourNumbers","endHour","isSelected","getMinutesNumbers","f","currentMeridiem","updatedTimeWithMeridiem","minutesValue","updatedTime","secondsValue","replaceClassName","origClass","classToRemove","RegExp","removeClass","node","element","baseVal","CSSTransition","_len","_key","appliedClasses","appear","enter","exit","onEnter","appearing","removeClasses","addClass","onEntering","onEntered","onExit","onExiting","onExited","getClassNames","isStringClassNames","baseClassName","activeClassName","doneClassName","phase","hasClass","_addClass","_this$appliedClasses$","base","done","_this$props","_objectWithoutPropertiesLoose","Transition","_extends","propTypes","isYearOnlyView","isYearAndMonthViews","getFormatByViews","DayWrapper","dayInCurrentMonth","slideTransition","easing","transitionContainer","willChange","slideEnterActive","slideExit","SlideTransition","transKey","slideDirection","transitionClasses","enterActive","exitActive","childFactory","mountOnEnter","unmountOnExit","switchHeader","iconButton","zIndex","daysHeader","maxHeight","dayLabel","textAlign","CalendarHeader","disablePrevMonth","disableNextMonth","rtl","useTheme","KeyDownListener","loadingQueue","returnVal","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","selectedDate","currentMonthNumber","isDayInCurrentMonth","dayComponent","handleDaySelect","closestEnabledDate","forward","backward","findClosestEnabledDate","loadingElement","shouldDisableNextMonth","progressContainer","nextMonth","lastDate","lastMonth","contextType","withStyles","withTheme","WithUtils","withUtils"],"mappings":"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","file":"static/js/4.cdd590ef.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');\n\nexports.default = _default;","/*!\nFullCalendar Core Package v4.4.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\n// Creating\n// ----------------------------------------------------------------------------------------------------------------\nvar elementPropHash = {\n    className: true,\n    colSpan: true,\n    rowSpan: true\n};\nvar containerTagHash = {\n    '<tr': 'tbody',\n    '<td': 'tr'\n};\nfunction createElement(tagName, attrs, content) {\n    var el = document.createElement(tagName);\n    if (attrs) {\n        for (var attrName in attrs) {\n            if (attrName === 'style') {\n                applyStyle(el, attrs[attrName]);\n            }\n            else if (elementPropHash[attrName]) {\n                el[attrName] = attrs[attrName];\n            }\n            else {\n                el.setAttribute(attrName, attrs[attrName]);\n            }\n        }\n    }\n    if (typeof content === 'string') {\n        el.innerHTML = content; // shortcut. no need to process HTML in any way\n    }\n    else if (content != null) {\n        appendToElement(el, content);\n    }\n    return el;\n}\nfunction htmlToElement(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.firstChild;\n}\nfunction htmlToElements(html) {\n    return Array.prototype.slice.call(htmlToNodeList(html));\n}\nfunction htmlToNodeList(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.childNodes;\n}\n// assumes html already trimmed and tag names are lowercase\nfunction computeContainerTag(html) {\n    return containerTagHash[html.substr(0, 3) // faster than using regex\n    ] || 'div';\n}\nfunction appendToElement(el, content) {\n    var childNodes = normalizeContent(content);\n    for (var i = 0; i < childNodes.length; i++) {\n        el.appendChild(childNodes[i]);\n    }\n}\nfunction prependToElement(parent, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = parent.firstChild || null; // if no firstChild, will append to end, but that's okay, b/c there were no children\n    for (var i = 0; i < newEls.length; i++) {\n        parent.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction insertAfterElement(refEl, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = refEl.nextSibling || null;\n    for (var i = 0; i < newEls.length; i++) {\n        refEl.parentNode.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction normalizeContent(content) {\n    var els;\n    if (typeof content === 'string') {\n        els = htmlToElements(content);\n    }\n    else if (content instanceof Node) {\n        els = [content];\n    }\n    else { // Node[] or NodeList\n        els = Array.prototype.slice.call(content);\n    }\n    return els;\n}\nfunction removeElement(el) {\n    if (el.parentNode) {\n        el.parentNode.removeChild(el);\n    }\n}\n// Querying\n// ----------------------------------------------------------------------------------------------------------------\n// from https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\nvar matchesMethod = Element.prototype.matches ||\n    Element.prototype.matchesSelector ||\n    Element.prototype.msMatchesSelector;\nvar closestMethod = Element.prototype.closest || function (selector) {\n    // polyfill\n    var el = this;\n    if (!document.documentElement.contains(el)) {\n        return null;\n    }\n    do {\n        if (elementMatches(el, selector)) {\n            return el;\n        }\n        el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n};\nfunction elementClosest(el, selector) {\n    return closestMethod.call(el, selector);\n}\nfunction elementMatches(el, selector) {\n    return matchesMethod.call(el, selector);\n}\n// accepts multiple subject els\n// returns a real array. good for methods like forEach\nfunction findElements(container, selector) {\n    var containers = container instanceof HTMLElement ? [container] : container;\n    var allMatches = [];\n    for (var i = 0; i < containers.length; i++) {\n        var matches = containers[i].querySelectorAll(selector);\n        for (var j = 0; j < matches.length; j++) {\n            allMatches.push(matches[j]);\n        }\n    }\n    return allMatches;\n}\n// accepts multiple subject els\n// only queries direct child elements\nfunction findChildren(parent, selector) {\n    var parents = parent instanceof HTMLElement ? [parent] : parent;\n    var allMatches = [];\n    for (var i = 0; i < parents.length; i++) {\n        var childNodes = parents[i].children; // only ever elements\n        for (var j = 0; j < childNodes.length; j++) {\n            var childNode = childNodes[j];\n            if (!selector || elementMatches(childNode, selector)) {\n                allMatches.push(childNode);\n            }\n        }\n    }\n    return allMatches;\n}\n// Attributes\n// ----------------------------------------------------------------------------------------------------------------\nfunction forceClassName(el, className, bool) {\n    if (bool) {\n        el.classList.add(className);\n    }\n    else {\n        el.classList.remove(className);\n    }\n}\n// Style\n// ----------------------------------------------------------------------------------------------------------------\nvar PIXEL_PROP_RE = /(top|left|right|bottom|width|height)$/i;\nfunction applyStyle(el, props) {\n    for (var propName in props) {\n        applyStyleProp(el, propName, props[propName]);\n    }\n}\nfunction applyStyleProp(el, name, val) {\n    if (val == null) {\n        el.style[name] = '';\n    }\n    else if (typeof val === 'number' && PIXEL_PROP_RE.test(name)) {\n        el.style[name] = val + 'px';\n    }\n    else {\n        el.style[name] = val;\n    }\n}\n\nfunction pointInsideRect(point, rect) {\n    return point.left >= rect.left &&\n        point.left < rect.right &&\n        point.top >= rect.top &&\n        point.top < rect.bottom;\n}\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n    var res = {\n        left: Math.max(rect1.left, rect2.left),\n        right: Math.min(rect1.right, rect2.right),\n        top: Math.max(rect1.top, rect2.top),\n        bottom: Math.min(rect1.bottom, rect2.bottom)\n    };\n    if (res.left < res.right && res.top < res.bottom) {\n        return res;\n    }\n    return false;\n}\nfunction translateRect(rect, deltaX, deltaY) {\n    return {\n        left: rect.left + deltaX,\n        right: rect.right + deltaX,\n        top: rect.top + deltaY,\n        bottom: rect.bottom + deltaY\n    };\n}\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n    return {\n        left: Math.min(Math.max(point.left, rect.left), rect.right),\n        top: Math.min(Math.max(point.top, rect.top), rect.bottom)\n    };\n}\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n    return {\n        left: (rect.left + rect.right) / 2,\n        top: (rect.top + rect.bottom) / 2\n    };\n}\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n    return {\n        left: point1.left - point2.left,\n        top: point1.top - point2.top\n    };\n}\n\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\nvar isRtlScrollbarOnLeft = null;\nfunction getIsRtlScrollbarOnLeft() {\n    if (isRtlScrollbarOnLeft === null) {\n        isRtlScrollbarOnLeft = computeIsRtlScrollbarOnLeft();\n    }\n    return isRtlScrollbarOnLeft;\n}\nfunction computeIsRtlScrollbarOnLeft() {\n    var outerEl = createElement('div', {\n        style: {\n            position: 'absolute',\n            top: -1000,\n            left: 0,\n            border: 0,\n            padding: 0,\n            overflow: 'scroll',\n            direction: 'rtl'\n        }\n    }, '<div></div>');\n    document.body.appendChild(outerEl);\n    var innerEl = outerEl.firstChild;\n    var res = innerEl.getBoundingClientRect().left > outerEl.getBoundingClientRect().left;\n    removeElement(outerEl);\n    return res;\n}\n// The scrollbar width computations in computeEdges are sometimes flawed when it comes to\n// retina displays, rounding, and IE11. Massage them into a usable value.\nfunction sanitizeScrollbarWidth(width) {\n    width = Math.max(0, width); // no negatives\n    width = Math.round(width);\n    return width;\n}\n\nfunction computeEdges(el, getPadding) {\n    if (getPadding === void 0) { getPadding = false; }\n    var computedStyle = window.getComputedStyle(el);\n    var borderLeft = parseInt(computedStyle.borderLeftWidth, 10) || 0;\n    var borderRight = parseInt(computedStyle.borderRightWidth, 10) || 0;\n    var borderTop = parseInt(computedStyle.borderTopWidth, 10) || 0;\n    var borderBottom = parseInt(computedStyle.borderBottomWidth, 10) || 0;\n    // must use offset(Width|Height) because compatible with client(Width|Height)\n    var scrollbarLeftRight = sanitizeScrollbarWidth(el.offsetWidth - el.clientWidth - borderLeft - borderRight);\n    var scrollbarBottom = sanitizeScrollbarWidth(el.offsetHeight - el.clientHeight - borderTop - borderBottom);\n    var res = {\n        borderLeft: borderLeft,\n        borderRight: borderRight,\n        borderTop: borderTop,\n        borderBottom: borderBottom,\n        scrollbarBottom: scrollbarBottom,\n        scrollbarLeft: 0,\n        scrollbarRight: 0\n    };\n    if (getIsRtlScrollbarOnLeft() && computedStyle.direction === 'rtl') { // is the scrollbar on the left side?\n        res.scrollbarLeft = scrollbarLeftRight;\n    }\n    else {\n        res.scrollbarRight = scrollbarLeftRight;\n    }\n    if (getPadding) {\n        res.paddingLeft = parseInt(computedStyle.paddingLeft, 10) || 0;\n        res.paddingRight = parseInt(computedStyle.paddingRight, 10) || 0;\n        res.paddingTop = parseInt(computedStyle.paddingTop, 10) || 0;\n        res.paddingBottom = parseInt(computedStyle.paddingBottom, 10) || 0;\n    }\n    return res;\n}\nfunction computeInnerRect(el, goWithinPadding) {\n    if (goWithinPadding === void 0) { goWithinPadding = false; }\n    var outerRect = computeRect(el);\n    var edges = computeEdges(el, goWithinPadding);\n    var res = {\n        left: outerRect.left + edges.borderLeft + edges.scrollbarLeft,\n        right: outerRect.right - edges.borderRight - edges.scrollbarRight,\n        top: outerRect.top + edges.borderTop,\n        bottom: outerRect.bottom - edges.borderBottom - edges.scrollbarBottom\n    };\n    if (goWithinPadding) {\n        res.left += edges.paddingLeft;\n        res.right -= edges.paddingRight;\n        res.top += edges.paddingTop;\n        res.bottom -= edges.paddingBottom;\n    }\n    return res;\n}\nfunction computeRect(el) {\n    var rect = el.getBoundingClientRect();\n    return {\n        left: rect.left + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        right: rect.right + window.pageXOffset,\n        bottom: rect.bottom + window.pageYOffset\n    };\n}\nfunction computeViewportRect() {\n    return {\n        left: window.pageXOffset,\n        right: window.pageXOffset + document.documentElement.clientWidth,\n        top: window.pageYOffset,\n        bottom: window.pageYOffset + document.documentElement.clientHeight\n    };\n}\nfunction computeHeightAndMargins(el) {\n    return el.getBoundingClientRect().height + computeVMargins(el);\n}\nfunction computeVMargins(el) {\n    var computed = window.getComputedStyle(el);\n    return parseInt(computed.marginTop, 10) +\n        parseInt(computed.marginBottom, 10);\n}\n// does not return window\nfunction getClippingParents(el) {\n    var parents = [];\n    while (el instanceof HTMLElement) { // will stop when gets to document or null\n        var computedStyle = window.getComputedStyle(el);\n        if (computedStyle.position === 'fixed') {\n            break;\n        }\n        if ((/(auto|scroll)/).test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n            parents.push(el);\n        }\n        el = el.parentNode;\n    }\n    return parents;\n}\nfunction computeClippingRect(el) {\n    return getClippingParents(el)\n        .map(function (el) {\n        return computeInnerRect(el);\n    })\n        .concat(computeViewportRect())\n        .reduce(function (rect0, rect1) {\n        return intersectRects(rect0, rect1) || rect1; // should always intersect\n    });\n}\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n    ev.preventDefault();\n}\n// Event Delegation\n// ----------------------------------------------------------------------------------------------------------------\nfunction listenBySelector(container, eventType, selector, handler) {\n    function realHandler(ev) {\n        var matchedChild = elementClosest(ev.target, selector);\n        if (matchedChild) {\n            handler.call(matchedChild, ev, matchedChild);\n        }\n    }\n    container.addEventListener(eventType, realHandler);\n    return function () {\n        container.removeEventListener(eventType, realHandler);\n    };\n}\nfunction listenToHoverBySelector(container, selector, onMouseEnter, onMouseLeave) {\n    var currentMatchedChild;\n    return listenBySelector(container, 'mouseover', selector, function (ev, matchedChild) {\n        if (matchedChild !== currentMatchedChild) {\n            currentMatchedChild = matchedChild;\n            onMouseEnter(ev, matchedChild);\n            var realOnMouseLeave_1 = function (ev) {\n                currentMatchedChild = null;\n                onMouseLeave(ev, matchedChild);\n                matchedChild.removeEventListener('mouseleave', realOnMouseLeave_1);\n            };\n            // listen to the next mouseleave, and then unattach\n            matchedChild.addEventListener('mouseleave', realOnMouseLeave_1);\n        }\n    });\n}\n// Animation\n// ----------------------------------------------------------------------------------------------------------------\nvar transitionEventNames = [\n    'webkitTransitionEnd',\n    'otransitionend',\n    'oTransitionEnd',\n    'msTransitionEnd',\n    'transitionend'\n];\n// triggered only when the next single subsequent transition finishes\nfunction whenTransitionDone(el, callback) {\n    var realCallback = function (ev) {\n        callback(ev);\n        transitionEventNames.forEach(function (eventName) {\n            el.removeEventListener(eventName, realCallback);\n        });\n    };\n    transitionEventNames.forEach(function (eventName) {\n        el.addEventListener(eventName, realCallback); // cross-browser way to determine when the transition finishes\n    });\n}\n\nvar DAY_IDS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n// Adding\nfunction addWeeks(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n * 7;\n    return arrayToUtcDate(a);\n}\nfunction addDays(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n;\n    return arrayToUtcDate(a);\n}\nfunction addMs(m, n) {\n    var a = dateToUtcArray(m);\n    a[6] += n;\n    return arrayToUtcDate(a);\n}\n// Diffing (all return floats)\nfunction diffWeeks(m0, m1) {\n    return diffDays(m0, m1) / 7;\n}\nfunction diffDays(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60 * 24);\n}\nfunction diffHours(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60);\n}\nfunction diffMinutes(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60);\n}\nfunction diffSeconds(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / 1000;\n}\nfunction diffDayAndTime(m0, m1) {\n    var m0day = startOfDay(m0);\n    var m1day = startOfDay(m1);\n    return {\n        years: 0,\n        months: 0,\n        days: Math.round(diffDays(m0day, m1day)),\n        milliseconds: (m1.valueOf() - m1day.valueOf()) - (m0.valueOf() - m0day.valueOf())\n    };\n}\n// Diffing Whole Units\nfunction diffWholeWeeks(m0, m1) {\n    var d = diffWholeDays(m0, m1);\n    if (d !== null && d % 7 === 0) {\n        return d / 7;\n    }\n    return null;\n}\nfunction diffWholeDays(m0, m1) {\n    if (timeAsMs(m0) === timeAsMs(m1)) {\n        return Math.round(diffDays(m0, m1));\n    }\n    return null;\n}\n// Start-Of\nfunction startOfDay(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate()\n    ]);\n}\nfunction startOfHour(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours()\n    ]);\n}\nfunction startOfMinute(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes()\n    ]);\n}\nfunction startOfSecond(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes(),\n        m.getUTCSeconds()\n    ]);\n}\n// Week Computation\nfunction weekOfYear(marker, dow, doy) {\n    var y = marker.getUTCFullYear();\n    var w = weekOfGivenYear(marker, y, dow, doy);\n    if (w < 1) {\n        return weekOfGivenYear(marker, y - 1, dow, doy);\n    }\n    var nextW = weekOfGivenYear(marker, y + 1, dow, doy);\n    if (nextW >= 1) {\n        return Math.min(w, nextW);\n    }\n    return w;\n}\nfunction weekOfGivenYear(marker, year, dow, doy) {\n    var firstWeekStart = arrayToUtcDate([year, 0, 1 + firstWeekOffset(year, dow, doy)]);\n    var dayStart = startOfDay(marker);\n    var days = Math.round(diffDays(firstWeekStart, dayStart));\n    return Math.floor(days / 7) + 1; // zero-indexed\n}\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n    var fwd = 7 + dow - doy;\n    // first-week day local weekday -- which local weekday is fwd\n    var fwdlw = (7 + arrayToUtcDate([year, 0, fwd]).getUTCDay() - dow) % 7;\n    return -fwdlw + fwd - 1;\n}\n// Array Conversion\nfunction dateToLocalArray(date) {\n    return [\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    ];\n}\nfunction arrayToLocalDate(a) {\n    return new Date(a[0], a[1] || 0, a[2] == null ? 1 : a[2], // day of month\n    a[3] || 0, a[4] || 0, a[5] || 0);\n}\nfunction dateToUtcArray(date) {\n    return [\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        date.getUTCMinutes(),\n        date.getUTCSeconds(),\n        date.getUTCMilliseconds()\n    ];\n}\nfunction arrayToUtcDate(a) {\n    // according to web standards (and Safari), a month index is required.\n    // massage if only given a year.\n    if (a.length === 1) {\n        a = a.concat([0]);\n    }\n    return new Date(Date.UTC.apply(Date, a));\n}\n// Other Utils\nfunction isValidDate(m) {\n    return !isNaN(m.valueOf());\n}\nfunction timeAsMs(m) {\n    return m.getUTCHours() * 1000 * 60 * 60 +\n        m.getUTCMinutes() * 1000 * 60 +\n        m.getUTCSeconds() * 1000 +\n        m.getUTCMilliseconds();\n}\n\nvar INTERNAL_UNITS = ['years', 'months', 'days', 'milliseconds'];\nvar PARSE_RE = /^(-?)(?:(\\d+)\\.)?(\\d+):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?/;\n// Parsing and Creation\nfunction createDuration(input, unit) {\n    var _a;\n    if (typeof input === 'string') {\n        return parseString(input);\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return normalizeObject(input);\n    }\n    else if (typeof input === 'number') {\n        return normalizeObject((_a = {}, _a[unit || 'milliseconds'] = input, _a));\n    }\n    else {\n        return null;\n    }\n}\nfunction parseString(s) {\n    var m = PARSE_RE.exec(s);\n    if (m) {\n        var sign = m[1] ? -1 : 1;\n        return {\n            years: 0,\n            months: 0,\n            days: sign * (m[2] ? parseInt(m[2], 10) : 0),\n            milliseconds: sign * ((m[3] ? parseInt(m[3], 10) : 0) * 60 * 60 * 1000 + // hours\n                (m[4] ? parseInt(m[4], 10) : 0) * 60 * 1000 + // minutes\n                (m[5] ? parseInt(m[5], 10) : 0) * 1000 + // seconds\n                (m[6] ? parseInt(m[6], 10) : 0) // ms\n            )\n        };\n    }\n    return null;\n}\nfunction normalizeObject(obj) {\n    return {\n        years: obj.years || obj.year || 0,\n        months: obj.months || obj.month || 0,\n        days: (obj.days || obj.day || 0) +\n            getWeeksFromInput(obj) * 7,\n        milliseconds: (obj.hours || obj.hour || 0) * 60 * 60 * 1000 + // hours\n            (obj.minutes || obj.minute || 0) * 60 * 1000 + // minutes\n            (obj.seconds || obj.second || 0) * 1000 + // seconds\n            (obj.milliseconds || obj.millisecond || obj.ms || 0) // ms\n    };\n}\nfunction getWeeksFromInput(obj) {\n    return obj.weeks || obj.week || 0;\n}\n// Equality\nfunction durationsEqual(d0, d1) {\n    return d0.years === d1.years &&\n        d0.months === d1.months &&\n        d0.days === d1.days &&\n        d0.milliseconds === d1.milliseconds;\n}\nfunction isSingleDay(dur) {\n    return dur.years === 0 && dur.months === 0 && dur.days === 1 && dur.milliseconds === 0;\n}\n// Simple Math\nfunction addDurations(d0, d1) {\n    return {\n        years: d0.years + d1.years,\n        months: d0.months + d1.months,\n        days: d0.days + d1.days,\n        milliseconds: d0.milliseconds + d1.milliseconds\n    };\n}\nfunction subtractDurations(d1, d0) {\n    return {\n        years: d1.years - d0.years,\n        months: d1.months - d0.months,\n        days: d1.days - d0.days,\n        milliseconds: d1.milliseconds - d0.milliseconds\n    };\n}\nfunction multiplyDuration(d, n) {\n    return {\n        years: d.years * n,\n        months: d.months * n,\n        days: d.days * n,\n        milliseconds: d.milliseconds * n\n    };\n}\n// Conversions\n// \"Rough\" because they are based on average-case Gregorian months/years\nfunction asRoughYears(dur) {\n    return asRoughDays(dur) / 365;\n}\nfunction asRoughMonths(dur) {\n    return asRoughDays(dur) / 30;\n}\nfunction asRoughDays(dur) {\n    return asRoughMs(dur) / 864e5;\n}\nfunction asRoughMinutes(dur) {\n    return asRoughMs(dur) / (1000 * 60);\n}\nfunction asRoughSeconds(dur) {\n    return asRoughMs(dur) / 1000;\n}\nfunction asRoughMs(dur) {\n    return dur.years * (365 * 864e5) +\n        dur.months * (30 * 864e5) +\n        dur.days * 864e5 +\n        dur.milliseconds;\n}\n// Advanced Math\nfunction wholeDivideDurations(numerator, denominator) {\n    var res = null;\n    for (var i = 0; i < INTERNAL_UNITS.length; i++) {\n        var unit = INTERNAL_UNITS[i];\n        if (denominator[unit]) {\n            var localRes = numerator[unit] / denominator[unit];\n            if (!isInt(localRes) || (res !== null && res !== localRes)) {\n                return null;\n            }\n            res = localRes;\n        }\n        else if (numerator[unit]) {\n            // needs to divide by something but can't!\n            return null;\n        }\n    }\n    return res;\n}\nfunction greatestDurationDenominator(dur, dontReturnWeeks) {\n    var ms = dur.milliseconds;\n    if (ms) {\n        if (ms % 1000 !== 0) {\n            return { unit: 'millisecond', value: ms };\n        }\n        if (ms % (1000 * 60) !== 0) {\n            return { unit: 'second', value: ms / 1000 };\n        }\n        if (ms % (1000 * 60 * 60) !== 0) {\n            return { unit: 'minute', value: ms / (1000 * 60) };\n        }\n        if (ms) {\n            return { unit: 'hour', value: ms / (1000 * 60 * 60) };\n        }\n    }\n    if (dur.days) {\n        if (!dontReturnWeeks && dur.days % 7 === 0) {\n            return { unit: 'week', value: dur.days / 7 };\n        }\n        return { unit: 'day', value: dur.days };\n    }\n    if (dur.months) {\n        return { unit: 'month', value: dur.months };\n    }\n    if (dur.years) {\n        return { unit: 'year', value: dur.years };\n    }\n    return { unit: 'millisecond', value: 0 };\n}\n\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\nfunction compensateScroll(rowEl, scrollbarWidths) {\n    if (scrollbarWidths.left) {\n        applyStyle(rowEl, {\n            borderLeftWidth: 1,\n            marginLeft: scrollbarWidths.left - 1\n        });\n    }\n    if (scrollbarWidths.right) {\n        applyStyle(rowEl, {\n            borderRightWidth: 1,\n            marginRight: scrollbarWidths.right - 1\n        });\n    }\n}\n// Undoes compensateScroll and restores all borders/margins\nfunction uncompensateScroll(rowEl) {\n    applyStyle(rowEl, {\n        marginLeft: '',\n        marginRight: '',\n        borderLeftWidth: '',\n        borderRightWidth: ''\n    });\n}\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n    document.body.classList.add('fc-not-allowed');\n}\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n    document.body.classList.remove('fc-not-allowed');\n}\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n// reduces the available height.\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n    // *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n    // and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n    var minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n    var minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n    var flexEls = []; // elements that are allowed to expand. array of DOM nodes\n    var flexOffsets = []; // amount of vertical space it takes up\n    var flexHeights = []; // actual css height\n    var usedHeight = 0;\n    undistributeHeight(els); // give all elements their natural height\n    // find elements that are below the recommended height (expandable).\n    // important to query for heights in a single first pass (to avoid reflow oscillation).\n    els.forEach(function (el, i) {\n        var minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n        var naturalHeight = el.getBoundingClientRect().height;\n        var naturalOffset = naturalHeight + computeVMargins(el);\n        if (naturalOffset < minOffset) {\n            flexEls.push(el);\n            flexOffsets.push(naturalOffset);\n            flexHeights.push(naturalHeight);\n        }\n        else {\n            // this element stretches past recommended height (non-expandable). mark the space as occupied.\n            usedHeight += naturalOffset;\n        }\n    });\n    // readjust the recommended height to only consider the height available to non-maxed-out rows.\n    if (shouldRedistribute) {\n        availableHeight -= usedHeight;\n        minOffset1 = Math.floor(availableHeight / flexEls.length);\n        minOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n    }\n    // assign heights to all expandable elements\n    flexEls.forEach(function (el, i) {\n        var minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n        var naturalOffset = flexOffsets[i];\n        var naturalHeight = flexHeights[i];\n        var newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n        if (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n            el.style.height = newHeight + 'px';\n        }\n    });\n}\n// Undoes distrubuteHeight, restoring all els to their natural height\nfunction undistributeHeight(els) {\n    els.forEach(function (el) {\n        el.style.height = '';\n    });\n}\n// Given `els`, a set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\nfunction matchCellWidths(els) {\n    var maxInnerWidth = 0;\n    els.forEach(function (el) {\n        var innerEl = el.firstChild; // hopefully an element\n        if (innerEl instanceof HTMLElement) {\n            var innerWidth_1 = innerEl.getBoundingClientRect().width;\n            if (innerWidth_1 > maxInnerWidth) {\n                maxInnerWidth = innerWidth_1;\n            }\n        }\n    });\n    maxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n    els.forEach(function (el) {\n        el.style.width = maxInnerWidth + 'px';\n    });\n    return maxInnerWidth;\n}\n// Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\nfunction subtractInnerElHeight(outerEl, innerEl) {\n    // effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n    var reflowStyleProps = {\n        position: 'relative',\n        left: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n    };\n    applyStyle(outerEl, reflowStyleProps);\n    applyStyle(innerEl, reflowStyleProps);\n    var diff = // grab the dimensions\n     outerEl.getBoundingClientRect().height -\n        innerEl.getBoundingClientRect().height;\n    // undo hack\n    var resetStyleProps = { position: '', left: '' };\n    applyStyle(outerEl, resetStyleProps);\n    applyStyle(innerEl, resetStyleProps);\n    return diff;\n}\n/* Selection\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventSelection(el) {\n    el.classList.add('fc-unselectable');\n    el.addEventListener('selectstart', preventDefault);\n}\nfunction allowSelection(el) {\n    el.classList.remove('fc-unselectable');\n    el.removeEventListener('selectstart', preventDefault);\n}\n/* Context Menu\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventContextMenu(el) {\n    el.addEventListener('contextmenu', preventDefault);\n}\nfunction allowContextMenu(el) {\n    el.removeEventListener('contextmenu', preventDefault);\n}\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\nfunction parseFieldSpecs(input) {\n    var specs = [];\n    var tokens = [];\n    var i;\n    var token;\n    if (typeof input === 'string') {\n        tokens = input.split(/\\s*,\\s*/);\n    }\n    else if (typeof input === 'function') {\n        tokens = [input];\n    }\n    else if (Array.isArray(input)) {\n        tokens = input;\n    }\n    for (i = 0; i < tokens.length; i++) {\n        token = tokens[i];\n        if (typeof token === 'string') {\n            specs.push(token.charAt(0) === '-' ?\n                { field: token.substring(1), order: -1 } :\n                { field: token, order: 1 });\n        }\n        else if (typeof token === 'function') {\n            specs.push({ func: token });\n        }\n    }\n    return specs;\n}\nfunction compareByFieldSpecs(obj0, obj1, fieldSpecs) {\n    var i;\n    var cmp;\n    for (i = 0; i < fieldSpecs.length; i++) {\n        cmp = compareByFieldSpec(obj0, obj1, fieldSpecs[i]);\n        if (cmp) {\n            return cmp;\n        }\n    }\n    return 0;\n}\nfunction compareByFieldSpec(obj0, obj1, fieldSpec) {\n    if (fieldSpec.func) {\n        return fieldSpec.func(obj0, obj1);\n    }\n    return flexibleCompare(obj0[fieldSpec.field], obj1[fieldSpec.field])\n        * (fieldSpec.order || 1);\n}\nfunction flexibleCompare(a, b) {\n    if (!a && !b) {\n        return 0;\n    }\n    if (b == null) {\n        return -1;\n    }\n    if (a == null) {\n        return 1;\n    }\n    if (typeof a === 'string' || typeof b === 'string') {\n        return String(a).localeCompare(String(b));\n    }\n    return a - b;\n}\n/* String Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction capitaliseFirstLetter(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction padStart(val, len) {\n    var s = String(val);\n    return '000'.substr(0, len - s.length) + s;\n}\n/* Number Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction compareNumbers(a, b) {\n    return a - b;\n}\nfunction isInt(n) {\n    return n % 1 === 0;\n}\n/* Weird Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction applyAll(functions, thisObj, args) {\n    if (typeof functions === 'function') { // supplied a single function\n        functions = [functions];\n    }\n    if (functions) {\n        var i = void 0;\n        var ret = void 0;\n        for (i = 0; i < functions.length; i++) {\n            ret = functions[i].apply(thisObj, args) || ret;\n        }\n        return ret;\n    }\n}\nfunction firstDefined() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i++) {\n        if (args[i] !== undefined) {\n            return args[i];\n        }\n    }\n}\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\nfunction debounce(func, wait) {\n    var timeout;\n    var args;\n    var context;\n    var timestamp;\n    var result;\n    var later = function () {\n        var last = new Date().valueOf() - timestamp;\n        if (last < wait) {\n            timeout = setTimeout(later, wait - last);\n        }\n        else {\n            timeout = null;\n            result = func.apply(context, args);\n            context = args = null;\n        }\n    };\n    return function () {\n        context = this;\n        args = arguments;\n        timestamp = new Date().valueOf();\n        if (!timeout) {\n            timeout = setTimeout(later, wait);\n        }\n        return result;\n    };\n}\n// Number and Boolean are only types that defaults or not computed for\n// TODO: write more comments\nfunction refineProps(rawProps, processors, defaults, leftoverProps) {\n    if (defaults === void 0) { defaults = {}; }\n    var refined = {};\n    for (var key in processors) {\n        var processor = processors[key];\n        if (rawProps[key] !== undefined) {\n            // found\n            if (processor === Function) {\n                refined[key] = typeof rawProps[key] === 'function' ? rawProps[key] : null;\n            }\n            else if (processor) { // a refining function?\n                refined[key] = processor(rawProps[key]);\n            }\n            else {\n                refined[key] = rawProps[key];\n            }\n        }\n        else if (defaults[key] !== undefined) {\n            // there's an explicit default\n            refined[key] = defaults[key];\n        }\n        else {\n            // must compute a default\n            if (processor === String) {\n                refined[key] = ''; // empty string is default for String\n            }\n            else if (!processor || processor === Number || processor === Boolean || processor === Function) {\n                refined[key] = null; // assign null for other non-custom processor funcs\n            }\n            else {\n                refined[key] = processor(null); // run the custom processor func\n            }\n        }\n    }\n    if (leftoverProps) {\n        for (var key in rawProps) {\n            if (processors[key] === undefined) {\n                leftoverProps[key] = rawProps[key];\n            }\n        }\n    }\n    return refined;\n}\n/* Date stuff that doesn't belong in datelib core\n----------------------------------------------------------------------------------------------------------------------*/\n// given a timed range, computes an all-day range that has the same exact duration,\n// but whose start time is aligned with the start of the day.\nfunction computeAlignedDayRange(timedRange) {\n    var dayCnt = Math.floor(diffDays(timedRange.start, timedRange.end)) || 1;\n    var start = startOfDay(timedRange.start);\n    var end = addDays(start, dayCnt);\n    return { start: start, end: end };\n}\n// given a timed range, computes an all-day range based on how for the end date bleeds into the next day\n// TODO: give nextDayThreshold a default arg\nfunction computeVisibleDayRange(timedRange, nextDayThreshold) {\n    if (nextDayThreshold === void 0) { nextDayThreshold = createDuration(0); }\n    var startDay = null;\n    var endDay = null;\n    if (timedRange.end) {\n        endDay = startOfDay(timedRange.end);\n        var endTimeMS = timedRange.end.valueOf() - endDay.valueOf(); // # of milliseconds into `endDay`\n        // If the end time is actually inclusively part of the next day and is equal to or\n        // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n        // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n        if (endTimeMS && endTimeMS >= asRoughMs(nextDayThreshold)) {\n            endDay = addDays(endDay, 1);\n        }\n    }\n    if (timedRange.start) {\n        startDay = startOfDay(timedRange.start); // the beginning of the day the range starts\n        // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n        if (endDay && endDay <= startDay) {\n            endDay = addDays(startDay, 1);\n        }\n    }\n    return { start: startDay, end: endDay };\n}\n// spans from one day into another?\nfunction isMultiDayRange(range) {\n    var visibleRange = computeVisibleDayRange(range);\n    return diffDays(visibleRange.start, visibleRange.end) > 1;\n}\nfunction diffDates(date0, date1, dateEnv, largeUnit) {\n    if (largeUnit === 'year') {\n        return createDuration(dateEnv.diffWholeYears(date0, date1), 'year');\n    }\n    else if (largeUnit === 'month') {\n        return createDuration(dateEnv.diffWholeMonths(date0, date1), 'month');\n    }\n    else {\n        return diffDayAndTime(date0, date1); // returns a duration\n    }\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction parseRecurring(eventInput, allDayDefault, dateEnv, recurringTypes, leftovers) {\n    for (var i = 0; i < recurringTypes.length; i++) {\n        var localLeftovers = {};\n        var parsed = recurringTypes[i].parse(eventInput, localLeftovers, dateEnv);\n        if (parsed) {\n            var allDay = localLeftovers.allDay;\n            delete localLeftovers.allDay; // remove from leftovers\n            if (allDay == null) {\n                allDay = allDayDefault;\n                if (allDay == null) {\n                    allDay = parsed.allDayGuess;\n                    if (allDay == null) {\n                        allDay = false;\n                    }\n                }\n            }\n            __assign(leftovers, localLeftovers);\n            return {\n                allDay: allDay,\n                duration: parsed.duration,\n                typeData: parsed.typeData,\n                typeId: i\n            };\n        }\n    }\n    return null;\n}\n/*\nEvent MUST have a recurringDef\n*/\nfunction expandRecurringRanges(eventDef, duration, framingRange, dateEnv, recurringTypes) {\n    var typeDef = recurringTypes[eventDef.recurringDef.typeId];\n    var markers = typeDef.expand(eventDef.recurringDef.typeData, {\n        start: dateEnv.subtract(framingRange.start, duration),\n        end: framingRange.end\n    }, dateEnv);\n    // the recurrence plugins don't guarantee that all-day events are start-of-day, so we have to\n    if (eventDef.allDay) {\n        markers = markers.map(startOfDay);\n    }\n    return markers;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexProps) {\n    var dest = {};\n    var i;\n    var name;\n    var complexObjs;\n    var j;\n    var val;\n    var props;\n    if (complexProps) {\n        for (i = 0; i < complexProps.length; i++) {\n            name = complexProps[i];\n            complexObjs = [];\n            // collect the trailing object values, stopping when a non-object is discovered\n            for (j = propObjs.length - 1; j >= 0; j--) {\n                val = propObjs[j][name];\n                if (typeof val === 'object' && val) { // non-null object\n                    complexObjs.unshift(val);\n                }\n                else if (val !== undefined) {\n                    dest[name] = val; // if there were no objects, this value will be used\n                    break;\n                }\n            }\n            // if the trailing values were objects, use the merged value\n            if (complexObjs.length) {\n                dest[name] = mergeProps(complexObjs);\n            }\n        }\n    }\n    // copy values into the destination, going from last to first\n    for (i = propObjs.length - 1; i >= 0; i--) {\n        props = propObjs[i];\n        for (name in props) {\n            if (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n                dest[name] = props[name];\n            }\n        }\n    }\n    return dest;\n}\nfunction filterHash(hash, func) {\n    var filtered = {};\n    for (var key in hash) {\n        if (func(hash[key], key)) {\n            filtered[key] = hash[key];\n        }\n    }\n    return filtered;\n}\nfunction mapHash(hash, func) {\n    var newHash = {};\n    for (var key in hash) {\n        newHash[key] = func(hash[key], key);\n    }\n    return newHash;\n}\nfunction arrayToHash(a) {\n    var hash = {};\n    for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n        var item = a_1[_i];\n        hash[item] = true;\n    }\n    return hash;\n}\nfunction hashValuesToArray(obj) {\n    var a = [];\n    for (var key in obj) {\n        a.push(obj[key]);\n    }\n    return a;\n}\nfunction isPropsEqual(obj0, obj1) {\n    for (var key in obj0) {\n        if (hasOwnProperty.call(obj0, key)) {\n            if (!(key in obj1)) {\n                return false;\n            }\n        }\n    }\n    for (var key in obj1) {\n        if (hasOwnProperty.call(obj1, key)) {\n            if (obj0[key] !== obj1[key]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction parseEvents(rawEvents, sourceId, calendar, allowOpenRange) {\n    var eventStore = createEmptyEventStore();\n    for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n        var rawEvent = rawEvents_1[_i];\n        var tuple = parseEvent(rawEvent, sourceId, calendar, allowOpenRange);\n        if (tuple) {\n            eventTupleToStore(tuple, eventStore);\n        }\n    }\n    return eventStore;\n}\nfunction eventTupleToStore(tuple, eventStore) {\n    if (eventStore === void 0) { eventStore = createEmptyEventStore(); }\n    eventStore.defs[tuple.def.defId] = tuple.def;\n    if (tuple.instance) {\n        eventStore.instances[tuple.instance.instanceId] = tuple.instance;\n    }\n    return eventStore;\n}\nfunction expandRecurring(eventStore, framingRange, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var defs = eventStore.defs, instances = eventStore.instances;\n    // remove existing recurring instances\n    instances = filterHash(instances, function (instance) {\n        return !defs[instance.defId].recurringDef;\n    });\n    for (var defId in defs) {\n        var def = defs[defId];\n        if (def.recurringDef) {\n            var duration = def.recurringDef.duration;\n            if (!duration) {\n                duration = def.allDay ?\n                    calendar.defaultAllDayEventDuration :\n                    calendar.defaultTimedEventDuration;\n            }\n            var starts = expandRecurringRanges(def, duration, framingRange, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes);\n            for (var _i = 0, starts_1 = starts; _i < starts_1.length; _i++) {\n                var start = starts_1[_i];\n                var instance = createEventInstance(defId, {\n                    start: start,\n                    end: dateEnv.add(start, duration)\n                });\n                instances[instance.instanceId] = instance;\n            }\n        }\n    }\n    return { defs: defs, instances: instances };\n}\n// retrieves events that have the same groupId as the instance specified by `instanceId`\n// or they are the same as the instance.\n// why might instanceId not be in the store? an event from another calendar?\nfunction getRelevantEvents(eventStore, instanceId) {\n    var instance = eventStore.instances[instanceId];\n    if (instance) {\n        var def_1 = eventStore.defs[instance.defId];\n        // get events/instances with same group\n        var newStore = filterEventStoreDefs(eventStore, function (lookDef) {\n            return isEventDefsGrouped(def_1, lookDef);\n        });\n        // add the original\n        // TODO: wish we could use eventTupleToStore or something like it\n        newStore.defs[def_1.defId] = def_1;\n        newStore.instances[instance.instanceId] = instance;\n        return newStore;\n    }\n    return createEmptyEventStore();\n}\nfunction isEventDefsGrouped(def0, def1) {\n    return Boolean(def0.groupId && def0.groupId === def1.groupId);\n}\nfunction transformRawEvents(rawEvents, eventSource, calendar) {\n    var calEachTransform = calendar.opt('eventDataTransform');\n    var sourceEachTransform = eventSource ? eventSource.eventDataTransform : null;\n    if (sourceEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, sourceEachTransform);\n    }\n    if (calEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, calEachTransform);\n    }\n    return rawEvents;\n}\nfunction transformEachRawEvent(rawEvents, func) {\n    var refinedEvents;\n    if (!func) {\n        refinedEvents = rawEvents;\n    }\n    else {\n        refinedEvents = [];\n        for (var _i = 0, rawEvents_2 = rawEvents; _i < rawEvents_2.length; _i++) {\n            var rawEvent = rawEvents_2[_i];\n            var refinedEvent = func(rawEvent);\n            if (refinedEvent) {\n                refinedEvents.push(refinedEvent);\n            }\n            else if (refinedEvent == null) {\n                refinedEvents.push(rawEvent);\n            } // if a different falsy value, do nothing\n        }\n    }\n    return refinedEvents;\n}\nfunction createEmptyEventStore() {\n    return { defs: {}, instances: {} };\n}\nfunction mergeEventStores(store0, store1) {\n    return {\n        defs: __assign({}, store0.defs, store1.defs),\n        instances: __assign({}, store0.instances, store1.instances)\n    };\n}\nfunction filterEventStoreDefs(eventStore, filterFunc) {\n    var defs = filterHash(eventStore.defs, filterFunc);\n    var instances = filterHash(eventStore.instances, function (instance) {\n        return defs[instance.defId]; // still exists?\n    });\n    return { defs: defs, instances: instances };\n}\n\nfunction parseRange(input, dateEnv) {\n    var start = null;\n    var end = null;\n    if (input.start) {\n        start = dateEnv.createMarker(input.start);\n    }\n    if (input.end) {\n        end = dateEnv.createMarker(input.end);\n    }\n    if (!start && !end) {\n        return null;\n    }\n    if (start && end && end < start) {\n        return null;\n    }\n    return { start: start, end: end };\n}\n// SIDE-EFFECT: will mutate ranges.\n// Will return a new array result.\nfunction invertRanges(ranges, constraintRange) {\n    var invertedRanges = [];\n    var start = constraintRange.start; // the end of the previous range. the start of the new range\n    var i;\n    var dateRange;\n    // ranges need to be in order. required for our date-walking algorithm\n    ranges.sort(compareRanges);\n    for (i = 0; i < ranges.length; i++) {\n        dateRange = ranges[i];\n        // add the span of time before the event (if there is any)\n        if (dateRange.start > start) { // compare millisecond time (skip any ambig logic)\n            invertedRanges.push({ start: start, end: dateRange.start });\n        }\n        if (dateRange.end > start) {\n            start = dateRange.end;\n        }\n    }\n    // add the span of time after the last event (if there is any)\n    if (start < constraintRange.end) { // compare millisecond time (skip any ambig logic)\n        invertedRanges.push({ start: start, end: constraintRange.end });\n    }\n    return invertedRanges;\n}\nfunction compareRanges(range0, range1) {\n    return range0.start.valueOf() - range1.start.valueOf(); // earlier ranges go first\n}\nfunction intersectRanges(range0, range1) {\n    var start = range0.start;\n    var end = range0.end;\n    var newRange = null;\n    if (range1.start !== null) {\n        if (start === null) {\n            start = range1.start;\n        }\n        else {\n            start = new Date(Math.max(start.valueOf(), range1.start.valueOf()));\n        }\n    }\n    if (range1.end != null) {\n        if (end === null) {\n            end = range1.end;\n        }\n        else {\n            end = new Date(Math.min(end.valueOf(), range1.end.valueOf()));\n        }\n    }\n    if (start === null || end === null || start < end) {\n        newRange = { start: start, end: end };\n    }\n    return newRange;\n}\nfunction rangesEqual(range0, range1) {\n    return (range0.start === null ? null : range0.start.valueOf()) === (range1.start === null ? null : range1.start.valueOf()) &&\n        (range0.end === null ? null : range0.end.valueOf()) === (range1.end === null ? null : range1.end.valueOf());\n}\nfunction rangesIntersect(range0, range1) {\n    return (range0.end === null || range1.start === null || range0.end > range1.start) &&\n        (range0.start === null || range1.end === null || range0.start < range1.end);\n}\nfunction rangeContainsRange(outerRange, innerRange) {\n    return (outerRange.start === null || (innerRange.start !== null && innerRange.start >= outerRange.start)) &&\n        (outerRange.end === null || (innerRange.end !== null && innerRange.end <= outerRange.end));\n}\nfunction rangeContainsMarker(range, date) {\n    return (range.start === null || date >= range.start) &&\n        (range.end === null || date < range.end);\n}\n// If the given date is not within the given range, move it inside.\n// (If it's past the end, make it one millisecond before the end).\nfunction constrainMarkerToRange(date, range) {\n    if (range.start != null && date < range.start) {\n        return range.start;\n    }\n    if (range.end != null && date >= range.end) {\n        return new Date(range.end.valueOf() - 1);\n    }\n    return date;\n}\n\nfunction removeExact(array, exactVal) {\n    var removeCnt = 0;\n    var i = 0;\n    while (i < array.length) {\n        if (array[i] === exactVal) {\n            array.splice(i, 1);\n            removeCnt++;\n        }\n        else {\n            i++;\n        }\n    }\n    return removeCnt;\n}\nfunction isArraysEqual(a0, a1) {\n    var len = a0.length;\n    var i;\n    if (len !== a1.length) { // not array? or not same length?\n        return false;\n    }\n    for (i = 0; i < len; i++) {\n        if (a0[i] !== a1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoize(workerFunc) {\n    var args;\n    var res;\n    return function () {\n        if (!args || !isArraysEqual(args, arguments)) {\n            args = arguments;\n            res = workerFunc.apply(this, arguments);\n        }\n        return res;\n    };\n}\n/*\nalways executes the workerFunc, but if the result is equal to the previous result,\nreturn the previous result instead.\n*/\nfunction memoizeOutput(workerFunc, equalityFunc) {\n    var cachedRes = null;\n    return function () {\n        var newRes = workerFunc.apply(this, arguments);\n        if (cachedRes === null || !(cachedRes === newRes || equalityFunc(cachedRes, newRes))) {\n            cachedRes = newRes;\n        }\n        return cachedRes;\n    };\n}\n\nvar EXTENDED_SETTINGS_AND_SEVERITIES = {\n    week: 3,\n    separator: 0,\n    omitZeroMinute: 0,\n    meridiem: 0,\n    omitCommas: 0\n};\nvar STANDARD_DATE_PROP_SEVERITIES = {\n    timeZoneName: 7,\n    era: 6,\n    year: 5,\n    month: 4,\n    day: 2,\n    weekday: 2,\n    hour: 1,\n    minute: 1,\n    second: 1\n};\nvar MERIDIEM_RE = /\\s*([ap])\\.?m\\.?/i; // eats up leading spaces too\nvar COMMA_RE = /,/g; // we need re for globalness\nvar MULTI_SPACE_RE = /\\s+/g;\nvar LTR_RE = /\\u200e/g; // control character\nvar UTC_RE = /UTC|GMT/;\nvar NativeFormatter = /** @class */ (function () {\n    function NativeFormatter(formatSettings) {\n        var standardDateProps = {};\n        var extendedSettings = {};\n        var severity = 0;\n        for (var name_1 in formatSettings) {\n            if (name_1 in EXTENDED_SETTINGS_AND_SEVERITIES) {\n                extendedSettings[name_1] = formatSettings[name_1];\n                severity = Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1], severity);\n            }\n            else {\n                standardDateProps[name_1] = formatSettings[name_1];\n                if (name_1 in STANDARD_DATE_PROP_SEVERITIES) {\n                    severity = Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1], severity);\n                }\n            }\n        }\n        this.standardDateProps = standardDateProps;\n        this.extendedSettings = extendedSettings;\n        this.severity = severity;\n        this.buildFormattingFunc = memoize(buildFormattingFunc);\n    }\n    NativeFormatter.prototype.format = function (date, context) {\n        return this.buildFormattingFunc(this.standardDateProps, this.extendedSettings, context)(date);\n    };\n    NativeFormatter.prototype.formatRange = function (start, end, context) {\n        var _a = this, standardDateProps = _a.standardDateProps, extendedSettings = _a.extendedSettings;\n        var diffSeverity = computeMarkerDiffSeverity(start.marker, end.marker, context.calendarSystem);\n        if (!diffSeverity) {\n            return this.format(start, context);\n        }\n        var biggestUnitForPartial = diffSeverity;\n        if (biggestUnitForPartial > 1 && // the two dates are different in a way that's larger scale than time\n            (standardDateProps.year === 'numeric' || standardDateProps.year === '2-digit') &&\n            (standardDateProps.month === 'numeric' || standardDateProps.month === '2-digit') &&\n            (standardDateProps.day === 'numeric' || standardDateProps.day === '2-digit')) {\n            biggestUnitForPartial = 1; // make it look like the dates are only different in terms of time\n        }\n        var full0 = this.format(start, context);\n        var full1 = this.format(end, context);\n        if (full0 === full1) {\n            return full0;\n        }\n        var partialDateProps = computePartialFormattingOptions(standardDateProps, biggestUnitForPartial);\n        var partialFormattingFunc = buildFormattingFunc(partialDateProps, extendedSettings, context);\n        var partial0 = partialFormattingFunc(start);\n        var partial1 = partialFormattingFunc(end);\n        var insertion = findCommonInsertion(full0, partial0, full1, partial1);\n        var separator = extendedSettings.separator || '';\n        if (insertion) {\n            return insertion.before + partial0 + separator + partial1 + insertion.after;\n        }\n        return full0 + separator + full1;\n    };\n    NativeFormatter.prototype.getLargestUnit = function () {\n        switch (this.severity) {\n            case 7:\n            case 6:\n            case 5:\n                return 'year';\n            case 4:\n                return 'month';\n            case 3:\n                return 'week';\n            default:\n                return 'day';\n        }\n    };\n    return NativeFormatter;\n}());\nfunction buildFormattingFunc(standardDateProps, extendedSettings, context) {\n    var standardDatePropCnt = Object.keys(standardDateProps).length;\n    if (standardDatePropCnt === 1 && standardDateProps.timeZoneName === 'short') {\n        return function (date) {\n            return formatTimeZoneOffset(date.timeZoneOffset);\n        };\n    }\n    if (standardDatePropCnt === 0 && extendedSettings.week) {\n        return function (date) {\n            return formatWeekNumber(context.computeWeekNumber(date.marker), context.weekLabel, context.locale, extendedSettings.week);\n        };\n    }\n    return buildNativeFormattingFunc(standardDateProps, extendedSettings, context);\n}\nfunction buildNativeFormattingFunc(standardDateProps, extendedSettings, context) {\n    standardDateProps = __assign({}, standardDateProps); // copy\n    extendedSettings = __assign({}, extendedSettings); // copy\n    sanitizeSettings(standardDateProps, extendedSettings);\n    standardDateProps.timeZone = 'UTC'; // we leverage the only guaranteed timeZone for our UTC markers\n    var normalFormat = new Intl.DateTimeFormat(context.locale.codes, standardDateProps);\n    var zeroFormat; // needed?\n    if (extendedSettings.omitZeroMinute) {\n        var zeroProps = __assign({}, standardDateProps);\n        delete zeroProps.minute; // seconds and ms were already considered in sanitizeSettings\n        zeroFormat = new Intl.DateTimeFormat(context.locale.codes, zeroProps);\n    }\n    return function (date) {\n        var marker = date.marker;\n        var format;\n        if (zeroFormat && !marker.getUTCMinutes()) {\n            format = zeroFormat;\n        }\n        else {\n            format = normalFormat;\n        }\n        var s = format.format(marker);\n        return postProcess(s, date, standardDateProps, extendedSettings, context);\n    };\n}\nfunction sanitizeSettings(standardDateProps, extendedSettings) {\n    // deal with a browser inconsistency where formatting the timezone\n    // requires that the hour/minute be present.\n    if (standardDateProps.timeZoneName) {\n        if (!standardDateProps.hour) {\n            standardDateProps.hour = '2-digit';\n        }\n        if (!standardDateProps.minute) {\n            standardDateProps.minute = '2-digit';\n        }\n    }\n    // only support short timezone names\n    if (standardDateProps.timeZoneName === 'long') {\n        standardDateProps.timeZoneName = 'short';\n    }\n    // if requesting to display seconds, MUST display minutes\n    if (extendedSettings.omitZeroMinute && (standardDateProps.second || standardDateProps.millisecond)) {\n        delete extendedSettings.omitZeroMinute;\n    }\n}\nfunction postProcess(s, date, standardDateProps, extendedSettings, context) {\n    s = s.replace(LTR_RE, ''); // remove left-to-right control chars. do first. good for other regexes\n    if (standardDateProps.timeZoneName === 'short') {\n        s = injectTzoStr(s, (context.timeZone === 'UTC' || date.timeZoneOffset == null) ?\n            'UTC' : // important to normalize for IE, which does \"GMT\"\n            formatTimeZoneOffset(date.timeZoneOffset));\n    }\n    if (extendedSettings.omitCommas) {\n        s = s.replace(COMMA_RE, '').trim();\n    }\n    if (extendedSettings.omitZeroMinute) {\n        s = s.replace(':00', ''); // zeroFormat doesn't always achieve this\n    }\n    // ^ do anything that might create adjacent spaces before this point,\n    // because MERIDIEM_RE likes to eat up loading spaces\n    if (extendedSettings.meridiem === false) {\n        s = s.replace(MERIDIEM_RE, '').trim();\n    }\n    else if (extendedSettings.meridiem === 'narrow') { // a/p\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase();\n        });\n    }\n    else if (extendedSettings.meridiem === 'short') { // am/pm\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase() + 'm';\n        });\n    }\n    else if (extendedSettings.meridiem === 'lowercase') { // other meridiem transformers already converted to lowercase\n        s = s.replace(MERIDIEM_RE, function (m0) {\n            return m0.toLocaleLowerCase();\n        });\n    }\n    s = s.replace(MULTI_SPACE_RE, ' ');\n    s = s.trim();\n    return s;\n}\nfunction injectTzoStr(s, tzoStr) {\n    var replaced = false;\n    s = s.replace(UTC_RE, function () {\n        replaced = true;\n        return tzoStr;\n    });\n    // IE11 doesn't include UTC/GMT in the original string, so append to end\n    if (!replaced) {\n        s += ' ' + tzoStr;\n    }\n    return s;\n}\nfunction formatWeekNumber(num, weekLabel, locale, display) {\n    var parts = [];\n    if (display === 'narrow') {\n        parts.push(weekLabel);\n    }\n    else if (display === 'short') {\n        parts.push(weekLabel, ' ');\n    }\n    // otherwise, considered 'numeric'\n    parts.push(locale.simpleNumberFormat.format(num));\n    if (locale.options.isRtl) { // TODO: use control characters instead?\n        parts.reverse();\n    }\n    return parts.join('');\n}\n// Range Formatting Utils\n// 0 = exactly the same\n// 1 = different by time\n// and bigger\nfunction computeMarkerDiffSeverity(d0, d1, ca) {\n    if (ca.getMarkerYear(d0) !== ca.getMarkerYear(d1)) {\n        return 5;\n    }\n    if (ca.getMarkerMonth(d0) !== ca.getMarkerMonth(d1)) {\n        return 4;\n    }\n    if (ca.getMarkerDay(d0) !== ca.getMarkerDay(d1)) {\n        return 2;\n    }\n    if (timeAsMs(d0) !== timeAsMs(d1)) {\n        return 1;\n    }\n    return 0;\n}\nfunction computePartialFormattingOptions(options, biggestUnit) {\n    var partialOptions = {};\n    for (var name_2 in options) {\n        if (!(name_2 in STANDARD_DATE_PROP_SEVERITIES) || // not a date part prop (like timeZone)\n            STANDARD_DATE_PROP_SEVERITIES[name_2] <= biggestUnit) {\n            partialOptions[name_2] = options[name_2];\n        }\n    }\n    return partialOptions;\n}\nfunction findCommonInsertion(full0, partial0, full1, partial1) {\n    var i0 = 0;\n    while (i0 < full0.length) {\n        var found0 = full0.indexOf(partial0, i0);\n        if (found0 === -1) {\n            break;\n        }\n        var before0 = full0.substr(0, found0);\n        i0 = found0 + partial0.length;\n        var after0 = full0.substr(i0);\n        var i1 = 0;\n        while (i1 < full1.length) {\n            var found1 = full1.indexOf(partial1, i1);\n            if (found1 === -1) {\n                break;\n            }\n            var before1 = full1.substr(0, found1);\n            i1 = found1 + partial1.length;\n            var after1 = full1.substr(i1);\n            if (before0 === before1 && after0 === after1) {\n                return {\n                    before: before0,\n                    after: after0\n                };\n            }\n        }\n    }\n    return null;\n}\n\n/*\nTODO: fix the terminology of \"formatter\" vs \"formatting func\"\n*/\n/*\nAt the time of instantiation, this object does not know which cmd-formatting system it will use.\nIt receives this at the time of formatting, as a setting.\n*/\nvar CmdFormatter = /** @class */ (function () {\n    function CmdFormatter(cmdStr, separator) {\n        this.cmdStr = cmdStr;\n        this.separator = separator;\n    }\n    CmdFormatter.prototype.format = function (date, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(date, null, context, this.separator));\n    };\n    CmdFormatter.prototype.formatRange = function (start, end, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(start, end, context, this.separator));\n    };\n    return CmdFormatter;\n}());\n\nvar FuncFormatter = /** @class */ (function () {\n    function FuncFormatter(func) {\n        this.func = func;\n    }\n    FuncFormatter.prototype.format = function (date, context) {\n        return this.func(createVerboseFormattingArg(date, null, context));\n    };\n    FuncFormatter.prototype.formatRange = function (start, end, context) {\n        return this.func(createVerboseFormattingArg(start, end, context));\n    };\n    return FuncFormatter;\n}());\n\n// Formatter Object Creation\nfunction createFormatter(input, defaultSeparator) {\n    if (typeof input === 'object' && input) { // non-null object\n        if (typeof defaultSeparator === 'string') {\n            input = __assign({ separator: defaultSeparator }, input);\n        }\n        return new NativeFormatter(input);\n    }\n    else if (typeof input === 'string') {\n        return new CmdFormatter(input, defaultSeparator);\n    }\n    else if (typeof input === 'function') {\n        return new FuncFormatter(input);\n    }\n}\n// String Utils\n// timeZoneOffset is in minutes\nfunction buildIsoString(marker, timeZoneOffset, stripZeroTime) {\n    if (stripZeroTime === void 0) { stripZeroTime = false; }\n    var s = marker.toISOString();\n    s = s.replace('.000', '');\n    if (stripZeroTime) {\n        s = s.replace('T00:00:00Z', '');\n    }\n    if (s.length > 10) { // time part wasn't stripped, can add timezone info\n        if (timeZoneOffset == null) {\n            s = s.replace('Z', '');\n        }\n        else if (timeZoneOffset !== 0) {\n            s = s.replace('Z', formatTimeZoneOffset(timeZoneOffset, true));\n        }\n        // otherwise, its UTC-0 and we want to keep the Z\n    }\n    return s;\n}\nfunction formatIsoTimeString(marker) {\n    return padStart(marker.getUTCHours(), 2) + ':' +\n        padStart(marker.getUTCMinutes(), 2) + ':' +\n        padStart(marker.getUTCSeconds(), 2);\n}\nfunction formatTimeZoneOffset(minutes, doIso) {\n    if (doIso === void 0) { doIso = false; }\n    var sign = minutes < 0 ? '-' : '+';\n    var abs = Math.abs(minutes);\n    var hours = Math.floor(abs / 60);\n    var mins = Math.round(abs % 60);\n    if (doIso) {\n        return sign + padStart(hours, 2) + ':' + padStart(mins, 2);\n    }\n    else {\n        return 'GMT' + sign + hours + (mins ? ':' + padStart(mins, 2) : '');\n    }\n}\n// Arg Utils\nfunction createVerboseFormattingArg(start, end, context, separator) {\n    var startInfo = expandZonedMarker(start, context.calendarSystem);\n    var endInfo = end ? expandZonedMarker(end, context.calendarSystem) : null;\n    return {\n        date: startInfo,\n        start: startInfo,\n        end: endInfo,\n        timeZone: context.timeZone,\n        localeCodes: context.locale.codes,\n        separator: separator\n    };\n}\nfunction expandZonedMarker(dateInfo, calendarSystem) {\n    var a = calendarSystem.markerToArray(dateInfo.marker);\n    return {\n        marker: dateInfo.marker,\n        timeZoneOffset: dateInfo.timeZoneOffset,\n        array: a,\n        year: a[0],\n        month: a[1],\n        day: a[2],\n        hour: a[3],\n        minute: a[4],\n        second: a[5],\n        millisecond: a[6]\n    };\n}\n\nvar EventSourceApi = /** @class */ (function () {\n    function EventSourceApi(calendar, internalEventSource) {\n        this.calendar = calendar;\n        this.internalEventSource = internalEventSource;\n    }\n    EventSourceApi.prototype.remove = function () {\n        this.calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: this.internalEventSource.sourceId\n        });\n    };\n    EventSourceApi.prototype.refetch = function () {\n        this.calendar.dispatch({\n            type: 'FETCH_EVENT_SOURCES',\n            sourceIds: [this.internalEventSource.sourceId]\n        });\n    };\n    Object.defineProperty(EventSourceApi.prototype, \"id\", {\n        get: function () {\n            return this.internalEventSource.publicId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventSourceApi.prototype, \"url\", {\n        // only relevant to json-feed event sources\n        get: function () {\n            return this.internalEventSource.meta.url;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EventSourceApi;\n}());\n\nvar EventApi = /** @class */ (function () {\n    function EventApi(calendar, def, instance) {\n        this._calendar = calendar;\n        this._def = def;\n        this._instance = instance || null;\n    }\n    /*\n    TODO: make event struct more responsible for this\n    */\n    EventApi.prototype.setProp = function (name, val) {\n        var _a, _b;\n        if (name in DATE_PROPS) ;\n        else if (name in NON_DATE_PROPS) {\n            if (typeof NON_DATE_PROPS[name] === 'function') {\n                val = NON_DATE_PROPS[name](val);\n            }\n            this.mutate({\n                standardProps: (_a = {}, _a[name] = val, _a)\n            });\n        }\n        else if (name in UNSCOPED_EVENT_UI_PROPS) {\n            var ui = void 0;\n            if (typeof UNSCOPED_EVENT_UI_PROPS[name] === 'function') {\n                val = UNSCOPED_EVENT_UI_PROPS[name](val);\n            }\n            if (name === 'color') {\n                ui = { backgroundColor: val, borderColor: val };\n            }\n            else if (name === 'editable') {\n                ui = { startEditable: val, durationEditable: val };\n            }\n            else {\n                ui = (_b = {}, _b[name] = val, _b);\n            }\n            this.mutate({\n                standardProps: { ui: ui }\n            });\n        }\n    };\n    EventApi.prototype.setExtendedProp = function (name, val) {\n        var _a;\n        this.mutate({\n            extendedProps: (_a = {}, _a[name] = val, _a)\n        });\n    };\n    EventApi.prototype.setStart = function (startInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var start = dateEnv.createMarker(startInput);\n        if (start && this._instance) { // TODO: warning if parsed bad\n            var instanceRange = this._instance.range;\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity); // what if parsed bad!?\n            if (options.maintainDuration) {\n                this.mutate({ datesDelta: startDelta });\n            }\n            else {\n                this.mutate({ startDelta: startDelta });\n            }\n        }\n    };\n    EventApi.prototype.setEnd = function (endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var end;\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) {\n                return; // TODO: warning if parsed bad\n            }\n        }\n        if (this._instance) {\n            if (end) {\n                var endDelta = diffDates(this._instance.range.end, end, dateEnv, options.granularity);\n                this.mutate({ endDelta: endDelta });\n            }\n            else {\n                this.mutate({ standardProps: { hasEnd: false } });\n            }\n        }\n    };\n    EventApi.prototype.setDates = function (startInput, endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var standardProps = { allDay: options.allDay };\n        var start = dateEnv.createMarker(startInput);\n        var end;\n        if (!start) {\n            return; // TODO: warning if parsed bad\n        }\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) { // TODO: warning if parsed bad\n                return;\n            }\n        }\n        if (this._instance) {\n            var instanceRange = this._instance.range;\n            // when computing the diff for an event being converted to all-day,\n            // compute diff off of the all-day values the way event-mutation does.\n            if (options.allDay === true) {\n                instanceRange = computeAlignedDayRange(instanceRange);\n            }\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity);\n            if (end) {\n                var endDelta = diffDates(instanceRange.end, end, dateEnv, options.granularity);\n                if (durationsEqual(startDelta, endDelta)) {\n                    this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n                }\n                else {\n                    this.mutate({ startDelta: startDelta, endDelta: endDelta, standardProps: standardProps });\n                }\n            }\n            else { // means \"clear the end\"\n                standardProps.hasEnd = false;\n                this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n            }\n        }\n    };\n    EventApi.prototype.moveStart = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ startDelta: delta });\n        }\n    };\n    EventApi.prototype.moveEnd = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ endDelta: delta });\n        }\n    };\n    EventApi.prototype.moveDates = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ datesDelta: delta });\n        }\n    };\n    EventApi.prototype.setAllDay = function (allDay, options) {\n        if (options === void 0) { options = {}; }\n        var standardProps = { allDay: allDay };\n        var maintainDuration = options.maintainDuration;\n        if (maintainDuration == null) {\n            maintainDuration = this._calendar.opt('allDayMaintainDuration');\n        }\n        if (this._def.allDay !== allDay) {\n            standardProps.hasEnd = maintainDuration;\n        }\n        this.mutate({ standardProps: standardProps });\n    };\n    EventApi.prototype.formatRange = function (formatInput) {\n        var dateEnv = this._calendar.dateEnv;\n        var instance = this._instance;\n        var formatter = createFormatter(formatInput, this._calendar.opt('defaultRangeSeparator'));\n        if (this._def.hasEnd) {\n            return dateEnv.formatRange(instance.range.start, instance.range.end, formatter, {\n                forcedStartTzo: instance.forcedStartTzo,\n                forcedEndTzo: instance.forcedEndTzo\n            });\n        }\n        else {\n            return dateEnv.format(instance.range.start, formatter, {\n                forcedTzo: instance.forcedStartTzo\n            });\n        }\n    };\n    EventApi.prototype.mutate = function (mutation) {\n        var def = this._def;\n        var instance = this._instance;\n        if (instance) {\n            this._calendar.dispatch({\n                type: 'MUTATE_EVENTS',\n                instanceId: instance.instanceId,\n                mutation: mutation,\n                fromApi: true\n            });\n            var eventStore = this._calendar.state.eventStore;\n            this._def = eventStore.defs[def.defId];\n            this._instance = eventStore.instances[instance.instanceId];\n        }\n    };\n    EventApi.prototype.remove = function () {\n        this._calendar.dispatch({\n            type: 'REMOVE_EVENT_DEF',\n            defId: this._def.defId\n        });\n    };\n    Object.defineProperty(EventApi.prototype, \"source\", {\n        get: function () {\n            var sourceId = this._def.sourceId;\n            if (sourceId) {\n                return new EventSourceApi(this._calendar, this._calendar.state.eventSources[sourceId]);\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"start\", {\n        get: function () {\n            return this._instance ?\n                this._calendar.dateEnv.toDate(this._instance.range.start) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"end\", {\n        get: function () {\n            return (this._instance && this._def.hasEnd) ?\n                this._calendar.dateEnv.toDate(this._instance.range.end) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"id\", {\n        // computable props that all access the def\n        // TODO: find a TypeScript-compatible way to do this at scale\n        get: function () { return this._def.publicId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"groupId\", {\n        get: function () { return this._def.groupId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allDay\", {\n        get: function () { return this._def.allDay; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"title\", {\n        get: function () { return this._def.title; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"url\", {\n        get: function () { return this._def.url; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"rendering\", {\n        get: function () { return this._def.rendering; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"startEditable\", {\n        get: function () { return this._def.ui.startEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"durationEditable\", {\n        get: function () { return this._def.ui.durationEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"constraint\", {\n        get: function () { return this._def.ui.constraints[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"overlap\", {\n        get: function () { return this._def.ui.overlap; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allow\", {\n        get: function () { return this._def.ui.allows[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"backgroundColor\", {\n        get: function () { return this._def.ui.backgroundColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"borderColor\", {\n        get: function () { return this._def.ui.borderColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"textColor\", {\n        get: function () { return this._def.ui.textColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"classNames\", {\n        // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n        get: function () { return this._def.ui.classNames; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"extendedProps\", {\n        get: function () { return this._def.extendedProps; },\n        enumerable: true,\n        configurable: true\n    });\n    return EventApi;\n}());\n\n/*\nSpecifying nextDayThreshold signals that all-day ranges should be sliced.\n*/\nfunction sliceEventStore(eventStore, eventUiBases, framingRange, nextDayThreshold) {\n    var inverseBgByGroupId = {};\n    var inverseBgByDefId = {};\n    var defByGroupId = {};\n    var bgRanges = [];\n    var fgRanges = [];\n    var eventUis = compileEventUis(eventStore.defs, eventUiBases);\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        if (def.rendering === 'inverse-background') {\n            if (def.groupId) {\n                inverseBgByGroupId[def.groupId] = [];\n                if (!defByGroupId[def.groupId]) {\n                    defByGroupId[def.groupId] = def;\n                }\n            }\n            else {\n                inverseBgByDefId[defId] = [];\n            }\n        }\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = eventStore.defs[instance.defId];\n        var ui = eventUis[def.defId];\n        var origRange = instance.range;\n        var normalRange = (!def.allDay && nextDayThreshold) ?\n            computeVisibleDayRange(origRange, nextDayThreshold) :\n            origRange;\n        var slicedRange = intersectRanges(normalRange, framingRange);\n        if (slicedRange) {\n            if (def.rendering === 'inverse-background') {\n                if (def.groupId) {\n                    inverseBgByGroupId[def.groupId].push(slicedRange);\n                }\n                else {\n                    inverseBgByDefId[instance.defId].push(slicedRange);\n                }\n            }\n            else {\n                (def.rendering === 'background' ? bgRanges : fgRanges).push({\n                    def: def,\n                    ui: ui,\n                    instance: instance,\n                    range: slicedRange,\n                    isStart: normalRange.start && normalRange.start.valueOf() === slicedRange.start.valueOf(),\n                    isEnd: normalRange.end && normalRange.end.valueOf() === slicedRange.end.valueOf()\n                });\n            }\n        }\n    }\n    for (var groupId in inverseBgByGroupId) { // BY GROUP\n        var ranges = inverseBgByGroupId[groupId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _i = 0, invertedRanges_1 = invertedRanges; _i < invertedRanges_1.length; _i++) {\n            var invertedRange = invertedRanges_1[_i];\n            var def = defByGroupId[groupId];\n            var ui = eventUis[def.defId];\n            bgRanges.push({\n                def: def,\n                ui: ui,\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    for (var defId in inverseBgByDefId) {\n        var ranges = inverseBgByDefId[defId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _a = 0, invertedRanges_2 = invertedRanges; _a < invertedRanges_2.length; _a++) {\n            var invertedRange = invertedRanges_2[_a];\n            bgRanges.push({\n                def: eventStore.defs[defId],\n                ui: eventUis[defId],\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    return { bg: bgRanges, fg: fgRanges };\n}\nfunction hasBgRendering(def) {\n    return def.rendering === 'background' || def.rendering === 'inverse-background';\n}\nfunction filterSegsViaEls(context, segs, isMirror) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventRender')) {\n        segs = segs.filter(function (seg) {\n            var custom = calendar.publiclyTrigger('eventRender', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirror,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    // TODO: include seg.range once all components consistently generate it\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n            if (custom === false) { // means don't render at all\n                return false;\n            }\n            else if (custom && custom !== true) {\n                seg.el = custom;\n            }\n            return true;\n        });\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        setElSeg(seg.el, seg);\n    }\n    return segs;\n}\nfunction setElSeg(el, seg) {\n    el.fcSeg = seg;\n}\nfunction getElSeg(el) {\n    return el.fcSeg || null;\n}\n// event ui computation\nfunction compileEventUis(eventDefs, eventUiBases) {\n    return mapHash(eventDefs, function (eventDef) {\n        return compileEventUi(eventDef, eventUiBases);\n    });\n}\nfunction compileEventUi(eventDef, eventUiBases) {\n    var uis = [];\n    if (eventUiBases['']) {\n        uis.push(eventUiBases['']);\n    }\n    if (eventUiBases[eventDef.defId]) {\n        uis.push(eventUiBases[eventDef.defId]);\n    }\n    uis.push(eventDef.ui);\n    return combineEventUis(uis);\n}\n// triggers\nfunction triggerRenderedSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventPositioned')) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            calendar.publiclyTriggerAfterSizing('eventPositioned', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n    if (!calendar.state.loadingLevel) { // avoid initial empty state while pending\n        calendar.afterSizingTriggers._eventsPositioned = [null]; // fire once\n    }\n}\nfunction triggerWillRemoveSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n        var seg = segs_3[_i];\n        calendar.trigger('eventElRemove', seg.el);\n    }\n    if (calendar.hasPublicHandlers('eventDestroy')) {\n        for (var _a = 0, segs_4 = segs; _a < segs_4.length; _a++) {\n            var seg = segs_4[_a];\n            calendar.publiclyTrigger('eventDestroy', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n}\n// is-interactable\nfunction computeEventDraggable(context, eventDef, eventUi) {\n    var calendar = context.calendar, view = context.view;\n    var transformers = calendar.pluginSystem.hooks.isDraggableTransformers;\n    var val = eventUi.startEditable;\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n        var transformer = transformers_1[_i];\n        val = transformer(val, eventDef, eventUi, view);\n    }\n    return val;\n}\nfunction computeEventStartResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable && context.options.eventResizableFromStart;\n}\nfunction computeEventEndResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable;\n}\n\n// applies the mutation to ALL defs/instances within the event store\nfunction applyMutationToEventStore(eventStore, eventConfigBase, mutation, calendar) {\n    var eventConfigs = compileEventUis(eventStore.defs, eventConfigBase);\n    var dest = createEmptyEventStore();\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        dest.defs[defId] = applyMutationToEventDef(def, eventConfigs[defId], mutation, calendar.pluginSystem.hooks.eventDefMutationAppliers, calendar);\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = dest.defs[instance.defId]; // important to grab the newly modified def\n        dest.instances[instanceId] = applyMutationToEventInstance(instance, def, eventConfigs[instance.defId], mutation, calendar);\n    }\n    return dest;\n}\nfunction applyMutationToEventDef(eventDef, eventConfig, mutation, appliers, calendar) {\n    var standardProps = mutation.standardProps || {};\n    // if hasEnd has not been specified, guess a good value based on deltas.\n    // if duration will change, there's no way the default duration will persist,\n    // and thus, we need to mark the event as having a real end\n    if (standardProps.hasEnd == null &&\n        eventConfig.durationEditable &&\n        (mutation.startDelta || mutation.endDelta)) {\n        standardProps.hasEnd = true; // TODO: is this mutation okay?\n    }\n    var copy = __assign({}, eventDef, standardProps, { ui: __assign({}, eventDef.ui, standardProps.ui) });\n    if (mutation.extendedProps) {\n        copy.extendedProps = __assign({}, copy.extendedProps, mutation.extendedProps);\n    }\n    for (var _i = 0, appliers_1 = appliers; _i < appliers_1.length; _i++) {\n        var applier = appliers_1[_i];\n        applier(copy, mutation, calendar);\n    }\n    if (!copy.hasEnd && calendar.opt('forceEventDuration')) {\n        copy.hasEnd = true;\n    }\n    return copy;\n}\nfunction applyMutationToEventInstance(eventInstance, eventDef, // must first be modified by applyMutationToEventDef\neventConfig, mutation, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var forceAllDay = mutation.standardProps && mutation.standardProps.allDay === true;\n    var clearEnd = mutation.standardProps && mutation.standardProps.hasEnd === false;\n    var copy = __assign({}, eventInstance);\n    if (forceAllDay) {\n        copy.range = computeAlignedDayRange(copy.range);\n    }\n    if (mutation.datesDelta && eventConfig.startEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.datesDelta),\n            end: dateEnv.add(copy.range.end, mutation.datesDelta)\n        };\n    }\n    if (mutation.startDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.startDelta),\n            end: copy.range.end\n        };\n    }\n    if (mutation.endDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: copy.range.start,\n            end: dateEnv.add(copy.range.end, mutation.endDelta)\n        };\n    }\n    if (clearEnd) {\n        copy.range = {\n            start: copy.range.start,\n            end: calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start)\n        };\n    }\n    // in case event was all-day but the supplied deltas were not\n    // better util for this?\n    if (eventDef.allDay) {\n        copy.range = {\n            start: startOfDay(copy.range.start),\n            end: startOfDay(copy.range.end)\n        };\n    }\n    // handle invalid durations\n    if (copy.range.end < copy.range.start) {\n        copy.range.end = calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start);\n    }\n    return copy;\n}\n\nfunction reduceEventStore (eventStore, action, eventSources, dateProfile, calendar) {\n    switch (action.type) {\n        case 'RECEIVE_EVENTS': // raw\n            return receiveRawEvents(eventStore, eventSources[action.sourceId], action.fetchId, action.fetchRange, action.rawEvents, calendar);\n        case 'ADD_EVENTS': // already parsed, but not expanded\n            return addEvent(eventStore, action.eventStore, // new ones\n            dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'MERGE_EVENTS': // already parsed and expanded\n            return mergeEventStores(eventStore, action.eventStore);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return expandRecurring(eventStore, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventStore;\n            }\n        case 'CHANGE_TIMEZONE':\n            return rezoneDates(eventStore, action.oldDateEnv, calendar.dateEnv);\n        case 'MUTATE_EVENTS':\n            return applyMutationToRelated(eventStore, action.instanceId, action.mutation, action.fromApi, calendar);\n        case 'REMOVE_EVENT_INSTANCES':\n            return excludeInstances(eventStore, action.instances);\n        case 'REMOVE_EVENT_DEF':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return eventDef.defId !== action.defId;\n            });\n        case 'REMOVE_EVENT_SOURCE':\n            return excludeEventsBySourceId(eventStore, action.sourceId);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return !eventDef.sourceId; // only keep events with no source id\n            });\n        case 'REMOVE_ALL_EVENTS':\n            return createEmptyEventStore();\n        case 'RESET_EVENTS':\n            return {\n                defs: eventStore.defs,\n                instances: eventStore.instances\n            };\n        default:\n            return eventStore;\n    }\n}\nfunction receiveRawEvents(eventStore, eventSource, fetchId, fetchRange, rawEvents, calendar) {\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId // TODO: wish this logic was always in event-sources\n    ) {\n        var subset = parseEvents(transformRawEvents(rawEvents, eventSource, calendar), eventSource.sourceId, calendar);\n        if (fetchRange) {\n            subset = expandRecurring(subset, fetchRange, calendar);\n        }\n        return mergeEventStores(excludeEventsBySourceId(eventStore, eventSource.sourceId), subset);\n    }\n    return eventStore;\n}\nfunction addEvent(eventStore, subset, expandRange, calendar) {\n    if (expandRange) {\n        subset = expandRecurring(subset, expandRange, calendar);\n    }\n    return mergeEventStores(eventStore, subset);\n}\nfunction rezoneDates(eventStore, oldDateEnv, newDateEnv) {\n    var defs = eventStore.defs;\n    var instances = mapHash(eventStore.instances, function (instance) {\n        var def = defs[instance.defId];\n        if (def.allDay || def.recurringDef) {\n            return instance; // isn't dependent on timezone\n        }\n        else {\n            return __assign({}, instance, { range: {\n                    start: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start, instance.forcedStartTzo)),\n                    end: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end, instance.forcedEndTzo))\n                }, forcedStartTzo: newDateEnv.canComputeOffset ? null : instance.forcedStartTzo, forcedEndTzo: newDateEnv.canComputeOffset ? null : instance.forcedEndTzo });\n        }\n    });\n    return { defs: defs, instances: instances };\n}\nfunction applyMutationToRelated(eventStore, instanceId, mutation, fromApi, calendar) {\n    var relevant = getRelevantEvents(eventStore, instanceId);\n    var eventConfigBase = fromApi ?\n        { '': {\n                startEditable: true,\n                durationEditable: true,\n                constraints: [],\n                overlap: null,\n                allows: [],\n                backgroundColor: '',\n                borderColor: '',\n                textColor: '',\n                classNames: []\n            } } :\n        calendar.eventUiBases;\n    relevant = applyMutationToEventStore(relevant, eventConfigBase, mutation, calendar);\n    return mergeEventStores(eventStore, relevant);\n}\nfunction excludeEventsBySourceId(eventStore, sourceId) {\n    return filterEventStoreDefs(eventStore, function (eventDef) {\n        return eventDef.sourceId !== sourceId;\n    });\n}\n// QUESTION: why not just return instances? do a general object-property-exclusion util\nfunction excludeInstances(eventStore, removals) {\n    return {\n        defs: eventStore.defs,\n        instances: filterHash(eventStore.instances, function (instance) {\n            return !removals[instance.instanceId];\n        })\n    };\n}\n\n// high-level segmenting-aware tester functions\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionValid(interaction, calendar) {\n    return isNewPropsValid({ eventDrag: interaction }, calendar); // HACK: the eventDrag props is used for ALL interactions\n}\nfunction isDateSelectionValid(dateSelection, calendar) {\n    return isNewPropsValid({ dateSelection: dateSelection }, calendar);\n}\nfunction isNewPropsValid(newProps, calendar) {\n    var view = calendar.view;\n    var props = __assign({ businessHours: view ? view.props.businessHours : createEmptyEventStore(), dateSelection: '', eventStore: calendar.state.eventStore, eventUiBases: calendar.eventUiBases, eventSelection: '', eventDrag: null, eventResize: null }, newProps);\n    return (calendar.pluginSystem.hooks.isPropsValid || isPropsValid)(props, calendar);\n}\nfunction isPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    if (dateSpanMeta === void 0) { dateSpanMeta = {}; }\n    if (state.eventDrag && !isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    if (state.dateSelection && !isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    return true;\n}\n// Moving Event Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var interaction = state.eventDrag; // HACK: the eventDrag props is used for ALL interactions\n    var subjectEventStore = interaction.mutatedEvents;\n    var subjectDefs = subjectEventStore.defs;\n    var subjectInstances = subjectEventStore.instances;\n    var subjectConfigs = compileEventUis(subjectDefs, interaction.isEvent ?\n        state.eventUiBases :\n        { '': calendar.selectionConfig } // if not a real event, validate as a selection\n    );\n    if (filterConfig) {\n        subjectConfigs = mapHash(subjectConfigs, filterConfig);\n    }\n    var otherEventStore = excludeInstances(state.eventStore, interaction.affectedEvents.instances); // exclude the subject events. TODO: exclude defs too?\n    var otherDefs = otherEventStore.defs;\n    var otherInstances = otherEventStore.instances;\n    var otherConfigs = compileEventUis(otherDefs, state.eventUiBases);\n    for (var subjectInstanceId in subjectInstances) {\n        var subjectInstance = subjectInstances[subjectInstanceId];\n        var subjectRange = subjectInstance.range;\n        var subjectConfig = subjectConfigs[subjectInstance.defId];\n        var subjectDef = subjectDefs[subjectInstance.defId];\n        // constraint\n        if (!allConstraintsPass(subjectConfig.constraints, subjectRange, otherEventStore, state.businessHours, calendar)) {\n            return false;\n        }\n        // overlap\n        var overlapFunc = calendar.opt('eventOverlap');\n        if (typeof overlapFunc !== 'function') {\n            overlapFunc = null;\n        }\n        for (var otherInstanceId in otherInstances) {\n            var otherInstance = otherInstances[otherInstanceId];\n            // intersect! evaluate\n            if (rangesIntersect(subjectRange, otherInstance.range)) {\n                var otherOverlap = otherConfigs[otherInstance.defId].overlap;\n                // consider the other event's overlap. only do this if the subject event is a \"real\" event\n                if (otherOverlap === false && interaction.isEvent) {\n                    return false;\n                }\n                if (subjectConfig.overlap === false) {\n                    return false;\n                }\n                if (overlapFunc && !overlapFunc(new EventApi(calendar, otherDefs[otherInstance.defId], otherInstance), // still event\n                new EventApi(calendar, subjectDef, subjectInstance) // moving event\n                )) {\n                    return false;\n                }\n            }\n        }\n        // allow (a function)\n        var calendarEventStore = calendar.state.eventStore; // need global-to-calendar, not local to component (splittable)state\n        for (var _i = 0, _a = subjectConfig.allows; _i < _a.length; _i++) {\n            var subjectAllow = _a[_i];\n            var subjectDateSpan = __assign({}, dateSpanMeta, { range: subjectInstance.range, allDay: subjectDef.allDay });\n            var origDef = calendarEventStore.defs[subjectDef.defId];\n            var origInstance = calendarEventStore.instances[subjectInstanceId];\n            var eventApi = void 0;\n            if (origDef) { // was previously in the calendar\n                eventApi = new EventApi(calendar, origDef, origInstance);\n            }\n            else { // was an external event\n                eventApi = new EventApi(calendar, subjectDef); // no instance, because had no dates\n            }\n            if (!subjectAllow(calendar.buildDateSpanApi(subjectDateSpan), eventApi)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n// Date Selection Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var relevantEventStore = state.eventStore;\n    var relevantDefs = relevantEventStore.defs;\n    var relevantInstances = relevantEventStore.instances;\n    var selection = state.dateSelection;\n    var selectionRange = selection.range;\n    var selectionConfig = calendar.selectionConfig;\n    if (filterConfig) {\n        selectionConfig = filterConfig(selectionConfig);\n    }\n    // constraint\n    if (!allConstraintsPass(selectionConfig.constraints, selectionRange, relevantEventStore, state.businessHours, calendar)) {\n        return false;\n    }\n    // overlap\n    var overlapFunc = calendar.opt('selectOverlap');\n    if (typeof overlapFunc !== 'function') {\n        overlapFunc = null;\n    }\n    for (var relevantInstanceId in relevantInstances) {\n        var relevantInstance = relevantInstances[relevantInstanceId];\n        // intersect! evaluate\n        if (rangesIntersect(selectionRange, relevantInstance.range)) {\n            if (selectionConfig.overlap === false) {\n                return false;\n            }\n            if (overlapFunc && !overlapFunc(new EventApi(calendar, relevantDefs[relevantInstance.defId], relevantInstance))) {\n                return false;\n            }\n        }\n    }\n    // allow (a function)\n    for (var _i = 0, _a = selectionConfig.allows; _i < _a.length; _i++) {\n        var selectionAllow = _a[_i];\n        var fullDateSpan = __assign({}, dateSpanMeta, selection);\n        if (!selectionAllow(calendar.buildDateSpanApi(fullDateSpan), null)) {\n            return false;\n        }\n    }\n    return true;\n}\n// Constraint Utils\n// ------------------------------------------------------------------------------------------------------------------------\nfunction allConstraintsPass(constraints, subjectRange, otherEventStore, businessHoursUnexpanded, calendar) {\n    for (var _i = 0, constraints_1 = constraints; _i < constraints_1.length; _i++) {\n        var constraint = constraints_1[_i];\n        if (!anyRangesContainRange(constraintToRanges(constraint, subjectRange, otherEventStore, businessHoursUnexpanded, calendar), subjectRange)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction constraintToRanges(constraint, subjectRange, // for expanding a recurring constraint, or expanding business hours\notherEventStore, // for if constraint is an even group ID\nbusinessHoursUnexpanded, // for if constraint is 'businessHours'\ncalendar // for expanding businesshours\n) {\n    if (constraint === 'businessHours') {\n        return eventStoreToRanges(expandRecurring(businessHoursUnexpanded, subjectRange, calendar));\n    }\n    else if (typeof constraint === 'string') { // an group ID\n        return eventStoreToRanges(filterEventStoreDefs(otherEventStore, function (eventDef) {\n            return eventDef.groupId === constraint;\n        }));\n    }\n    else if (typeof constraint === 'object' && constraint) { // non-null object\n        return eventStoreToRanges(expandRecurring(constraint, subjectRange, calendar));\n    }\n    return []; // if it's false\n}\n// TODO: move to event-store file?\nfunction eventStoreToRanges(eventStore) {\n    var instances = eventStore.instances;\n    var ranges = [];\n    for (var instanceId in instances) {\n        ranges.push(instances[instanceId].range);\n    }\n    return ranges;\n}\n// TODO: move to geom file?\nfunction anyRangesContainRange(outerRanges, innerRange) {\n    for (var _i = 0, outerRanges_1 = outerRanges; _i < outerRanges_1.length; _i++) {\n        var outerRange = outerRanges_1[_i];\n        if (rangeContainsRange(outerRange, innerRange)) {\n            return true;\n        }\n    }\n    return false;\n}\n// Parsing\n// ------------------------------------------------------------------------------------------------------------------------\nfunction normalizeConstraint(input, calendar) {\n    if (Array.isArray(input)) {\n        return parseEvents(input, '', calendar, true); // allowOpenRange=true\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return parseEvents([input], '', calendar, true); // allowOpenRange=true\n    }\n    else if (input != null) {\n        return String(input);\n    }\n    else {\n        return null;\n    }\n}\n\nfunction htmlEscape(s) {\n    return (s + '').replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/'/g, '&#039;')\n        .replace(/\"/g, '&quot;')\n        .replace(/\\n/g, '<br />');\n}\n// Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\nfunction cssToStr(cssProps) {\n    var statements = [];\n    for (var name_1 in cssProps) {\n        var val = cssProps[name_1];\n        if (val != null && val !== '') {\n            statements.push(name_1 + ':' + val);\n        }\n    }\n    return statements.join(';');\n}\n// Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\nfunction attrsToStr(attrs) {\n    var parts = [];\n    for (var name_2 in attrs) {\n        var val = attrs[name_2];\n        if (val != null) {\n            parts.push(name_2 + '=\"' + htmlEscape(val) + '\"');\n        }\n    }\n    return parts.join(' ');\n}\nfunction parseClassName(raw) {\n    if (Array.isArray(raw)) {\n        return raw;\n    }\n    else if (typeof raw === 'string') {\n        return raw.split(/\\s+/);\n    }\n    else {\n        return [];\n    }\n}\n\nvar UNSCOPED_EVENT_UI_PROPS = {\n    editable: Boolean,\n    startEditable: Boolean,\n    durationEditable: Boolean,\n    constraint: null,\n    overlap: null,\n    allow: null,\n    className: parseClassName,\n    classNames: parseClassName,\n    color: String,\n    backgroundColor: String,\n    borderColor: String,\n    textColor: String\n};\nfunction processUnscopedUiProps(rawProps, calendar, leftovers) {\n    var props = refineProps(rawProps, UNSCOPED_EVENT_UI_PROPS, {}, leftovers);\n    var constraint = normalizeConstraint(props.constraint, calendar);\n    return {\n        startEditable: props.startEditable != null ? props.startEditable : props.editable,\n        durationEditable: props.durationEditable != null ? props.durationEditable : props.editable,\n        constraints: constraint != null ? [constraint] : [],\n        overlap: props.overlap,\n        allows: props.allow != null ? [props.allow] : [],\n        backgroundColor: props.backgroundColor || props.color,\n        borderColor: props.borderColor || props.color,\n        textColor: props.textColor,\n        classNames: props.classNames.concat(props.className)\n    };\n}\nfunction processScopedUiProps(prefix, rawScoped, calendar, leftovers) {\n    var rawUnscoped = {};\n    var wasFound = {};\n    for (var key in UNSCOPED_EVENT_UI_PROPS) {\n        var scopedKey = prefix + capitaliseFirstLetter(key);\n        rawUnscoped[key] = rawScoped[scopedKey];\n        wasFound[scopedKey] = true;\n    }\n    if (prefix === 'event') {\n        rawUnscoped.editable = rawScoped.editable; // special case. there is no 'eventEditable', just 'editable'\n    }\n    if (leftovers) {\n        for (var key in rawScoped) {\n            if (!wasFound[key]) {\n                leftovers[key] = rawScoped[key];\n            }\n        }\n    }\n    return processUnscopedUiProps(rawUnscoped, calendar);\n}\nvar EMPTY_EVENT_UI = {\n    startEditable: null,\n    durationEditable: null,\n    constraints: [],\n    overlap: null,\n    allows: [],\n    backgroundColor: '',\n    borderColor: '',\n    textColor: '',\n    classNames: []\n};\n// prevent against problems with <2 args!\nfunction combineEventUis(uis) {\n    return uis.reduce(combineTwoEventUis, EMPTY_EVENT_UI);\n}\nfunction combineTwoEventUis(item0, item1) {\n    return {\n        startEditable: item1.startEditable != null ? item1.startEditable : item0.startEditable,\n        durationEditable: item1.durationEditable != null ? item1.durationEditable : item0.durationEditable,\n        constraints: item0.constraints.concat(item1.constraints),\n        overlap: typeof item1.overlap === 'boolean' ? item1.overlap : item0.overlap,\n        allows: item0.allows.concat(item1.allows),\n        backgroundColor: item1.backgroundColor || item0.backgroundColor,\n        borderColor: item1.borderColor || item0.borderColor,\n        textColor: item1.textColor || item0.textColor,\n        classNames: item0.classNames.concat(item1.classNames)\n    };\n}\n\nvar NON_DATE_PROPS = {\n    id: String,\n    groupId: String,\n    title: String,\n    url: String,\n    rendering: String,\n    extendedProps: null\n};\nvar DATE_PROPS = {\n    start: null,\n    date: null,\n    end: null,\n    allDay: null\n};\nvar uid = 0;\nfunction parseEvent(raw, sourceId, calendar, allowOpenRange) {\n    var allDayDefault = computeIsAllDayDefault(sourceId, calendar);\n    var leftovers0 = {};\n    var recurringRes = parseRecurring(raw, // raw, but with single-event stuff stripped out\n    allDayDefault, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes, leftovers0 // will populate with non-recurring props\n    );\n    if (recurringRes) {\n        var def = parseEventDef(leftovers0, sourceId, recurringRes.allDay, Boolean(recurringRes.duration), calendar);\n        def.recurringDef = {\n            typeId: recurringRes.typeId,\n            typeData: recurringRes.typeData,\n            duration: recurringRes.duration\n        };\n        return { def: def, instance: null };\n    }\n    else {\n        var leftovers1 = {};\n        var singleRes = parseSingle(raw, allDayDefault, calendar, leftovers1, allowOpenRange);\n        if (singleRes) {\n            var def = parseEventDef(leftovers1, sourceId, singleRes.allDay, singleRes.hasEnd, calendar);\n            var instance = createEventInstance(def.defId, singleRes.range, singleRes.forcedStartTzo, singleRes.forcedEndTzo);\n            return { def: def, instance: instance };\n        }\n    }\n    return null;\n}\n/*\nWill NOT populate extendedProps with the leftover properties.\nWill NOT populate date-related props.\nThe EventNonDateInput has been normalized (id => publicId, etc).\n*/\nfunction parseEventDef(raw, sourceId, allDay, hasEnd, calendar) {\n    var leftovers = {};\n    var def = pluckNonDateProps(raw, calendar, leftovers);\n    def.defId = String(uid++);\n    def.sourceId = sourceId;\n    def.allDay = allDay;\n    def.hasEnd = hasEnd;\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.eventDefParsers; _i < _a.length; _i++) {\n        var eventDefParser = _a[_i];\n        var newLeftovers = {};\n        eventDefParser(def, leftovers, newLeftovers);\n        leftovers = newLeftovers;\n    }\n    def.extendedProps = __assign(leftovers, def.extendedProps || {});\n    // help out EventApi from having user modify props\n    Object.freeze(def.ui.classNames);\n    Object.freeze(def.extendedProps);\n    return def;\n}\nfunction createEventInstance(defId, range, forcedStartTzo, forcedEndTzo) {\n    return {\n        instanceId: String(uid++),\n        defId: defId,\n        range: range,\n        forcedStartTzo: forcedStartTzo == null ? null : forcedStartTzo,\n        forcedEndTzo: forcedEndTzo == null ? null : forcedEndTzo\n    };\n}\nfunction parseSingle(raw, allDayDefault, calendar, leftovers, allowOpenRange) {\n    var props = pluckDateProps(raw, leftovers);\n    var allDay = props.allDay;\n    var startMeta;\n    var startMarker = null;\n    var hasEnd = false;\n    var endMeta;\n    var endMarker = null;\n    startMeta = calendar.dateEnv.createMarkerMeta(props.start);\n    if (startMeta) {\n        startMarker = startMeta.marker;\n    }\n    else if (!allowOpenRange) {\n        return null;\n    }\n    if (props.end != null) {\n        endMeta = calendar.dateEnv.createMarkerMeta(props.end);\n    }\n    if (allDay == null) {\n        if (allDayDefault != null) {\n            allDay = allDayDefault;\n        }\n        else {\n            // fall back to the date props LAST\n            allDay = (!startMeta || startMeta.isTimeUnspecified) &&\n                (!endMeta || endMeta.isTimeUnspecified);\n        }\n    }\n    if (allDay && startMarker) {\n        startMarker = startOfDay(startMarker);\n    }\n    if (endMeta) {\n        endMarker = endMeta.marker;\n        if (allDay) {\n            endMarker = startOfDay(endMarker);\n        }\n        if (startMarker && endMarker <= startMarker) {\n            endMarker = null;\n        }\n    }\n    if (endMarker) {\n        hasEnd = true;\n    }\n    else if (!allowOpenRange) {\n        hasEnd = calendar.opt('forceEventDuration') || false;\n        endMarker = calendar.dateEnv.add(startMarker, allDay ?\n            calendar.defaultAllDayEventDuration :\n            calendar.defaultTimedEventDuration);\n    }\n    return {\n        allDay: allDay,\n        hasEnd: hasEnd,\n        range: { start: startMarker, end: endMarker },\n        forcedStartTzo: startMeta ? startMeta.forcedTzo : null,\n        forcedEndTzo: endMeta ? endMeta.forcedTzo : null\n    };\n}\nfunction pluckDateProps(raw, leftovers) {\n    var props = refineProps(raw, DATE_PROPS, {}, leftovers);\n    props.start = (props.start !== null) ? props.start : props.date;\n    delete props.date;\n    return props;\n}\nfunction pluckNonDateProps(raw, calendar, leftovers) {\n    var preLeftovers = {};\n    var props = refineProps(raw, NON_DATE_PROPS, {}, preLeftovers);\n    var ui = processUnscopedUiProps(preLeftovers, calendar, leftovers);\n    props.publicId = props.id;\n    delete props.id;\n    props.ui = ui;\n    return props;\n}\nfunction computeIsAllDayDefault(sourceId, calendar) {\n    var res = null;\n    if (sourceId) {\n        var source = calendar.state.eventSources[sourceId];\n        res = source.allDayDefault;\n    }\n    if (res == null) {\n        res = calendar.opt('allDayDefault');\n    }\n    return res;\n}\n\nvar DEF_DEFAULTS = {\n    startTime: '09:00',\n    endTime: '17:00',\n    daysOfWeek: [1, 2, 3, 4, 5],\n    rendering: 'inverse-background',\n    classNames: 'fc-nonbusiness',\n    groupId: '_businessHours' // so multiple defs get grouped\n};\n/*\nTODO: pass around as EventDefHash!!!\n*/\nfunction parseBusinessHours(input, calendar) {\n    return parseEvents(refineInputs(input), '', calendar);\n}\nfunction refineInputs(input) {\n    var rawDefs;\n    if (input === true) {\n        rawDefs = [{}]; // will get DEF_DEFAULTS verbatim\n    }\n    else if (Array.isArray(input)) {\n        // if specifying an array, every sub-definition NEEDS a day-of-week\n        rawDefs = input.filter(function (rawDef) {\n            return rawDef.daysOfWeek;\n        });\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        rawDefs = [input];\n    }\n    else { // is probably false\n        rawDefs = [];\n    }\n    rawDefs = rawDefs.map(function (rawDef) {\n        return __assign({}, DEF_DEFAULTS, rawDef);\n    });\n    return rawDefs;\n}\n\nfunction memoizeRendering(renderFunc, unrenderFunc, dependencies) {\n    if (dependencies === void 0) { dependencies = []; }\n    var dependents = [];\n    var thisContext;\n    var prevArgs;\n    function unrender() {\n        if (prevArgs) {\n            for (var _i = 0, dependents_1 = dependents; _i < dependents_1.length; _i++) {\n                var dependent = dependents_1[_i];\n                dependent.unrender();\n            }\n            if (unrenderFunc) {\n                unrenderFunc.apply(thisContext, prevArgs);\n            }\n            prevArgs = null;\n        }\n    }\n    function res() {\n        if (!prevArgs || !isArraysEqual(prevArgs, arguments)) {\n            unrender();\n            thisContext = this;\n            prevArgs = arguments;\n            renderFunc.apply(this, arguments);\n        }\n    }\n    res.dependents = dependents;\n    res.unrender = unrender;\n    for (var _i = 0, dependencies_1 = dependencies; _i < dependencies_1.length; _i++) {\n        var dependency = dependencies_1[_i];\n        dependency.dependents.push(res);\n    }\n    return res;\n}\n\nvar EMPTY_EVENT_STORE = createEmptyEventStore(); // for purecomponents. TODO: keep elsewhere\nvar Splitter = /** @class */ (function () {\n    function Splitter() {\n        this.getKeysForEventDefs = memoize(this._getKeysForEventDefs);\n        this.splitDateSelection = memoize(this._splitDateSpan);\n        this.splitEventStore = memoize(this._splitEventStore);\n        this.splitIndividualUi = memoize(this._splitIndividualUi);\n        this.splitEventDrag = memoize(this._splitInteraction);\n        this.splitEventResize = memoize(this._splitInteraction);\n        this.eventUiBuilders = {}; // TODO: typescript protection\n    }\n    Splitter.prototype.splitProps = function (props) {\n        var _this = this;\n        var keyInfos = this.getKeyInfo(props);\n        var defKeys = this.getKeysForEventDefs(props.eventStore);\n        var dateSelections = this.splitDateSelection(props.dateSelection);\n        var individualUi = this.splitIndividualUi(props.eventUiBases, defKeys); // the individual *bases*\n        var eventStores = this.splitEventStore(props.eventStore, defKeys);\n        var eventDrags = this.splitEventDrag(props.eventDrag);\n        var eventResizes = this.splitEventResize(props.eventResize);\n        var splitProps = {};\n        this.eventUiBuilders = mapHash(keyInfos, function (info, key) {\n            return _this.eventUiBuilders[key] || memoize(buildEventUiForKey);\n        });\n        for (var key in keyInfos) {\n            var keyInfo = keyInfos[key];\n            var eventStore = eventStores[key] || EMPTY_EVENT_STORE;\n            var buildEventUi = this.eventUiBuilders[key];\n            splitProps[key] = {\n                businessHours: keyInfo.businessHours || props.businessHours,\n                dateSelection: dateSelections[key] || null,\n                eventStore: eventStore,\n                eventUiBases: buildEventUi(props.eventUiBases[''], keyInfo.ui, individualUi[key]),\n                eventSelection: eventStore.instances[props.eventSelection] ? props.eventSelection : '',\n                eventDrag: eventDrags[key] || null,\n                eventResize: eventResizes[key] || null\n            };\n        }\n        return splitProps;\n    };\n    Splitter.prototype._splitDateSpan = function (dateSpan) {\n        var dateSpans = {};\n        if (dateSpan) {\n            var keys = this.getKeysForDateSpan(dateSpan);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                dateSpans[key] = dateSpan;\n            }\n        }\n        return dateSpans;\n    };\n    Splitter.prototype._getKeysForEventDefs = function (eventStore) {\n        var _this = this;\n        return mapHash(eventStore.defs, function (eventDef) {\n            return _this.getKeysForEventDef(eventDef);\n        });\n    };\n    Splitter.prototype._splitEventStore = function (eventStore, defKeys) {\n        var defs = eventStore.defs, instances = eventStore.instances;\n        var splitStores = {};\n        for (var defId in defs) {\n            for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (!splitStores[key]) {\n                    splitStores[key] = createEmptyEventStore();\n                }\n                splitStores[key].defs[defId] = defs[defId];\n            }\n        }\n        for (var instanceId in instances) {\n            var instance = instances[instanceId];\n            for (var _b = 0, _c = defKeys[instance.defId]; _b < _c.length; _b++) {\n                var key = _c[_b];\n                if (splitStores[key]) { // must have already been created\n                    splitStores[key].instances[instanceId] = instance;\n                }\n            }\n        }\n        return splitStores;\n    };\n    Splitter.prototype._splitIndividualUi = function (eventUiBases, defKeys) {\n        var splitHashes = {};\n        for (var defId in eventUiBases) {\n            if (defId) { // not the '' key\n                for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                    var key = _a[_i];\n                    if (!splitHashes[key]) {\n                        splitHashes[key] = {};\n                    }\n                    splitHashes[key][defId] = eventUiBases[defId];\n                }\n            }\n        }\n        return splitHashes;\n    };\n    Splitter.prototype._splitInteraction = function (interaction) {\n        var splitStates = {};\n        if (interaction) {\n            var affectedStores_1 = this._splitEventStore(interaction.affectedEvents, this._getKeysForEventDefs(interaction.affectedEvents) // can't use cached. might be events from other calendar\n            );\n            // can't rely on defKeys because event data is mutated\n            var mutatedKeysByDefId = this._getKeysForEventDefs(interaction.mutatedEvents);\n            var mutatedStores_1 = this._splitEventStore(interaction.mutatedEvents, mutatedKeysByDefId);\n            var populate = function (key) {\n                if (!splitStates[key]) {\n                    splitStates[key] = {\n                        affectedEvents: affectedStores_1[key] || EMPTY_EVENT_STORE,\n                        mutatedEvents: mutatedStores_1[key] || EMPTY_EVENT_STORE,\n                        isEvent: interaction.isEvent,\n                        origSeg: interaction.origSeg\n                    };\n                }\n            };\n            for (var key in affectedStores_1) {\n                populate(key);\n            }\n            for (var key in mutatedStores_1) {\n                populate(key);\n            }\n        }\n        return splitStates;\n    };\n    return Splitter;\n}());\nfunction buildEventUiForKey(allUi, eventUiForKey, individualUi) {\n    var baseParts = [];\n    if (allUi) {\n        baseParts.push(allUi);\n    }\n    if (eventUiForKey) {\n        baseParts.push(eventUiForKey);\n    }\n    var stuff = {\n        '': combineEventUis(baseParts)\n    };\n    if (individualUi) {\n        __assign(stuff, individualUi);\n    }\n    return stuff;\n}\n\n// Generates HTML for an anchor to another view into the calendar.\n// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n// `gotoOptions` can either be a DateMarker, or an object with the form:\n// { date, type, forceOff }\n// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\nfunction buildGotoAnchorHtml(allOptions, dateEnv, gotoOptions, attrs, innerHtml) {\n    var date;\n    var type;\n    var forceOff;\n    var finalOptions;\n    if (gotoOptions instanceof Date) {\n        date = gotoOptions; // a single date-like input\n    }\n    else {\n        date = gotoOptions.date;\n        type = gotoOptions.type;\n        forceOff = gotoOptions.forceOff;\n    }\n    finalOptions = {\n        date: dateEnv.formatIso(date, { omitTime: true }),\n        type: type || 'day'\n    };\n    if (typeof attrs === 'string') {\n        innerHtml = attrs;\n        attrs = null;\n    }\n    attrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n    innerHtml = innerHtml || '';\n    if (!forceOff && allOptions.navLinks) {\n        return '<a' + attrs +\n            ' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n            innerHtml +\n            '</a>';\n    }\n    else {\n        return '<span' + attrs + '>' +\n            innerHtml +\n            '</span>';\n    }\n}\nfunction getAllDayHtml(allOptions) {\n    return allOptions.allDayHtml || htmlEscape(allOptions.allDayText);\n}\n// Computes HTML classNames for a single-day element\nfunction getDayClasses(date, dateProfile, context, noThemeHighlight) {\n    var calendar = context.calendar, options = context.options, theme = context.theme, dateEnv = context.dateEnv;\n    var classes = [];\n    var todayStart;\n    var todayEnd;\n    if (!rangeContainsMarker(dateProfile.activeRange, date)) {\n        classes.push('fc-disabled-day');\n    }\n    else {\n        classes.push('fc-' + DAY_IDS[date.getUTCDay()]);\n        if (options.monthMode &&\n            dateEnv.getMonth(date) !== dateEnv.getMonth(dateProfile.currentRange.start)) {\n            classes.push('fc-other-month');\n        }\n        todayStart = startOfDay(calendar.getNow());\n        todayEnd = addDays(todayStart, 1);\n        if (date < todayStart) {\n            classes.push('fc-past');\n        }\n        else if (date >= todayEnd) {\n            classes.push('fc-future');\n        }\n        else {\n            classes.push('fc-today');\n            if (noThemeHighlight !== true) {\n                classes.push(theme.getClass('today'));\n            }\n        }\n    }\n    return classes;\n}\n\n// given a function that resolves a result asynchronously.\n// the function can either call passed-in success and failure callbacks,\n// or it can return a promise.\n// if you need to pass additional params to func, bind them first.\nfunction unpromisify(func, success, failure) {\n    // guard against success/failure callbacks being called more than once\n    // and guard against a promise AND callback being used together.\n    var isResolved = false;\n    var wrappedSuccess = function () {\n        if (!isResolved) {\n            isResolved = true;\n            success.apply(this, arguments);\n        }\n    };\n    var wrappedFailure = function () {\n        if (!isResolved) {\n            isResolved = true;\n            if (failure) {\n                failure.apply(this, arguments);\n            }\n        }\n    };\n    var res = func(wrappedSuccess, wrappedFailure);\n    if (res && typeof res.then === 'function') {\n        res.then(wrappedSuccess, wrappedFailure);\n    }\n}\n\nvar Mixin = /** @class */ (function () {\n    function Mixin() {\n    }\n    // mix into a CLASS\n    Mixin.mixInto = function (destClass) {\n        this.mixIntoObj(destClass.prototype);\n    };\n    // mix into ANY object\n    Mixin.mixIntoObj = function (destObj) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            if (!destObj[name]) { // if destination doesn't already define it\n                destObj[name] = _this.prototype[name];\n            }\n        });\n    };\n    /*\n    will override existing methods\n    TODO: remove! not used anymore\n    */\n    Mixin.mixOver = function (destClass) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            destClass.prototype[name] = _this.prototype[name];\n        });\n    };\n    return Mixin;\n}());\n\n/*\nUSAGE:\n  import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\nin class:\n  on: EmitterInterface['on']\n  one: EmitterInterface['one']\n  off: EmitterInterface['off']\n  trigger: EmitterInterface['trigger']\n  triggerWith: EmitterInterface['triggerWith']\n  hasHandlers: EmitterInterface['hasHandlers']\nafter class:\n  EmitterMixin.mixInto(TheClass)\n*/\nvar EmitterMixin = /** @class */ (function (_super) {\n    __extends(EmitterMixin, _super);\n    function EmitterMixin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmitterMixin.prototype.on = function (type, handler) {\n        addToHash(this._handlers || (this._handlers = {}), type, handler);\n        return this; // for chaining\n    };\n    // todo: add comments\n    EmitterMixin.prototype.one = function (type, handler) {\n        addToHash(this._oneHandlers || (this._oneHandlers = {}), type, handler);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.off = function (type, handler) {\n        if (this._handlers) {\n            removeFromHash(this._handlers, type, handler);\n        }\n        if (this._oneHandlers) {\n            removeFromHash(this._oneHandlers, type, handler);\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.trigger = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.triggerWith(type, this, args);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.triggerWith = function (type, context, args) {\n        if (this._handlers) {\n            applyAll(this._handlers[type], context, args);\n        }\n        if (this._oneHandlers) {\n            applyAll(this._oneHandlers[type], context, args);\n            delete this._oneHandlers[type]; // will never fire again\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.hasHandlers = function (type) {\n        return (this._handlers && this._handlers[type] && this._handlers[type].length) ||\n            (this._oneHandlers && this._oneHandlers[type] && this._oneHandlers[type].length);\n    };\n    return EmitterMixin;\n}(Mixin));\nfunction addToHash(hash, type, handler) {\n    (hash[type] || (hash[type] = []))\n        .push(handler);\n}\nfunction removeFromHash(hash, type, handler) {\n    if (handler) {\n        if (hash[type]) {\n            hash[type] = hash[type].filter(function (func) {\n                return func !== handler;\n            });\n        }\n    }\n    else {\n        delete hash[type]; // remove all handler funcs for this type\n    }\n}\n\n/*\nRecords offset information for a set of elements, relative to an origin element.\nCan record the left/right OR the top/bottom OR both.\nProvides methods for querying the cache by position.\n*/\nvar PositionCache = /** @class */ (function () {\n    function PositionCache(originEl, els, isHorizontal, isVertical) {\n        this.originEl = originEl;\n        this.els = els;\n        this.isHorizontal = isHorizontal;\n        this.isVertical = isVertical;\n    }\n    // Queries the els for coordinates and stores them.\n    // Call this method before using and of the get* methods below.\n    PositionCache.prototype.build = function () {\n        var originEl = this.originEl;\n        var originClientRect = this.originClientRect =\n            originEl.getBoundingClientRect(); // relative to viewport top-left\n        if (this.isHorizontal) {\n            this.buildElHorizontals(originClientRect.left);\n        }\n        if (this.isVertical) {\n            this.buildElVerticals(originClientRect.top);\n        }\n    };\n    // Populates the left/right internal coordinate arrays\n    PositionCache.prototype.buildElHorizontals = function (originClientLeft) {\n        var lefts = [];\n        var rights = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            lefts.push(rect.left - originClientLeft);\n            rights.push(rect.right - originClientLeft);\n        }\n        this.lefts = lefts;\n        this.rights = rights;\n    };\n    // Populates the top/bottom internal coordinate arrays\n    PositionCache.prototype.buildElVerticals = function (originClientTop) {\n        var tops = [];\n        var bottoms = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            tops.push(rect.top - originClientTop);\n            bottoms.push(rect.bottom - originClientTop);\n        }\n        this.tops = tops;\n        this.bottoms = bottoms;\n    };\n    // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.leftToIndex = function (leftPosition) {\n        var lefts = this.lefts;\n        var rights = this.rights;\n        var len = lefts.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (leftPosition >= lefts[i] && leftPosition < rights[i]) {\n                return i;\n            }\n        }\n    };\n    // Given a top offset (from document top), returns the index of the el that it vertically intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.topToIndex = function (topPosition) {\n        var tops = this.tops;\n        var bottoms = this.bottoms;\n        var len = tops.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (topPosition >= tops[i] && topPosition < bottoms[i]) {\n                return i;\n            }\n        }\n    };\n    // Gets the width of the element at the given index\n    PositionCache.prototype.getWidth = function (leftIndex) {\n        return this.rights[leftIndex] - this.lefts[leftIndex];\n    };\n    // Gets the height of the element at the given index\n    PositionCache.prototype.getHeight = function (topIndex) {\n        return this.bottoms[topIndex] - this.tops[topIndex];\n    };\n    return PositionCache;\n}());\n\n/*\nAn object for getting/setting scroll-related information for an element.\nInternally, this is done very differently for window versus DOM element,\nso this object serves as a common interface.\n*/\nvar ScrollController = /** @class */ (function () {\n    function ScrollController() {\n    }\n    ScrollController.prototype.getMaxScrollTop = function () {\n        return this.getScrollHeight() - this.getClientHeight();\n    };\n    ScrollController.prototype.getMaxScrollLeft = function () {\n        return this.getScrollWidth() - this.getClientWidth();\n    };\n    ScrollController.prototype.canScrollVertically = function () {\n        return this.getMaxScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollHorizontally = function () {\n        return this.getMaxScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollUp = function () {\n        return this.getScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollDown = function () {\n        return this.getScrollTop() < this.getMaxScrollTop();\n    };\n    ScrollController.prototype.canScrollLeft = function () {\n        return this.getScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollRight = function () {\n        return this.getScrollLeft() < this.getMaxScrollLeft();\n    };\n    return ScrollController;\n}());\nvar ElementScrollController = /** @class */ (function (_super) {\n    __extends(ElementScrollController, _super);\n    function ElementScrollController(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    ElementScrollController.prototype.getScrollTop = function () {\n        return this.el.scrollTop;\n    };\n    ElementScrollController.prototype.getScrollLeft = function () {\n        return this.el.scrollLeft;\n    };\n    ElementScrollController.prototype.setScrollTop = function (top) {\n        this.el.scrollTop = top;\n    };\n    ElementScrollController.prototype.setScrollLeft = function (left) {\n        this.el.scrollLeft = left;\n    };\n    ElementScrollController.prototype.getScrollWidth = function () {\n        return this.el.scrollWidth;\n    };\n    ElementScrollController.prototype.getScrollHeight = function () {\n        return this.el.scrollHeight;\n    };\n    ElementScrollController.prototype.getClientHeight = function () {\n        return this.el.clientHeight;\n    };\n    ElementScrollController.prototype.getClientWidth = function () {\n        return this.el.clientWidth;\n    };\n    return ElementScrollController;\n}(ScrollController));\nvar WindowScrollController = /** @class */ (function (_super) {\n    __extends(WindowScrollController, _super);\n    function WindowScrollController() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WindowScrollController.prototype.getScrollTop = function () {\n        return window.pageYOffset;\n    };\n    WindowScrollController.prototype.getScrollLeft = function () {\n        return window.pageXOffset;\n    };\n    WindowScrollController.prototype.setScrollTop = function (n) {\n        window.scroll(window.pageXOffset, n);\n    };\n    WindowScrollController.prototype.setScrollLeft = function (n) {\n        window.scroll(n, window.pageYOffset);\n    };\n    WindowScrollController.prototype.getScrollWidth = function () {\n        return document.documentElement.scrollWidth;\n    };\n    WindowScrollController.prototype.getScrollHeight = function () {\n        return document.documentElement.scrollHeight;\n    };\n    WindowScrollController.prototype.getClientHeight = function () {\n        return document.documentElement.clientHeight;\n    };\n    WindowScrollController.prototype.getClientWidth = function () {\n        return document.documentElement.clientWidth;\n    };\n    return WindowScrollController;\n}(ScrollController));\n\n/*\nEmbodies a div that has potential scrollbars\n*/\nvar ScrollComponent = /** @class */ (function (_super) {\n    __extends(ScrollComponent, _super);\n    function ScrollComponent(overflowX, overflowY) {\n        var _this = _super.call(this, createElement('div', {\n            className: 'fc-scroller'\n        })) || this;\n        _this.overflowX = overflowX;\n        _this.overflowY = overflowY;\n        _this.applyOverflow();\n        return _this;\n    }\n    // sets to natural height, unlocks overflow\n    ScrollComponent.prototype.clear = function () {\n        this.setHeight('auto');\n        this.applyOverflow();\n    };\n    ScrollComponent.prototype.destroy = function () {\n        removeElement(this.el);\n    };\n    // Overflow\n    // -----------------------------------------------------------------------------------------------------------------\n    ScrollComponent.prototype.applyOverflow = function () {\n        applyStyle(this.el, {\n            overflowX: this.overflowX,\n            overflowY: this.overflowY\n        });\n    };\n    // Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n    // Useful for preserving scrollbar widths regardless of future resizes.\n    // Can pass in scrollbarWidths for optimization.\n    ScrollComponent.prototype.lockOverflow = function (scrollbarWidths) {\n        var overflowX = this.overflowX;\n        var overflowY = this.overflowY;\n        scrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n        if (overflowX === 'auto') {\n            overflowX = (scrollbarWidths.bottom || // horizontal scrollbars?\n                this.canScrollHorizontally() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        if (overflowY === 'auto') {\n            overflowY = (scrollbarWidths.left || scrollbarWidths.right || // horizontal scrollbars?\n                this.canScrollVertically() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        applyStyle(this.el, { overflowX: overflowX, overflowY: overflowY });\n    };\n    ScrollComponent.prototype.setHeight = function (height) {\n        applyStyleProp(this.el, 'height', height);\n    };\n    ScrollComponent.prototype.getScrollbarWidths = function () {\n        var edges = computeEdges(this.el);\n        return {\n            left: edges.scrollbarLeft,\n            right: edges.scrollbarRight,\n            bottom: edges.scrollbarBottom\n        };\n    };\n    return ScrollComponent;\n}(ElementScrollController));\n\nvar Theme = /** @class */ (function () {\n    function Theme(calendarOptions) {\n        this.calendarOptions = calendarOptions;\n        this.processIconOverride();\n    }\n    Theme.prototype.processIconOverride = function () {\n        if (this.iconOverrideOption) {\n            this.setIconOverride(this.calendarOptions[this.iconOverrideOption]);\n        }\n    };\n    Theme.prototype.setIconOverride = function (iconOverrideHash) {\n        var iconClassesCopy;\n        var buttonName;\n        if (typeof iconOverrideHash === 'object' && iconOverrideHash) { // non-null object\n            iconClassesCopy = __assign({}, this.iconClasses);\n            for (buttonName in iconOverrideHash) {\n                iconClassesCopy[buttonName] = this.applyIconOverridePrefix(iconOverrideHash[buttonName]);\n            }\n            this.iconClasses = iconClassesCopy;\n        }\n        else if (iconOverrideHash === false) {\n            this.iconClasses = {};\n        }\n    };\n    Theme.prototype.applyIconOverridePrefix = function (className) {\n        var prefix = this.iconOverridePrefix;\n        if (prefix && className.indexOf(prefix) !== 0) { // if not already present\n            className = prefix + className;\n        }\n        return className;\n    };\n    Theme.prototype.getClass = function (key) {\n        return this.classes[key] || '';\n    };\n    Theme.prototype.getIconClass = function (buttonName) {\n        var className = this.iconClasses[buttonName];\n        if (className) {\n            return this.baseIconClass + ' ' + className;\n        }\n        return '';\n    };\n    Theme.prototype.getCustomButtonIconClass = function (customButtonProps) {\n        var className;\n        if (this.iconOverrideCustomButtonOption) {\n            className = customButtonProps[this.iconOverrideCustomButtonOption];\n            if (className) {\n                return this.baseIconClass + ' ' + this.applyIconOverridePrefix(className);\n            }\n        }\n        return '';\n    };\n    return Theme;\n}());\nTheme.prototype.classes = {};\nTheme.prototype.iconClasses = {};\nTheme.prototype.baseIconClass = '';\nTheme.prototype.iconOverridePrefix = '';\n\nvar guid = 0;\nvar ComponentContext = /** @class */ (function () {\n    function ComponentContext(calendar, theme, dateEnv, options, view) {\n        this.calendar = calendar;\n        this.theme = theme;\n        this.dateEnv = dateEnv;\n        this.options = options;\n        this.view = view;\n        this.isRtl = options.dir === 'rtl';\n        this.eventOrderSpecs = parseFieldSpecs(options.eventOrder);\n        this.nextDayThreshold = createDuration(options.nextDayThreshold);\n    }\n    ComponentContext.prototype.extend = function (options, view) {\n        return new ComponentContext(this.calendar, this.theme, this.dateEnv, options || this.options, view || this.view);\n    };\n    return ComponentContext;\n}());\nvar Component = /** @class */ (function () {\n    function Component() {\n        this.uid = String(guid++);\n    }\n    Component.addEqualityFuncs = function (newFuncs) {\n        this.prototype.equalityFuncs = __assign({}, this.prototype.equalityFuncs, newFuncs);\n    };\n    Component.prototype.receiveProps = function (props, context) {\n        var oldContext = this.context;\n        this.context = context;\n        if (!oldContext) {\n            this.firstContext(context);\n        }\n        var _a = recycleProps(this.props || {}, props, this.equalityFuncs), anyChanges = _a.anyChanges, comboProps = _a.comboProps;\n        this.props = comboProps;\n        if (anyChanges) {\n            if (oldContext) {\n                this.beforeUpdate();\n            }\n            this.render(comboProps, context);\n            if (oldContext) {\n                this.afterUpdate();\n            }\n        }\n    };\n    Component.prototype.render = function (props, context) {\n    };\n    Component.prototype.firstContext = function (context) {\n    };\n    Component.prototype.beforeUpdate = function () {\n    };\n    Component.prototype.afterUpdate = function () {\n    };\n    // after destroy is called, this component won't ever be used again\n    Component.prototype.destroy = function () {\n    };\n    return Component;\n}());\nComponent.prototype.equalityFuncs = {};\n/*\nReuses old values when equal. If anything is unequal, returns newProps as-is.\nGreat for PureComponent, but won't be feasible with React, so just eliminate and use React's DOM diffing.\n*/\nfunction recycleProps(oldProps, newProps, equalityFuncs) {\n    var comboProps = {}; // some old, some new\n    var anyChanges = false;\n    for (var key in newProps) {\n        if (key in oldProps && (oldProps[key] === newProps[key] ||\n            (equalityFuncs[key] && equalityFuncs[key](oldProps[key], newProps[key])))) {\n            // equal to old? use old prop\n            comboProps[key] = oldProps[key];\n        }\n        else {\n            comboProps[key] = newProps[key];\n            anyChanges = true;\n        }\n    }\n    for (var key in oldProps) {\n        if (!(key in newProps)) {\n            anyChanges = true;\n            break;\n        }\n    }\n    return { anyChanges: anyChanges, comboProps: comboProps };\n}\n\n/*\nPURPOSES:\n- hook up to fg, fill, and mirror renderers\n- interface for dragging and hits\n*/\nvar DateComponent = /** @class */ (function (_super) {\n    __extends(DateComponent, _super);\n    function DateComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    DateComponent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        removeElement(this.el);\n    };\n    // Hit System\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.buildPositionCaches = function () {\n    };\n    DateComponent.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        return null; // this should be abstract\n    };\n    // Validation\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isInteractionValid = function (interaction) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        var instances = interaction.mutatedEvents.instances;\n        if (dateProfile) { // HACK for DayTile\n            for (var instanceId in instances) {\n                if (!rangeContainsRange(dateProfile.validRange, instances[instanceId].range)) {\n                    return false;\n                }\n            }\n        }\n        return isInteractionValid(interaction, calendar);\n    };\n    DateComponent.prototype.isDateSelectionValid = function (selection) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        if (dateProfile && // HACK for DayTile\n            !rangeContainsRange(dateProfile.validRange, selection.range)) {\n            return false;\n        }\n        return isDateSelectionValid(selection, calendar);\n    };\n    // Pointer Interaction Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isValidSegDownEl = function (el) {\n        return !this.props.eventDrag && // HACK\n            !this.props.eventResize && // HACK\n            !elementClosest(el, '.fc-mirror') &&\n            (this.isPopover() || !this.isInPopover(el));\n        // ^above line ensures we don't detect a seg interaction within a nested component.\n        // it's a HACK because it only supports a popover as the nested component.\n    };\n    DateComponent.prototype.isValidDateDownEl = function (el) {\n        var segEl = elementClosest(el, this.fgSegSelector);\n        return (!segEl || segEl.classList.contains('fc-mirror')) &&\n            !elementClosest(el, '.fc-more') && // a \"more..\" link\n            !elementClosest(el, 'a[data-goto]') && // a clickable nav link\n            !this.isInPopover(el);\n    };\n    DateComponent.prototype.isPopover = function () {\n        return this.el.classList.contains('fc-popover');\n    };\n    DateComponent.prototype.isInPopover = function (el) {\n        return Boolean(elementClosest(el, '.fc-popover'));\n    };\n    return DateComponent;\n}(Component));\nDateComponent.prototype.fgSegSelector = '.fc-event-container > *';\nDateComponent.prototype.bgSegSelector = '.fc-bgevent:not(.fc-nonbusiness)';\n\nvar uid$1 = 0;\nfunction createPlugin(input) {\n    return {\n        id: String(uid$1++),\n        deps: input.deps || [],\n        reducers: input.reducers || [],\n        eventDefParsers: input.eventDefParsers || [],\n        isDraggableTransformers: input.isDraggableTransformers || [],\n        eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n        eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n        dateSelectionTransformers: input.dateSelectionTransformers || [],\n        datePointTransforms: input.datePointTransforms || [],\n        dateSpanTransforms: input.dateSpanTransforms || [],\n        views: input.views || {},\n        viewPropsTransformers: input.viewPropsTransformers || [],\n        isPropsValid: input.isPropsValid || null,\n        externalDefTransforms: input.externalDefTransforms || [],\n        eventResizeJoinTransforms: input.eventResizeJoinTransforms || [],\n        viewContainerModifiers: input.viewContainerModifiers || [],\n        eventDropTransformers: input.eventDropTransformers || [],\n        componentInteractions: input.componentInteractions || [],\n        calendarInteractions: input.calendarInteractions || [],\n        themeClasses: input.themeClasses || {},\n        eventSourceDefs: input.eventSourceDefs || [],\n        cmdFormatter: input.cmdFormatter,\n        recurringTypes: input.recurringTypes || [],\n        namedTimeZonedImpl: input.namedTimeZonedImpl,\n        defaultView: input.defaultView || '',\n        elementDraggingImpl: input.elementDraggingImpl,\n        optionChangeHandlers: input.optionChangeHandlers || {}\n    };\n}\nvar PluginSystem = /** @class */ (function () {\n    function PluginSystem() {\n        this.hooks = {\n            reducers: [],\n            eventDefParsers: [],\n            isDraggableTransformers: [],\n            eventDragMutationMassagers: [],\n            eventDefMutationAppliers: [],\n            dateSelectionTransformers: [],\n            datePointTransforms: [],\n            dateSpanTransforms: [],\n            views: {},\n            viewPropsTransformers: [],\n            isPropsValid: null,\n            externalDefTransforms: [],\n            eventResizeJoinTransforms: [],\n            viewContainerModifiers: [],\n            eventDropTransformers: [],\n            componentInteractions: [],\n            calendarInteractions: [],\n            themeClasses: {},\n            eventSourceDefs: [],\n            cmdFormatter: null,\n            recurringTypes: [],\n            namedTimeZonedImpl: null,\n            defaultView: '',\n            elementDraggingImpl: null,\n            optionChangeHandlers: {}\n        };\n        this.addedHash = {};\n    }\n    PluginSystem.prototype.add = function (plugin) {\n        if (!this.addedHash[plugin.id]) {\n            this.addedHash[plugin.id] = true;\n            for (var _i = 0, _a = plugin.deps; _i < _a.length; _i++) {\n                var dep = _a[_i];\n                this.add(dep);\n            }\n            this.hooks = combineHooks(this.hooks, plugin);\n        }\n    };\n    return PluginSystem;\n}());\nfunction combineHooks(hooks0, hooks1) {\n    return {\n        reducers: hooks0.reducers.concat(hooks1.reducers),\n        eventDefParsers: hooks0.eventDefParsers.concat(hooks1.eventDefParsers),\n        isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n        eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n        eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n        dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n        datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n        dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n        views: __assign({}, hooks0.views, hooks1.views),\n        viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n        isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n        externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n        eventResizeJoinTransforms: hooks0.eventResizeJoinTransforms.concat(hooks1.eventResizeJoinTransforms),\n        viewContainerModifiers: hooks0.viewContainerModifiers.concat(hooks1.viewContainerModifiers),\n        eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n        calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n        componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n        themeClasses: __assign({}, hooks0.themeClasses, hooks1.themeClasses),\n        eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n        cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n        recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n        namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n        defaultView: hooks0.defaultView || hooks1.defaultView,\n        elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n        optionChangeHandlers: __assign({}, hooks0.optionChangeHandlers, hooks1.optionChangeHandlers)\n    };\n}\n\nvar eventSourceDef = {\n    ignoreRange: true,\n    parseMeta: function (raw) {\n        if (Array.isArray(raw)) { // short form\n            return raw;\n        }\n        else if (Array.isArray(raw.events)) {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success) {\n        success({\n            rawEvents: arg.eventSource.meta\n        });\n    }\n};\nvar ArrayEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef]\n});\n\nvar eventSourceDef$1 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'function') { // short form\n            return raw;\n        }\n        else if (typeof raw.events === 'function') {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success, failure) {\n        var dateEnv = arg.calendar.dateEnv;\n        var func = arg.eventSource.meta;\n        unpromisify(func.bind(null, {\n            start: dateEnv.toDate(arg.range.start),\n            end: dateEnv.toDate(arg.range.end),\n            startStr: dateEnv.formatIso(arg.range.start),\n            endStr: dateEnv.formatIso(arg.range.end),\n            timeZone: dateEnv.timeZone\n        }), function (rawEvents) {\n            success({ rawEvents: rawEvents }); // needs an object response\n        }, failure // send errorObj directly to failure callback\n        );\n    }\n};\nvar FuncEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$1]\n});\n\nfunction requestJson(method, url, params, successCallback, failureCallback) {\n    method = method.toUpperCase();\n    var body = null;\n    if (method === 'GET') {\n        url = injectQueryStringParams(url, params);\n    }\n    else {\n        body = encodeParams(params);\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open(method, url, true);\n    if (method !== 'GET') {\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n    xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 400) {\n            try {\n                var res = JSON.parse(xhr.responseText);\n                successCallback(res, xhr);\n            }\n            catch (err) {\n                failureCallback('Failure parsing JSON', xhr);\n            }\n        }\n        else {\n            failureCallback('Request failed', xhr);\n        }\n    };\n    xhr.onerror = function () {\n        failureCallback('Request failed', xhr);\n    };\n    xhr.send(body);\n}\nfunction injectQueryStringParams(url, params) {\n    return url +\n        (url.indexOf('?') === -1 ? '?' : '&') +\n        encodeParams(params);\n}\nfunction encodeParams(params) {\n    var parts = [];\n    for (var key in params) {\n        parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n    }\n    return parts.join('&');\n}\n\nvar eventSourceDef$2 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'string') { // short form\n            raw = { url: raw };\n        }\n        else if (!raw || typeof raw !== 'object' || !raw.url) {\n            return null;\n        }\n        return {\n            url: raw.url,\n            method: (raw.method || 'GET').toUpperCase(),\n            extraParams: raw.extraParams,\n            startParam: raw.startParam,\n            endParam: raw.endParam,\n            timeZoneParam: raw.timeZoneParam\n        };\n    },\n    fetch: function (arg, success, failure) {\n        var meta = arg.eventSource.meta;\n        var requestParams = buildRequestParams(meta, arg.range, arg.calendar);\n        requestJson(meta.method, meta.url, requestParams, function (rawEvents, xhr) {\n            success({ rawEvents: rawEvents, xhr: xhr });\n        }, function (errorMessage, xhr) {\n            failure({ message: errorMessage, xhr: xhr });\n        });\n    }\n};\nvar JsonFeedEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$2]\n});\nfunction buildRequestParams(meta, range, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var startParam;\n    var endParam;\n    var timeZoneParam;\n    var customRequestParams;\n    var params = {};\n    startParam = meta.startParam;\n    if (startParam == null) {\n        startParam = calendar.opt('startParam');\n    }\n    endParam = meta.endParam;\n    if (endParam == null) {\n        endParam = calendar.opt('endParam');\n    }\n    timeZoneParam = meta.timeZoneParam;\n    if (timeZoneParam == null) {\n        timeZoneParam = calendar.opt('timeZoneParam');\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    __assign(params, customRequestParams);\n    params[startParam] = dateEnv.formatIso(range.start);\n    params[endParam] = dateEnv.formatIso(range.end);\n    if (dateEnv.timeZone !== 'local') {\n        params[timeZoneParam] = dateEnv.timeZone;\n    }\n    return params;\n}\n\nvar recurring = {\n    parse: function (rawEvent, leftoverProps, dateEnv) {\n        var createMarker = dateEnv.createMarker.bind(dateEnv);\n        var processors = {\n            daysOfWeek: null,\n            startTime: createDuration,\n            endTime: createDuration,\n            startRecur: createMarker,\n            endRecur: createMarker\n        };\n        var props = refineProps(rawEvent, processors, {}, leftoverProps);\n        var anyValid = false;\n        for (var propName in props) {\n            if (props[propName] != null) {\n                anyValid = true;\n                break;\n            }\n        }\n        if (anyValid) {\n            var duration = null;\n            if ('duration' in leftoverProps) {\n                duration = createDuration(leftoverProps.duration);\n                delete leftoverProps.duration;\n            }\n            if (!duration && props.startTime && props.endTime) {\n                duration = subtractDurations(props.endTime, props.startTime);\n            }\n            return {\n                allDayGuess: Boolean(!props.startTime && !props.endTime),\n                duration: duration,\n                typeData: props // doesn't need endTime anymore but oh well\n            };\n        }\n        return null;\n    },\n    expand: function (typeData, framingRange, dateEnv) {\n        var clippedFramingRange = intersectRanges(framingRange, { start: typeData.startRecur, end: typeData.endRecur });\n        if (clippedFramingRange) {\n            return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n        }\n        else {\n            return [];\n        }\n    }\n};\nvar SimpleRecurrencePlugin = createPlugin({\n    recurringTypes: [recurring]\n});\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n    var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n    var dayMarker = startOfDay(framingRange.start);\n    var endMarker = framingRange.end;\n    var instanceStarts = [];\n    while (dayMarker < endMarker) {\n        var instanceStart \n        // if everyday, or this particular day-of-week\n        = void 0;\n        // if everyday, or this particular day-of-week\n        if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n            if (startTime) {\n                instanceStart = dateEnv.add(dayMarker, startTime);\n            }\n            else {\n                instanceStart = dayMarker;\n            }\n            instanceStarts.push(instanceStart);\n        }\n        dayMarker = addDays(dayMarker, 1);\n    }\n    return instanceStarts;\n}\n\nvar DefaultOptionChangeHandlers = createPlugin({\n    optionChangeHandlers: {\n        events: function (events, calendar, deepEqual) {\n            handleEventSources([events], calendar, deepEqual);\n        },\n        eventSources: handleEventSources,\n        plugins: handlePlugins\n    }\n});\nfunction handleEventSources(inputs, calendar, deepEqual) {\n    var unfoundSources = hashValuesToArray(calendar.state.eventSources);\n    var newInputs = [];\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n        var input = inputs_1[_i];\n        var inputFound = false;\n        for (var i = 0; i < unfoundSources.length; i++) {\n            if (deepEqual(unfoundSources[i]._raw, input)) {\n                unfoundSources.splice(i, 1); // delete\n                inputFound = true;\n                break;\n            }\n        }\n        if (!inputFound) {\n            newInputs.push(input);\n        }\n    }\n    for (var _a = 0, unfoundSources_1 = unfoundSources; _a < unfoundSources_1.length; _a++) {\n        var unfoundSource = unfoundSources_1[_a];\n        calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: unfoundSource.sourceId\n        });\n    }\n    for (var _b = 0, newInputs_1 = newInputs; _b < newInputs_1.length; _b++) {\n        var newInput = newInputs_1[_b];\n        calendar.addEventSource(newInput);\n    }\n}\n// shortcoming: won't remove plugins\nfunction handlePlugins(inputs, calendar) {\n    calendar.addPluginInputs(inputs); // will gracefully handle duplicates\n}\n\nvar config = {}; // TODO: make these options\nvar globalDefaults = {\n    defaultRangeSeparator: ' - ',\n    titleRangeSeparator: ' \\u2013 ',\n    defaultTimedEventDuration: '01:00:00',\n    defaultAllDayEventDuration: { day: 1 },\n    forceEventDuration: false,\n    nextDayThreshold: '00:00:00',\n    // display\n    columnHeader: true,\n    defaultView: '',\n    aspectRatio: 1.35,\n    header: {\n        left: 'title',\n        center: '',\n        right: 'today prev,next'\n    },\n    weekends: true,\n    weekNumbers: false,\n    weekNumberCalculation: 'local',\n    editable: false,\n    // nowIndicator: false,\n    scrollTime: '06:00:00',\n    minTime: '00:00:00',\n    maxTime: '24:00:00',\n    showNonCurrentDates: true,\n    // event ajax\n    lazyFetching: true,\n    startParam: 'start',\n    endParam: 'end',\n    timeZoneParam: 'timeZone',\n    timeZone: 'local',\n    // allDayDefault: undefined,\n    // locale\n    locales: [],\n    locale: '',\n    // dir: will get this from the default locale\n    // buttonIcons: null,\n    // allows setting a min-height to the event segment to prevent short events overlapping each other\n    timeGridEventMinHeight: 0,\n    themeSystem: 'standard',\n    // eventResizableFromStart: false,\n    dragRevertDuration: 500,\n    dragScroll: true,\n    allDayMaintainDuration: false,\n    // selectable: false,\n    unselectAuto: true,\n    // selectMinDistance: 0,\n    dropAccept: '*',\n    eventOrder: 'start,-duration,allDay,title',\n    // ^ if start tie, longer events go before shorter. final tie-breaker is title text\n    // rerenderDelay: null,\n    eventLimit: false,\n    eventLimitClick: 'popover',\n    dayPopoverFormat: { month: 'long', day: 'numeric', year: 'numeric' },\n    handleWindowResize: true,\n    windowResizeDelay: 100,\n    longPressDelay: 1000,\n    eventDragMinDistance: 5 // only applies to mouse\n};\nvar rtlDefaults = {\n    header: {\n        left: 'next,prev today',\n        center: '',\n        right: 'title'\n    },\n    buttonIcons: {\n        // TODO: make RTL support the responibility of the theme\n        prev: 'fc-icon-chevron-right',\n        next: 'fc-icon-chevron-left',\n        prevYear: 'fc-icon-chevrons-right',\n        nextYear: 'fc-icon-chevrons-left'\n    }\n};\nvar complexOptions = [\n    'header',\n    'footer',\n    'buttonText',\n    'buttonIcons'\n];\n// Merges an array of option objects into a single object\nfunction mergeOptions(optionObjs) {\n    return mergeProps(optionObjs, complexOptions);\n}\n// TODO: move this stuff to a \"plugin\"-related file...\nvar INTERNAL_PLUGINS = [\n    ArrayEventSourcePlugin,\n    FuncEventSourcePlugin,\n    JsonFeedEventSourcePlugin,\n    SimpleRecurrencePlugin,\n    DefaultOptionChangeHandlers\n];\nfunction refinePluginDefs(pluginInputs) {\n    var plugins = [];\n    for (var _i = 0, pluginInputs_1 = pluginInputs; _i < pluginInputs_1.length; _i++) {\n        var pluginInput = pluginInputs_1[_i];\n        if (typeof pluginInput === 'string') {\n            var globalName = 'FullCalendar' + capitaliseFirstLetter(pluginInput);\n            if (!window[globalName]) {\n                console.warn('Plugin file not loaded for ' + pluginInput);\n            }\n            else {\n                plugins.push(window[globalName].default); // is an ES6 module\n            }\n        }\n        else {\n            plugins.push(pluginInput);\n        }\n    }\n    return INTERNAL_PLUGINS.concat(plugins);\n}\n\nvar RAW_EN_LOCALE = {\n    code: 'en',\n    week: {\n        dow: 0,\n        doy: 4 // 4 days need to be within the year to be considered the first week\n    },\n    dir: 'ltr',\n    buttonText: {\n        prev: 'prev',\n        next: 'next',\n        prevYear: 'prev year',\n        nextYear: 'next year',\n        year: 'year',\n        today: 'today',\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        list: 'list'\n    },\n    weekLabel: 'W',\n    allDayText: 'all-day',\n    eventLimitText: 'more',\n    noEventsMessage: 'No events to display'\n};\nfunction parseRawLocales(explicitRawLocales) {\n    var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n    var globalArray = window['FullCalendarLocalesAll'] || []; // from locales-all.js\n    var globalObject = window['FullCalendarLocales'] || {}; // from locales/*.js. keys are meaningless\n    var allRawLocales = globalArray.concat(// globalArray is low prio\n    hashValuesToArray(globalObject), // medium prio\n    explicitRawLocales // highest prio\n    );\n    var rawLocaleMap = {\n        en: RAW_EN_LOCALE // necessary?\n    };\n    for (var _i = 0, allRawLocales_1 = allRawLocales; _i < allRawLocales_1.length; _i++) {\n        var rawLocale = allRawLocales_1[_i];\n        rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n    return {\n        map: rawLocaleMap,\n        defaultCode: defaultCode\n    };\n}\nfunction buildLocale(inputSingular, available) {\n    if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n        return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n    }\n    else {\n        return queryLocale(inputSingular, available);\n    }\n}\nfunction queryLocale(codeArg, available) {\n    var codes = [].concat(codeArg || []); // will convert to array\n    var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n    return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n    for (var i = 0; i < codes.length; i++) {\n        var parts = codes[i].toLocaleLowerCase().split('-');\n        for (var j = parts.length; j > 0; j--) {\n            var simpleId = parts.slice(0, j).join('-');\n            if (available[simpleId]) {\n                return available[simpleId];\n            }\n        }\n    }\n    return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n    var merged = mergeProps([RAW_EN_LOCALE, raw], ['buttonText']);\n    delete merged.code; // don't want this part of the options\n    var week = merged.week;\n    delete merged.week;\n    return {\n        codeArg: codeArg,\n        codes: codes,\n        week: week,\n        simpleNumberFormat: new Intl.NumberFormat(codeArg),\n        options: merged\n    };\n}\n\nvar OptionsManager = /** @class */ (function () {\n    function OptionsManager(overrides) {\n        this.overrides = __assign({}, overrides); // make a copy\n        this.dynamicOverrides = {};\n        this.compute();\n    }\n    OptionsManager.prototype.mutate = function (updates, removals, isDynamic) {\n        if (!Object.keys(updates).length && !removals.length) {\n            return;\n        }\n        var overrideHash = isDynamic ? this.dynamicOverrides : this.overrides;\n        __assign(overrideHash, updates);\n        for (var _i = 0, removals_1 = removals; _i < removals_1.length; _i++) {\n            var propName = removals_1[_i];\n            delete overrideHash[propName];\n        }\n        this.compute();\n    };\n    // Computes the flattened options hash for the calendar and assigns to `this.options`.\n    // Assumes this.overrides and this.dynamicOverrides have already been initialized.\n    OptionsManager.prototype.compute = function () {\n        // TODO: not a very efficient system\n        var locales = firstDefined(// explicit locale option given?\n        this.dynamicOverrides.locales, this.overrides.locales, globalDefaults.locales);\n        var locale = firstDefined(// explicit locales option given?\n        this.dynamicOverrides.locale, this.overrides.locale, globalDefaults.locale);\n        var available = parseRawLocales(locales);\n        var localeDefaults = buildLocale(locale || available.defaultCode, available.map).options;\n        var dir = firstDefined(// based on options computed so far, is direction RTL?\n        this.dynamicOverrides.dir, this.overrides.dir, localeDefaults.dir);\n        var dirDefaults = dir === 'rtl' ? rtlDefaults : {};\n        this.dirDefaults = dirDefaults;\n        this.localeDefaults = localeDefaults;\n        this.computed = mergeOptions([\n            globalDefaults,\n            dirDefaults,\n            localeDefaults,\n            this.overrides,\n            this.dynamicOverrides\n        ]);\n    };\n    return OptionsManager;\n}());\n\nvar calendarSystemClassMap = {};\nfunction registerCalendarSystem(name, theClass) {\n    calendarSystemClassMap[name] = theClass;\n}\nfunction createCalendarSystem(name) {\n    return new calendarSystemClassMap[name]();\n}\nvar GregorianCalendarSystem = /** @class */ (function () {\n    function GregorianCalendarSystem() {\n    }\n    GregorianCalendarSystem.prototype.getMarkerYear = function (d) {\n        return d.getUTCFullYear();\n    };\n    GregorianCalendarSystem.prototype.getMarkerMonth = function (d) {\n        return d.getUTCMonth();\n    };\n    GregorianCalendarSystem.prototype.getMarkerDay = function (d) {\n        return d.getUTCDate();\n    };\n    GregorianCalendarSystem.prototype.arrayToMarker = function (arr) {\n        return arrayToUtcDate(arr);\n    };\n    GregorianCalendarSystem.prototype.markerToArray = function (marker) {\n        return dateToUtcArray(marker);\n    };\n    return GregorianCalendarSystem;\n}());\nregisterCalendarSystem('gregory', GregorianCalendarSystem);\n\nvar ISO_RE = /^\\s*(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2}))?))?)?)?)?$/;\nfunction parse(str) {\n    var m = ISO_RE.exec(str);\n    if (m) {\n        var marker = new Date(Date.UTC(Number(m[1]), m[3] ? Number(m[3]) - 1 : 0, Number(m[5] || 1), Number(m[7] || 0), Number(m[8] || 0), Number(m[10] || 0), m[12] ? Number('0.' + m[12]) * 1000 : 0));\n        if (isValidDate(marker)) {\n            var timeZoneOffset = null;\n            if (m[13]) {\n                timeZoneOffset = (m[15] === '-' ? -1 : 1) * (Number(m[16] || 0) * 60 +\n                    Number(m[18] || 0));\n            }\n            return {\n                marker: marker,\n                isTimeUnspecified: !m[6],\n                timeZoneOffset: timeZoneOffset\n            };\n        }\n    }\n    return null;\n}\n\nvar DateEnv = /** @class */ (function () {\n    function DateEnv(settings) {\n        var timeZone = this.timeZone = settings.timeZone;\n        var isNamedTimeZone = timeZone !== 'local' && timeZone !== 'UTC';\n        if (settings.namedTimeZoneImpl && isNamedTimeZone) {\n            this.namedTimeZoneImpl = new settings.namedTimeZoneImpl(timeZone);\n        }\n        this.canComputeOffset = Boolean(!isNamedTimeZone || this.namedTimeZoneImpl);\n        this.calendarSystem = createCalendarSystem(settings.calendarSystem);\n        this.locale = settings.locale;\n        this.weekDow = settings.locale.week.dow;\n        this.weekDoy = settings.locale.week.doy;\n        if (settings.weekNumberCalculation === 'ISO') {\n            this.weekDow = 1;\n            this.weekDoy = 4;\n        }\n        if (typeof settings.firstDay === 'number') {\n            this.weekDow = settings.firstDay;\n        }\n        if (typeof settings.weekNumberCalculation === 'function') {\n            this.weekNumberFunc = settings.weekNumberCalculation;\n        }\n        this.weekLabel = settings.weekLabel != null ? settings.weekLabel : settings.locale.options.weekLabel;\n        this.cmdFormatter = settings.cmdFormatter;\n    }\n    // Creating / Parsing\n    DateEnv.prototype.createMarker = function (input) {\n        var meta = this.createMarkerMeta(input);\n        if (meta === null) {\n            return null;\n        }\n        return meta.marker;\n    };\n    DateEnv.prototype.createNowMarker = function () {\n        if (this.canComputeOffset) {\n            return this.timestampToMarker(new Date().valueOf());\n        }\n        else {\n            // if we can't compute the current date val for a timezone,\n            // better to give the current local date vals than UTC\n            return arrayToUtcDate(dateToLocalArray(new Date()));\n        }\n    };\n    DateEnv.prototype.createMarkerMeta = function (input) {\n        if (typeof input === 'string') {\n            return this.parse(input);\n        }\n        var marker = null;\n        if (typeof input === 'number') {\n            marker = this.timestampToMarker(input);\n        }\n        else if (input instanceof Date) {\n            input = input.valueOf();\n            if (!isNaN(input)) {\n                marker = this.timestampToMarker(input);\n            }\n        }\n        else if (Array.isArray(input)) {\n            marker = arrayToUtcDate(input);\n        }\n        if (marker === null || !isValidDate(marker)) {\n            return null;\n        }\n        return { marker: marker, isTimeUnspecified: false, forcedTzo: null };\n    };\n    DateEnv.prototype.parse = function (s) {\n        var parts = parse(s);\n        if (parts === null) {\n            return null;\n        }\n        var marker = parts.marker;\n        var forcedTzo = null;\n        if (parts.timeZoneOffset !== null) {\n            if (this.canComputeOffset) {\n                marker = this.timestampToMarker(marker.valueOf() - parts.timeZoneOffset * 60 * 1000);\n            }\n            else {\n                forcedTzo = parts.timeZoneOffset;\n            }\n        }\n        return { marker: marker, isTimeUnspecified: parts.isTimeUnspecified, forcedTzo: forcedTzo };\n    };\n    // Accessors\n    DateEnv.prototype.getYear = function (marker) {\n        return this.calendarSystem.getMarkerYear(marker);\n    };\n    DateEnv.prototype.getMonth = function (marker) {\n        return this.calendarSystem.getMarkerMonth(marker);\n    };\n    // Adding / Subtracting\n    DateEnv.prototype.add = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += dur.years;\n        a[1] += dur.months;\n        a[2] += dur.days;\n        a[6] += dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.subtract = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] -= dur.years;\n        a[1] -= dur.months;\n        a[2] -= dur.days;\n        a[6] -= dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addYears = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addMonths = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[1] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    // Diffing Whole Units\n    DateEnv.prototype.diffWholeYears = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1) &&\n            calendarSystem.getMarkerMonth(m0) === calendarSystem.getMarkerMonth(m1)) {\n            return calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0);\n        }\n        return null;\n    };\n    DateEnv.prototype.diffWholeMonths = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1)) {\n            return (calendarSystem.getMarkerMonth(m1) - calendarSystem.getMarkerMonth(m0)) +\n                (calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0)) * 12;\n        }\n        return null;\n    };\n    // Range / Duration\n    DateEnv.prototype.greatestWholeUnit = function (m0, m1) {\n        var n = this.diffWholeYears(m0, m1);\n        if (n !== null) {\n            return { unit: 'year', value: n };\n        }\n        n = this.diffWholeMonths(m0, m1);\n        if (n !== null) {\n            return { unit: 'month', value: n };\n        }\n        n = diffWholeWeeks(m0, m1);\n        if (n !== null) {\n            return { unit: 'week', value: n };\n        }\n        n = diffWholeDays(m0, m1);\n        if (n !== null) {\n            return { unit: 'day', value: n };\n        }\n        n = diffHours(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'hour', value: n };\n        }\n        n = diffMinutes(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'minute', value: n };\n        }\n        n = diffSeconds(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'second', value: n };\n        }\n        return { unit: 'millisecond', value: m1.valueOf() - m0.valueOf() };\n    };\n    DateEnv.prototype.countDurationsBetween = function (m0, m1, d) {\n        // TODO: can use greatestWholeUnit\n        var diff;\n        if (d.years) {\n            diff = this.diffWholeYears(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughYears(d);\n            }\n        }\n        if (d.months) {\n            diff = this.diffWholeMonths(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughMonths(d);\n            }\n        }\n        if (d.days) {\n            diff = diffWholeDays(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughDays(d);\n            }\n        }\n        return (m1.valueOf() - m0.valueOf()) / asRoughMs(d);\n    };\n    // Start-Of\n    DateEnv.prototype.startOf = function (m, unit) {\n        if (unit === 'year') {\n            return this.startOfYear(m);\n        }\n        else if (unit === 'month') {\n            return this.startOfMonth(m);\n        }\n        else if (unit === 'week') {\n            return this.startOfWeek(m);\n        }\n        else if (unit === 'day') {\n            return startOfDay(m);\n        }\n        else if (unit === 'hour') {\n            return startOfHour(m);\n        }\n        else if (unit === 'minute') {\n            return startOfMinute(m);\n        }\n        else if (unit === 'second') {\n            return startOfSecond(m);\n        }\n    };\n    DateEnv.prototype.startOfYear = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m)\n        ]);\n    };\n    DateEnv.prototype.startOfMonth = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m)\n        ]);\n    };\n    DateEnv.prototype.startOfWeek = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m),\n            m.getUTCDate() - ((m.getUTCDay() - this.weekDow + 7) % 7)\n        ]);\n    };\n    // Week Number\n    DateEnv.prototype.computeWeekNumber = function (marker) {\n        if (this.weekNumberFunc) {\n            return this.weekNumberFunc(this.toDate(marker));\n        }\n        else {\n            return weekOfYear(marker, this.weekDow, this.weekDoy);\n        }\n    };\n    // TODO: choke on timeZoneName: long\n    DateEnv.prototype.format = function (marker, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        return formatter.format({\n            marker: marker,\n            timeZoneOffset: dateOptions.forcedTzo != null ?\n                dateOptions.forcedTzo :\n                this.offsetForMarker(marker)\n        }, this);\n    };\n    DateEnv.prototype.formatRange = function (start, end, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        if (dateOptions.isEndExclusive) {\n            end = addMs(end, -1);\n        }\n        return formatter.formatRange({\n            marker: start,\n            timeZoneOffset: dateOptions.forcedStartTzo != null ?\n                dateOptions.forcedStartTzo :\n                this.offsetForMarker(start)\n        }, {\n            marker: end,\n            timeZoneOffset: dateOptions.forcedEndTzo != null ?\n                dateOptions.forcedEndTzo :\n                this.offsetForMarker(end)\n        }, this);\n    };\n    DateEnv.prototype.formatIso = function (marker, extraOptions) {\n        if (extraOptions === void 0) { extraOptions = {}; }\n        var timeZoneOffset = null;\n        if (!extraOptions.omitTimeZoneOffset) {\n            if (extraOptions.forcedTzo != null) {\n                timeZoneOffset = extraOptions.forcedTzo;\n            }\n            else {\n                timeZoneOffset = this.offsetForMarker(marker);\n            }\n        }\n        return buildIsoString(marker, timeZoneOffset, extraOptions.omitTime);\n    };\n    // TimeZone\n    DateEnv.prototype.timestampToMarker = function (ms) {\n        if (this.timeZone === 'local') {\n            return arrayToUtcDate(dateToLocalArray(new Date(ms)));\n        }\n        else if (this.timeZone === 'UTC' || !this.namedTimeZoneImpl) {\n            return new Date(ms);\n        }\n        else {\n            return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));\n        }\n    };\n    DateEnv.prototype.offsetForMarker = function (m) {\n        if (this.timeZone === 'local') {\n            return -arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset(); // convert \"inverse\" offset to \"normal\" offset\n        }\n        else if (this.timeZone === 'UTC') {\n            return 0;\n        }\n        else if (this.namedTimeZoneImpl) {\n            return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));\n        }\n        return null;\n    };\n    // Conversion\n    DateEnv.prototype.toDate = function (m, forcedTzo) {\n        if (this.timeZone === 'local') {\n            return arrayToLocalDate(dateToUtcArray(m));\n        }\n        else if (this.timeZone === 'UTC') {\n            return new Date(m.valueOf()); // make sure it's a copy\n        }\n        else if (!this.namedTimeZoneImpl) {\n            return new Date(m.valueOf() - (forcedTzo || 0));\n        }\n        else {\n            return new Date(m.valueOf() -\n                this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m)) * 1000 * 60 // convert minutes -> ms\n            );\n        }\n    };\n    return DateEnv;\n}());\n\nvar SIMPLE_SOURCE_PROPS = {\n    id: String,\n    allDayDefault: Boolean,\n    eventDataTransform: Function,\n    success: Function,\n    failure: Function\n};\nvar uid$2 = 0;\nfunction doesSourceNeedRange(eventSource, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    return !defs[eventSource.sourceDefId].ignoreRange;\n}\nfunction parseEventSource(raw, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    for (var i = defs.length - 1; i >= 0; i--) { // later-added plugins take precedence\n        var def = defs[i];\n        var meta = def.parseMeta(raw);\n        if (meta) {\n            var res = parseEventSourceProps(typeof raw === 'object' ? raw : {}, meta, i, calendar);\n            res._raw = raw;\n            return res;\n        }\n    }\n    return null;\n}\nfunction parseEventSourceProps(raw, meta, sourceDefId, calendar) {\n    var leftovers0 = {};\n    var props = refineProps(raw, SIMPLE_SOURCE_PROPS, {}, leftovers0);\n    var leftovers1 = {};\n    var ui = processUnscopedUiProps(leftovers0, calendar, leftovers1);\n    props.isFetching = false;\n    props.latestFetchId = '';\n    props.fetchRange = null;\n    props.publicId = String(raw.id || '');\n    props.sourceId = String(uid$2++);\n    props.sourceDefId = sourceDefId;\n    props.meta = meta;\n    props.ui = ui;\n    props.extendedProps = leftovers1;\n    return props;\n}\n\nfunction reduceEventSources (eventSources, action, dateProfile, calendar) {\n    switch (action.type) {\n        case 'ADD_EVENT_SOURCES': // already parsed\n            return addSources(eventSources, action.sources, dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'REMOVE_EVENT_SOURCE':\n            return removeSource(eventSources, action.sourceId);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return fetchDirtySources(eventSources, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventSources;\n            }\n        case 'FETCH_EVENT_SOURCES':\n        case 'CHANGE_TIMEZONE':\n            return fetchSourcesByIds(eventSources, action.sourceIds ?\n                arrayToHash(action.sourceIds) :\n                excludeStaticSources(eventSources, calendar), dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'RECEIVE_EVENTS':\n        case 'RECEIVE_EVENT_ERROR':\n            return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return {};\n        default:\n            return eventSources;\n    }\n}\nvar uid$3 = 0;\nfunction addSources(eventSourceHash, sources, fetchRange, calendar) {\n    var hash = {};\n    for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n        var source = sources_1[_i];\n        hash[source.sourceId] = source;\n    }\n    if (fetchRange) {\n        hash = fetchDirtySources(hash, fetchRange, calendar);\n    }\n    return __assign({}, eventSourceHash, hash);\n}\nfunction removeSource(eventSourceHash, sourceId) {\n    return filterHash(eventSourceHash, function (eventSource) {\n        return eventSource.sourceId !== sourceId;\n    });\n}\nfunction fetchDirtySources(sourceHash, fetchRange, calendar) {\n    return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) {\n        return isSourceDirty(eventSource, fetchRange, calendar);\n    }), fetchRange, calendar);\n}\nfunction isSourceDirty(eventSource, fetchRange, calendar) {\n    if (!doesSourceNeedRange(eventSource, calendar)) {\n        return !eventSource.latestFetchId;\n    }\n    else {\n        return !calendar.opt('lazyFetching') ||\n            !eventSource.fetchRange ||\n            eventSource.isFetching || // always cancel outdated in-progress fetches\n            fetchRange.start < eventSource.fetchRange.start ||\n            fetchRange.end > eventSource.fetchRange.end;\n    }\n}\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, calendar) {\n    var nextSources = {};\n    for (var sourceId in prevSources) {\n        var source = prevSources[sourceId];\n        if (sourceIdHash[sourceId]) {\n            nextSources[sourceId] = fetchSource(source, fetchRange, calendar);\n        }\n        else {\n            nextSources[sourceId] = source;\n        }\n    }\n    return nextSources;\n}\nfunction fetchSource(eventSource, fetchRange, calendar) {\n    var sourceDef = calendar.pluginSystem.hooks.eventSourceDefs[eventSource.sourceDefId];\n    var fetchId = String(uid$3++);\n    sourceDef.fetch({\n        eventSource: eventSource,\n        calendar: calendar,\n        range: fetchRange\n    }, function (res) {\n        var rawEvents = res.rawEvents;\n        var calSuccess = calendar.opt('eventSourceSuccess');\n        var calSuccessRes;\n        var sourceSuccessRes;\n        if (eventSource.success) {\n            sourceSuccessRes = eventSource.success(rawEvents, res.xhr);\n        }\n        if (calSuccess) {\n            calSuccessRes = calSuccess(rawEvents, res.xhr);\n        }\n        rawEvents = sourceSuccessRes || calSuccessRes || rawEvents;\n        calendar.dispatch({\n            type: 'RECEIVE_EVENTS',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            rawEvents: rawEvents\n        });\n    }, function (error) {\n        var callFailure = calendar.opt('eventSourceFailure');\n        console.warn(error.message, error);\n        if (eventSource.failure) {\n            eventSource.failure(error);\n        }\n        if (callFailure) {\n            callFailure(error);\n        }\n        calendar.dispatch({\n            type: 'RECEIVE_EVENT_ERROR',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            error: error\n        });\n    });\n    return __assign({}, eventSource, { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n    var _a;\n    var eventSource = sourceHash[sourceId];\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId) {\n        return __assign({}, sourceHash, (_a = {}, _a[sourceId] = __assign({}, eventSource, { isFetching: false, fetchRange: fetchRange // also serves as a marker that at least one fetch has completed\n         }), _a));\n    }\n    return sourceHash;\n}\nfunction excludeStaticSources(eventSources, calendar) {\n    return filterHash(eventSources, function (eventSource) {\n        return doesSourceNeedRange(eventSource, calendar);\n    });\n}\n\nvar DateProfileGenerator = /** @class */ (function () {\n    function DateProfileGenerator(viewSpec, calendar) {\n        this.viewSpec = viewSpec;\n        this.options = viewSpec.options;\n        this.dateEnv = calendar.dateEnv;\n        this.calendar = calendar;\n        this.initHiddenDays();\n    }\n    /* Date Range Computation\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n    DateProfileGenerator.prototype.buildPrev = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var prevDate = dateEnv.subtract(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(prevDate, -1);\n    };\n    // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n    DateProfileGenerator.prototype.buildNext = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var nextDate = dateEnv.add(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(nextDate, 1);\n    };\n    // Builds a structure holding dates/ranges for rendering around the given date.\n    // Optional direction param indicates whether the date is being incremented/decremented\n    // from its previous value. decremented = -1, incremented = 1 (default).\n    DateProfileGenerator.prototype.build = function (currentDate, direction, forceToValid) {\n        if (forceToValid === void 0) { forceToValid = false; }\n        var validRange;\n        var minTime = null;\n        var maxTime = null;\n        var currentInfo;\n        var isRangeAllDay;\n        var renderRange;\n        var activeRange;\n        var isValid;\n        validRange = this.buildValidRange();\n        validRange = this.trimHiddenDays(validRange);\n        if (forceToValid) {\n            currentDate = constrainMarkerToRange(currentDate, validRange);\n        }\n        currentInfo = this.buildCurrentRangeInfo(currentDate, direction);\n        isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n        renderRange = this.buildRenderRange(this.trimHiddenDays(currentInfo.range), currentInfo.unit, isRangeAllDay);\n        renderRange = this.trimHiddenDays(renderRange);\n        activeRange = renderRange;\n        if (!this.options.showNonCurrentDates) {\n            activeRange = intersectRanges(activeRange, currentInfo.range);\n        }\n        minTime = createDuration(this.options.minTime);\n        maxTime = createDuration(this.options.maxTime);\n        activeRange = this.adjustActiveRange(activeRange, minTime, maxTime);\n        activeRange = intersectRanges(activeRange, validRange); // might return null\n        // it's invalid if the originally requested date is not contained,\n        // or if the range is completely outside of the valid range.\n        isValid = rangesIntersect(currentInfo.range, validRange);\n        return {\n            // constraint for where prev/next operations can go and where events can be dragged/resized to.\n            // an object with optional start and end properties.\n            validRange: validRange,\n            // range the view is formally responsible for.\n            // for example, a month view might have 1st-31st, excluding padded dates\n            currentRange: currentInfo.range,\n            // name of largest unit being displayed, like \"month\" or \"week\"\n            currentRangeUnit: currentInfo.unit,\n            isRangeAllDay: isRangeAllDay,\n            // dates that display events and accept drag-n-drop\n            // will be `null` if no dates accept events\n            activeRange: activeRange,\n            // date range with a rendered skeleton\n            // includes not-active days that need some sort of DOM\n            renderRange: renderRange,\n            // Duration object that denotes the first visible time of any given day\n            minTime: minTime,\n            // Duration object that denotes the exclusive visible end time of any given day\n            maxTime: maxTime,\n            isValid: isValid,\n            // how far the current date will move for a prev/next operation\n            dateIncrement: this.buildDateIncrement(currentInfo.duration)\n            // pass a fallback (might be null) ^\n        };\n    };\n    // Builds an object with optional start/end properties.\n    // Indicates the minimum/maximum dates to display.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildValidRange = function () {\n        return this.getRangeOption('validRange', this.calendar.getNow()) ||\n            { start: null, end: null }; // completely open-ended\n    };\n    // Builds a structure with info about the \"current\" range, the range that is\n    // highlighted as being the current month for example.\n    // See build() for a description of `direction`.\n    // Guaranteed to have `range` and `unit` properties. `duration` is optional.\n    DateProfileGenerator.prototype.buildCurrentRangeInfo = function (date, direction) {\n        var _a = this, viewSpec = _a.viewSpec, dateEnv = _a.dateEnv;\n        var duration = null;\n        var unit = null;\n        var range = null;\n        var dayCount;\n        if (viewSpec.duration) {\n            duration = viewSpec.duration;\n            unit = viewSpec.durationUnit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        else if ((dayCount = this.options.dayCount)) {\n            unit = 'day';\n            range = this.buildRangeFromDayCount(date, direction, dayCount);\n        }\n        else if ((range = this.buildCustomVisibleRange(date))) {\n            unit = dateEnv.greatestWholeUnit(range.start, range.end).unit;\n        }\n        else {\n            duration = this.getFallbackDuration();\n            unit = greatestDurationDenominator(duration).unit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        return { duration: duration, unit: unit, range: range };\n    };\n    DateProfileGenerator.prototype.getFallbackDuration = function () {\n        return createDuration({ day: 1 });\n    };\n    // Returns a new activeRange to have time values (un-ambiguate)\n    // minTime or maxTime causes the range to expand.\n    DateProfileGenerator.prototype.adjustActiveRange = function (range, minTime, maxTime) {\n        var dateEnv = this.dateEnv;\n        var start = range.start;\n        var end = range.end;\n        if (this.viewSpec.class.prototype.usesMinMaxTime) {\n            // expand active range if minTime is negative (why not when positive?)\n            if (asRoughDays(minTime) < 0) {\n                start = startOfDay(start); // necessary?\n                start = dateEnv.add(start, minTime);\n            }\n            // expand active range if maxTime is beyond one day (why not when positive?)\n            if (asRoughDays(maxTime) > 1) {\n                end = startOfDay(end); // necessary?\n                end = addDays(end, -1);\n                end = dateEnv.add(end, maxTime);\n            }\n        }\n        return { start: start, end: end };\n    };\n    // Builds the \"current\" range when it is specified as an explicit duration.\n    // `unit` is the already-computed greatestDurationDenominator unit of duration.\n    DateProfileGenerator.prototype.buildRangeFromDuration = function (date, direction, duration, unit) {\n        var dateEnv = this.dateEnv;\n        var alignment = this.options.dateAlignment;\n        var dateIncrementInput;\n        var dateIncrementDuration;\n        var start;\n        var end;\n        var res;\n        // compute what the alignment should be\n        if (!alignment) {\n            dateIncrementInput = this.options.dateIncrement;\n            if (dateIncrementInput) {\n                dateIncrementDuration = createDuration(dateIncrementInput);\n                // use the smaller of the two units\n                if (asRoughMs(dateIncrementDuration) < asRoughMs(duration)) {\n                    alignment = greatestDurationDenominator(dateIncrementDuration, !getWeeksFromInput(dateIncrementInput)).unit;\n                }\n                else {\n                    alignment = unit;\n                }\n            }\n            else {\n                alignment = unit;\n            }\n        }\n        // if the view displays a single day or smaller\n        if (asRoughDays(duration) <= 1) {\n            if (this.isHiddenDay(start)) {\n                start = this.skipHiddenDays(start, direction);\n                start = startOfDay(start);\n            }\n        }\n        function computeRes() {\n            start = dateEnv.startOf(date, alignment);\n            end = dateEnv.add(start, duration);\n            res = { start: start, end: end };\n        }\n        computeRes();\n        // if range is completely enveloped by hidden days, go past the hidden days\n        if (!this.trimHiddenDays(res)) {\n            date = this.skipHiddenDays(date, direction);\n            computeRes();\n        }\n        return res;\n    };\n    // Builds the \"current\" range when a dayCount is specified.\n    DateProfileGenerator.prototype.buildRangeFromDayCount = function (date, direction, dayCount) {\n        var dateEnv = this.dateEnv;\n        var customAlignment = this.options.dateAlignment;\n        var runningCount = 0;\n        var start = date;\n        var end;\n        if (customAlignment) {\n            start = dateEnv.startOf(start, customAlignment);\n        }\n        start = startOfDay(start);\n        start = this.skipHiddenDays(start, direction);\n        end = start;\n        do {\n            end = addDays(end, 1);\n            if (!this.isHiddenDay(end)) {\n                runningCount++;\n            }\n        } while (runningCount < dayCount);\n        return { start: start, end: end };\n    };\n    // Builds a normalized range object for the \"visible\" range,\n    // which is a way to define the currentRange and activeRange at the same time.\n    DateProfileGenerator.prototype.buildCustomVisibleRange = function (date) {\n        var dateEnv = this.dateEnv;\n        var visibleRange = this.getRangeOption('visibleRange', dateEnv.toDate(date));\n        if (visibleRange && (visibleRange.start == null || visibleRange.end == null)) {\n            return null;\n        }\n        return visibleRange;\n    };\n    // Computes the range that will represent the element/cells for *rendering*,\n    // but which may have voided days/times.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        return currentRange;\n    };\n    // Compute the duration value that should be added/substracted to the current date\n    // when a prev/next operation happens.\n    DateProfileGenerator.prototype.buildDateIncrement = function (fallback) {\n        var dateIncrementInput = this.options.dateIncrement;\n        var customAlignment;\n        if (dateIncrementInput) {\n            return createDuration(dateIncrementInput);\n        }\n        else if ((customAlignment = this.options.dateAlignment)) {\n            return createDuration(1, customAlignment);\n        }\n        else if (fallback) {\n            return fallback;\n        }\n        else {\n            return createDuration({ days: 1 });\n        }\n    };\n    // Arguments after name will be forwarded to a hypothetical function value\n    // WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\n    // Always clone your objects if you fear mutation.\n    DateProfileGenerator.prototype.getRangeOption = function (name) {\n        var otherArgs = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            otherArgs[_i - 1] = arguments[_i];\n        }\n        var val = this.options[name];\n        if (typeof val === 'function') {\n            val = val.apply(null, otherArgs);\n        }\n        if (val) {\n            val = parseRange(val, this.dateEnv);\n        }\n        if (val) {\n            val = computeVisibleDayRange(val);\n        }\n        return val;\n    };\n    /* Hidden Days\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Initializes internal variables related to calculating hidden days-of-week\n    DateProfileGenerator.prototype.initHiddenDays = function () {\n        var hiddenDays = this.options.hiddenDays || []; // array of day-of-week indices that are hidden\n        var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n        var dayCnt = 0;\n        var i;\n        if (this.options.weekends === false) {\n            hiddenDays.push(0, 6); // 0=sunday, 6=saturday\n        }\n        for (i = 0; i < 7; i++) {\n            if (!(isHiddenDayHash[i] = hiddenDays.indexOf(i) !== -1)) {\n                dayCnt++;\n            }\n        }\n        if (!dayCnt) {\n            throw new Error('invalid hiddenDays'); // all days were hidden? bad.\n        }\n        this.isHiddenDayHash = isHiddenDayHash;\n    };\n    // Remove days from the beginning and end of the range that are computed as hidden.\n    // If the whole range is trimmed off, returns null\n    DateProfileGenerator.prototype.trimHiddenDays = function (range) {\n        var start = range.start;\n        var end = range.end;\n        if (start) {\n            start = this.skipHiddenDays(start);\n        }\n        if (end) {\n            end = this.skipHiddenDays(end, -1, true);\n        }\n        if (start == null || end == null || start < end) {\n            return { start: start, end: end };\n        }\n        return null;\n    };\n    // Is the current day hidden?\n    // `day` is a day-of-week index (0-6), or a Date (used for UTC)\n    DateProfileGenerator.prototype.isHiddenDay = function (day) {\n        if (day instanceof Date) {\n            day = day.getUTCDay();\n        }\n        return this.isHiddenDayHash[day];\n    };\n    // Incrementing the current day until it is no longer a hidden day, returning a copy.\n    // DOES NOT CONSIDER validRange!\n    // If the initial value of `date` is not a hidden day, don't do anything.\n    // Pass `isExclusive` as `true` if you are dealing with an end date.\n    // `inc` defaults to `1` (increment one day forward each time)\n    DateProfileGenerator.prototype.skipHiddenDays = function (date, inc, isExclusive) {\n        if (inc === void 0) { inc = 1; }\n        if (isExclusive === void 0) { isExclusive = false; }\n        while (this.isHiddenDayHash[(date.getUTCDay() + (isExclusive ? inc : 0) + 7) % 7]) {\n            date = addDays(date, inc);\n        }\n        return date;\n    };\n    return DateProfileGenerator;\n}());\n// TODO: find a way to avoid comparing DateProfiles. it's tedious\nfunction isDateProfilesEqual(p0, p1) {\n    return rangesEqual(p0.validRange, p1.validRange) &&\n        rangesEqual(p0.activeRange, p1.activeRange) &&\n        rangesEqual(p0.renderRange, p1.renderRange) &&\n        durationsEqual(p0.minTime, p1.minTime) &&\n        durationsEqual(p0.maxTime, p1.maxTime);\n    /*\n    TODO: compare more?\n      currentRange: DateRange\n      currentRangeUnit: string\n      isRangeAllDay: boolean\n      isValid: boolean\n      dateIncrement: Duration\n    */\n}\n\nfunction reduce (state, action, calendar) {\n    var viewType = reduceViewType(state.viewType, action);\n    var dateProfile = reduceDateProfile(state.dateProfile, action, state.currentDate, viewType, calendar);\n    var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendar);\n    var nextState = __assign({}, state, { viewType: viewType,\n        dateProfile: dateProfile, currentDate: reduceCurrentDate(state.currentDate, action, dateProfile), eventSources: eventSources, eventStore: reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendar), dateSelection: reduceDateSelection(state.dateSelection, action, calendar), eventSelection: reduceSelectedEvent(state.eventSelection, action), eventDrag: reduceEventDrag(state.eventDrag, action, eventSources, calendar), eventResize: reduceEventResize(state.eventResize, action, eventSources, calendar), eventSourceLoadingLevel: computeLoadingLevel(eventSources), loadingLevel: computeLoadingLevel(eventSources) });\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.reducers; _i < _a.length; _i++) {\n        var reducerFunc = _a[_i];\n        nextState = reducerFunc(nextState, action, calendar);\n    }\n    // console.log(action.type, nextState)\n    return nextState;\n}\nfunction reduceViewType(currentViewType, action) {\n    switch (action.type) {\n        case 'SET_VIEW_TYPE':\n            return action.viewType;\n        default:\n            return currentViewType;\n    }\n}\nfunction reduceDateProfile(currentDateProfile, action, currentDate, viewType, calendar) {\n    var newDateProfile;\n    switch (action.type) {\n        case 'PREV':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildPrev(currentDateProfile, currentDate);\n            break;\n        case 'NEXT':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildNext(currentDateProfile, currentDate);\n            break;\n        case 'SET_DATE':\n            if (!currentDateProfile.activeRange ||\n                !rangeContainsMarker(currentDateProfile.currentRange, action.dateMarker)) {\n                newDateProfile = calendar.dateProfileGenerators[viewType].build(action.dateMarker, undefined, true // forceToValid\n                );\n            }\n            break;\n        case 'SET_VIEW_TYPE':\n            var generator = calendar.dateProfileGenerators[viewType];\n            if (!generator) {\n                throw new Error(viewType ?\n                    'The FullCalendar view \"' + viewType + '\" does not exist. Make sure your plugins are loaded correctly.' :\n                    'No available FullCalendar view plugins.');\n            }\n            newDateProfile = generator.build(action.dateMarker || currentDate, undefined, true // forceToValid\n            );\n            break;\n    }\n    if (newDateProfile &&\n        newDateProfile.isValid &&\n        !(currentDateProfile && isDateProfilesEqual(currentDateProfile, newDateProfile))) {\n        return newDateProfile;\n    }\n    else {\n        return currentDateProfile;\n    }\n}\nfunction reduceCurrentDate(currentDate, action, dateProfile) {\n    switch (action.type) {\n        case 'PREV':\n        case 'NEXT':\n            if (!rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return currentDate;\n            }\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            var newDate = action.dateMarker || currentDate;\n            if (dateProfile.activeRange && !rangeContainsMarker(dateProfile.activeRange, newDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return newDate;\n            }\n        default:\n            return currentDate;\n    }\n}\nfunction reduceDateSelection(currentSelection, action, calendar) {\n    switch (action.type) {\n        case 'SELECT_DATES':\n            return action.selection;\n        case 'UNSELECT_DATES':\n            return null;\n        default:\n            return currentSelection;\n    }\n}\nfunction reduceSelectedEvent(currentInstanceId, action) {\n    switch (action.type) {\n        case 'SELECT_EVENT':\n            return action.eventInstanceId;\n        case 'UNSELECT_EVENT':\n            return '';\n        default:\n            return currentInstanceId;\n    }\n}\nfunction reduceEventDrag(currentDrag, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_DRAG':\n            var newDrag = action.state;\n            return {\n                affectedEvents: newDrag.affectedEvents,\n                mutatedEvents: newDrag.mutatedEvents,\n                isEvent: newDrag.isEvent,\n                origSeg: newDrag.origSeg\n            };\n        case 'UNSET_EVENT_DRAG':\n            return null;\n        default:\n            return currentDrag;\n    }\n}\nfunction reduceEventResize(currentResize, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_RESIZE':\n            var newResize = action.state;\n            return {\n                affectedEvents: newResize.affectedEvents,\n                mutatedEvents: newResize.mutatedEvents,\n                isEvent: newResize.isEvent,\n                origSeg: newResize.origSeg\n            };\n        case 'UNSET_EVENT_RESIZE':\n            return null;\n        default:\n            return currentResize;\n    }\n}\nfunction computeLoadingLevel(eventSources) {\n    var cnt = 0;\n    for (var sourceId in eventSources) {\n        if (eventSources[sourceId].isFetching) {\n            cnt++;\n        }\n    }\n    return cnt;\n}\n\nvar STANDARD_PROPS = {\n    start: null,\n    end: null,\n    allDay: Boolean\n};\nfunction parseDateSpan(raw, dateEnv, defaultDuration) {\n    var span = parseOpenDateSpan(raw, dateEnv);\n    var range = span.range;\n    if (!range.start) {\n        return null;\n    }\n    if (!range.end) {\n        if (defaultDuration == null) {\n            return null;\n        }\n        else {\n            range.end = dateEnv.add(range.start, defaultDuration);\n        }\n    }\n    return span;\n}\n/*\nTODO: somehow combine with parseRange?\nWill return null if the start/end props were present but parsed invalidly.\n*/\nfunction parseOpenDateSpan(raw, dateEnv) {\n    var leftovers = {};\n    var standardProps = refineProps(raw, STANDARD_PROPS, {}, leftovers);\n    var startMeta = standardProps.start ? dateEnv.createMarkerMeta(standardProps.start) : null;\n    var endMeta = standardProps.end ? dateEnv.createMarkerMeta(standardProps.end) : null;\n    var allDay = standardProps.allDay;\n    if (allDay == null) {\n        allDay = (startMeta && startMeta.isTimeUnspecified) &&\n            (!endMeta || endMeta.isTimeUnspecified);\n    }\n    // use this leftover object as the selection object\n    leftovers.range = {\n        start: startMeta ? startMeta.marker : null,\n        end: endMeta ? endMeta.marker : null\n    };\n    leftovers.allDay = allDay;\n    return leftovers;\n}\nfunction isDateSpansEqual(span0, span1) {\n    return rangesEqual(span0.range, span1.range) &&\n        span0.allDay === span1.allDay &&\n        isSpanPropsEqual(span0, span1);\n}\n// the NON-DATE-RELATED props\nfunction isSpanPropsEqual(span0, span1) {\n    for (var propName in span1) {\n        if (propName !== 'range' && propName !== 'allDay') {\n            if (span0[propName] !== span1[propName]) {\n                return false;\n            }\n        }\n    }\n    // are there any props that span0 has that span1 DOESN'T have?\n    // both have range/allDay, so no need to special-case.\n    for (var propName in span0) {\n        if (!(propName in span1)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction buildDateSpanApi(span, dateEnv) {\n    return {\n        start: dateEnv.toDate(span.range.start),\n        end: dateEnv.toDate(span.range.end),\n        startStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        endStr: dateEnv.formatIso(span.range.end, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction buildDatePointApi(span, dateEnv) {\n    return {\n        date: dateEnv.toDate(span.range.start),\n        dateStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction fabricateEventRange(dateSpan, eventUiBases, calendar) {\n    var def = parseEventDef({ editable: false }, '', // sourceId\n    dateSpan.allDay, true, // hasEnd\n    calendar);\n    return {\n        def: def,\n        ui: compileEventUi(def, eventUiBases),\n        instance: createEventInstance(def.defId, dateSpan.range),\n        range: dateSpan.range,\n        isStart: true,\n        isEnd: true\n    };\n}\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n    var hash = {};\n    var viewType;\n    for (viewType in defaultConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    for (viewType in overrideConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    if (hash[viewType]) {\n        return hash[viewType];\n    }\n    var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    if (viewDef) {\n        hash[viewType] = viewDef;\n    }\n    return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    var defaultConfig = defaultConfigs[viewType];\n    var overrideConfig = overrideConfigs[viewType];\n    var queryProp = function (name) {\n        return (defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n            ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null);\n    };\n    var theClass = queryProp('class');\n    var superType = queryProp('superType');\n    if (!superType && theClass) {\n        superType =\n            findViewNameBySubclass(theClass, overrideConfigs) ||\n                findViewNameBySubclass(theClass, defaultConfigs);\n    }\n    var superDef = null;\n    if (superType) {\n        if (superType === viewType) {\n            throw new Error('Can\\'t have a custom view type that references itself');\n        }\n        superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n    }\n    if (!theClass && superDef) {\n        theClass = superDef.class;\n    }\n    if (!theClass) {\n        return null; // don't throw a warning, might be settings for a single-unit view\n    }\n    return {\n        type: viewType,\n        class: theClass,\n        defaults: __assign({}, (superDef ? superDef.defaults : {}), (defaultConfig ? defaultConfig.options : {})),\n        overrides: __assign({}, (superDef ? superDef.overrides : {}), (overrideConfig ? overrideConfig.options : {}))\n    };\n}\nfunction findViewNameBySubclass(viewSubclass, configs) {\n    var superProto = Object.getPrototypeOf(viewSubclass.prototype);\n    for (var viewType in configs) {\n        var parsed = configs[viewType];\n        // need DIRECT subclass, so instanceof won't do it\n        if (parsed.class && parsed.class.prototype === superProto) {\n            return viewType;\n        }\n    }\n    return '';\n}\n\nfunction parseViewConfigs(inputs) {\n    return mapHash(inputs, parseViewConfig);\n}\nvar VIEW_DEF_PROPS = {\n    type: String,\n    class: null\n};\nfunction parseViewConfig(input) {\n    if (typeof input === 'function') {\n        input = { class: input };\n    }\n    var options = {};\n    var props = refineProps(input, VIEW_DEF_PROPS, {}, options);\n    return {\n        superType: props.type,\n        class: props.class,\n        options: options\n    };\n}\n\nfunction buildViewSpecs(defaultInputs, optionsManager) {\n    var defaultConfigs = parseViewConfigs(defaultInputs);\n    var overrideConfigs = parseViewConfigs(optionsManager.overrides.views);\n    var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n    return mapHash(viewDefs, function (viewDef) {\n        return buildViewSpec(viewDef, overrideConfigs, optionsManager);\n    });\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionsManager) {\n    var durationInput = viewDef.overrides.duration ||\n        viewDef.defaults.duration ||\n        optionsManager.dynamicOverrides.duration ||\n        optionsManager.overrides.duration;\n    var duration = null;\n    var durationUnit = '';\n    var singleUnit = '';\n    var singleUnitOverrides = {};\n    if (durationInput) {\n        duration = createDuration(durationInput);\n        if (duration) { // valid?\n            var denom = greatestDurationDenominator(duration, !getWeeksFromInput(durationInput));\n            durationUnit = denom.unit;\n            if (denom.value === 1) {\n                singleUnit = durationUnit;\n                singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].options : {};\n            }\n        }\n    }\n    var queryButtonText = function (options) {\n        var buttonTextMap = options.buttonText || {};\n        var buttonTextKey = viewDef.defaults.buttonTextKey;\n        if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n            return buttonTextMap[buttonTextKey];\n        }\n        if (buttonTextMap[viewDef.type] != null) {\n            return buttonTextMap[viewDef.type];\n        }\n        if (buttonTextMap[singleUnit] != null) {\n            return buttonTextMap[singleUnit];\n        }\n    };\n    return {\n        type: viewDef.type,\n        class: viewDef.class,\n        duration: duration,\n        durationUnit: durationUnit,\n        singleUnit: singleUnit,\n        options: __assign({}, globalDefaults, viewDef.defaults, optionsManager.dirDefaults, optionsManager.localeDefaults, optionsManager.overrides, singleUnitOverrides, viewDef.overrides, optionsManager.dynamicOverrides),\n        buttonTextOverride: queryButtonText(optionsManager.dynamicOverrides) ||\n            queryButtonText(optionsManager.overrides) || // constructor-specified buttonText lookup hash takes precedence\n            viewDef.overrides.buttonText,\n        buttonTextDefault: queryButtonText(optionsManager.localeDefaults) ||\n            queryButtonText(optionsManager.dirDefaults) ||\n            viewDef.defaults.buttonText ||\n            queryButtonText(globalDefaults) ||\n            viewDef.type // fall back to given view name\n    };\n}\n\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    function Toolbar(extraClassName) {\n        var _this = _super.call(this) || this;\n        _this._renderLayout = memoizeRendering(_this.renderLayout, _this.unrenderLayout);\n        _this._updateTitle = memoizeRendering(_this.updateTitle, null, [_this._renderLayout]);\n        _this._updateActiveButton = memoizeRendering(_this.updateActiveButton, null, [_this._renderLayout]);\n        _this._updateToday = memoizeRendering(_this.updateToday, null, [_this._renderLayout]);\n        _this._updatePrev = memoizeRendering(_this.updatePrev, null, [_this._renderLayout]);\n        _this._updateNext = memoizeRendering(_this.updateNext, null, [_this._renderLayout]);\n        _this.el = createElement('div', { className: 'fc-toolbar ' + extraClassName });\n        return _this;\n    }\n    Toolbar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this._renderLayout.unrender(); // should unrender everything else\n        removeElement(this.el);\n    };\n    Toolbar.prototype.render = function (props) {\n        this._renderLayout(props.layout);\n        this._updateTitle(props.title);\n        this._updateActiveButton(props.activeButton);\n        this._updateToday(props.isTodayEnabled);\n        this._updatePrev(props.isPrevEnabled);\n        this._updateNext(props.isNextEnabled);\n    };\n    Toolbar.prototype.renderLayout = function (layout) {\n        var el = this.el;\n        this.viewsWithButtons = [];\n        appendToElement(el, this.renderSection('left', layout.left));\n        appendToElement(el, this.renderSection('center', layout.center));\n        appendToElement(el, this.renderSection('right', layout.right));\n    };\n    Toolbar.prototype.unrenderLayout = function () {\n        this.el.innerHTML = '';\n    };\n    Toolbar.prototype.renderSection = function (position, buttonStr) {\n        var _this = this;\n        var _a = this.context, theme = _a.theme, calendar = _a.calendar;\n        var optionsManager = calendar.optionsManager;\n        var viewSpecs = calendar.viewSpecs;\n        var sectionEl = createElement('div', { className: 'fc-' + position });\n        var calendarCustomButtons = optionsManager.computed.customButtons || {};\n        var calendarButtonTextOverrides = optionsManager.overrides.buttonText || {};\n        var calendarButtonText = optionsManager.computed.buttonText || {};\n        if (buttonStr) {\n            buttonStr.split(' ').forEach(function (buttonGroupStr, i) {\n                var groupChildren = [];\n                var isOnlyButtons = true;\n                var groupEl;\n                buttonGroupStr.split(',').forEach(function (buttonName, j) {\n                    var customButtonProps;\n                    var viewSpec;\n                    var buttonClick;\n                    var buttonIcon; // only one of these will be set\n                    var buttonText; // \"\n                    var buttonInnerHtml;\n                    var buttonClasses;\n                    var buttonEl;\n                    var buttonAriaAttr;\n                    if (buttonName === 'title') {\n                        groupChildren.push(htmlToElement('<h2>&nbsp;</h2>')); // we always want it to take up height\n                        isOnlyButtons = false;\n                    }\n                    else {\n                        if ((customButtonProps = calendarCustomButtons[buttonName])) {\n                            buttonClick = function (ev) {\n                                if (customButtonProps.click) {\n                                    customButtonProps.click.call(buttonEl, ev);\n                                }\n                            };\n                            (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = customButtonProps.text);\n                        }\n                        else if ((viewSpec = viewSpecs[buttonName])) {\n                            _this.viewsWithButtons.push(buttonName);\n                            buttonClick = function () {\n                                calendar.changeView(buttonName);\n                            };\n                            (buttonText = viewSpec.buttonTextOverride) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = viewSpec.buttonTextDefault);\n                        }\n                        else if (calendar[buttonName]) { // a calendar method\n                            buttonClick = function () {\n                                calendar[buttonName]();\n                            };\n                            (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = calendarButtonText[buttonName]);\n                            //            ^ everything else is considered default\n                        }\n                        if (buttonClick) {\n                            buttonClasses = [\n                                'fc-' + buttonName + '-button',\n                                theme.getClass('button')\n                            ];\n                            if (buttonText) {\n                                buttonInnerHtml = htmlEscape(buttonText);\n                                buttonAriaAttr = '';\n                            }\n                            else if (buttonIcon) {\n                                buttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\";\n                                buttonAriaAttr = ' aria-label=\"' + buttonName + '\"';\n                            }\n                            buttonEl = htmlToElement(// type=\"button\" so that it doesn't submit a form\n                            '<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\"' +\n                                buttonAriaAttr +\n                                '>' + buttonInnerHtml + '</button>');\n                            buttonEl.addEventListener('click', buttonClick);\n                            groupChildren.push(buttonEl);\n                        }\n                    }\n                });\n                if (groupChildren.length > 1) {\n                    groupEl = document.createElement('div');\n                    var buttonGroupClassName = theme.getClass('buttonGroup');\n                    if (isOnlyButtons && buttonGroupClassName) {\n                        groupEl.classList.add(buttonGroupClassName);\n                    }\n                    appendToElement(groupEl, groupChildren);\n                    sectionEl.appendChild(groupEl);\n                }\n                else {\n                    appendToElement(sectionEl, groupChildren); // 1 or 0 children\n                }\n            });\n        }\n        return sectionEl;\n    };\n    Toolbar.prototype.updateToday = function (isTodayEnabled) {\n        this.toggleButtonEnabled('today', isTodayEnabled);\n    };\n    Toolbar.prototype.updatePrev = function (isPrevEnabled) {\n        this.toggleButtonEnabled('prev', isPrevEnabled);\n    };\n    Toolbar.prototype.updateNext = function (isNextEnabled) {\n        this.toggleButtonEnabled('next', isNextEnabled);\n    };\n    Toolbar.prototype.updateTitle = function (text) {\n        findElements(this.el, 'h2').forEach(function (titleEl) {\n            titleEl.innerText = text;\n        });\n    };\n    Toolbar.prototype.updateActiveButton = function (buttonName) {\n        var theme = this.context.theme;\n        var className = theme.getClass('buttonActive');\n        findElements(this.el, 'button').forEach(function (buttonEl) {\n            if (buttonName && buttonEl.classList.contains('fc-' + buttonName + '-button')) {\n                buttonEl.classList.add(className);\n            }\n            else {\n                buttonEl.classList.remove(className);\n            }\n        });\n    };\n    Toolbar.prototype.toggleButtonEnabled = function (buttonName, bool) {\n        findElements(this.el, '.fc-' + buttonName + '-button').forEach(function (buttonEl) {\n            buttonEl.disabled = !bool;\n        });\n    };\n    return Toolbar;\n}(Component));\n\nvar CalendarComponent = /** @class */ (function (_super) {\n    __extends(CalendarComponent, _super);\n    function CalendarComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.elClassNames = [];\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.renderToolbars = memoizeRendering(_this._renderToolbars, _this._unrenderToolbars, [_this.renderSkeleton]);\n        _this.buildComponentContext = memoize(buildComponentContext);\n        _this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n        _this.el = el;\n        _this.computeTitle = memoize(computeTitle);\n        _this.parseBusinessHours = memoize(function (input) {\n            return parseBusinessHours(input, _this.context.calendar);\n        });\n        return _this;\n    }\n    CalendarComponent.prototype.render = function (props, context) {\n        this.freezeHeight();\n        var title = this.computeTitle(props.dateProfile, props.viewSpec.options);\n        this.renderSkeleton(context);\n        this.renderToolbars(props.viewSpec, props.dateProfile, props.currentDate, title);\n        this.renderView(props, title);\n        this.updateSize();\n        this.thawHeight();\n    };\n    CalendarComponent.prototype.destroy = function () {\n        if (this.header) {\n            this.header.destroy();\n        }\n        if (this.footer) {\n            this.footer.destroy();\n        }\n        this.renderSkeleton.unrender(); // will call destroyView\n        _super.prototype.destroy.call(this);\n    };\n    CalendarComponent.prototype._renderSkeleton = function (context) {\n        this.updateElClassNames(context);\n        prependToElement(this.el, this.contentEl = createElement('div', { className: 'fc-view-container' }));\n        var calendar = context.calendar;\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.viewContainerModifiers; _i < _a.length; _i++) {\n            var modifyViewContainer = _a[_i];\n            modifyViewContainer(this.contentEl, calendar);\n        }\n    };\n    CalendarComponent.prototype._unrenderSkeleton = function () {\n        // weird to have this here\n        if (this.view) {\n            this.savedScroll = this.view.queryScroll();\n            this.view.destroy();\n            this.view = null;\n        }\n        removeElement(this.contentEl);\n        this.removeElClassNames();\n    };\n    CalendarComponent.prototype.removeElClassNames = function () {\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.remove(className);\n        }\n        this.elClassNames = [];\n    };\n    CalendarComponent.prototype.updateElClassNames = function (context) {\n        this.removeElClassNames();\n        var theme = context.theme, options = context.options;\n        this.elClassNames = [\n            'fc',\n            'fc-' + options.dir,\n            theme.getClass('widget')\n        ];\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.add(className);\n        }\n    };\n    CalendarComponent.prototype._renderToolbars = function (viewSpec, dateProfile, currentDate, title) {\n        var _a = this, context = _a.context, header = _a.header, footer = _a.footer;\n        var options = context.options, calendar = context.calendar;\n        var headerLayout = options.header;\n        var footerLayout = options.footer;\n        var dateProfileGenerator = this.props.dateProfileGenerator;\n        var now = calendar.getNow();\n        var todayInfo = dateProfileGenerator.build(now);\n        var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate);\n        var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate);\n        var toolbarProps = {\n            title: title,\n            activeButton: viewSpec.type,\n            isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n            isPrevEnabled: prevInfo.isValid,\n            isNextEnabled: nextInfo.isValid\n        };\n        if (headerLayout) {\n            if (!header) {\n                header = this.header = new Toolbar('fc-header-toolbar');\n                prependToElement(this.el, header.el);\n            }\n            header.receiveProps(__assign({ layout: headerLayout }, toolbarProps), context);\n        }\n        else if (header) {\n            header.destroy();\n            header = this.header = null;\n        }\n        if (footerLayout) {\n            if (!footer) {\n                footer = this.footer = new Toolbar('fc-footer-toolbar');\n                appendToElement(this.el, footer.el);\n            }\n            footer.receiveProps(__assign({ layout: footerLayout }, toolbarProps), context);\n        }\n        else if (footer) {\n            footer.destroy();\n            footer = this.footer = null;\n        }\n    };\n    CalendarComponent.prototype._unrenderToolbars = function () {\n        if (this.header) {\n            this.header.destroy();\n            this.header = null;\n        }\n        if (this.footer) {\n            this.footer.destroy();\n            this.footer = null;\n        }\n    };\n    CalendarComponent.prototype.renderView = function (props, title) {\n        var view = this.view;\n        var _a = this.context, calendar = _a.calendar, options = _a.options;\n        var viewSpec = props.viewSpec, dateProfileGenerator = props.dateProfileGenerator;\n        if (!view || view.viewSpec !== viewSpec) {\n            if (view) {\n                view.destroy();\n            }\n            view = this.view = new viewSpec['class'](viewSpec, this.contentEl);\n            if (this.savedScroll) {\n                view.addScroll(this.savedScroll, true);\n                this.savedScroll = null;\n            }\n        }\n        view.title = title; // for the API\n        var viewProps = {\n            dateProfileGenerator: dateProfileGenerator,\n            dateProfile: props.dateProfile,\n            businessHours: this.parseBusinessHours(viewSpec.options.businessHours),\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize\n        };\n        var transformers = this.buildViewPropTransformers(calendar.pluginSystem.hooks.viewPropsTransformers);\n        for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n            var transformer = transformers_1[_i];\n            __assign(viewProps, transformer.transform(viewProps, viewSpec, props, options));\n        }\n        view.receiveProps(viewProps, this.buildComponentContext(this.context, viewSpec, view));\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.updateSize = function (isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var view = this.view;\n        if (!view) {\n            return; // why?\n        }\n        if (isResize || this.isHeightAuto == null) {\n            this.computeHeightVars();\n        }\n        view.updateSize(isResize, this.viewHeight, this.isHeightAuto);\n        view.updateNowIndicator(); // we need to guarantee this will run after updateSize\n        view.popScroll(isResize);\n    };\n    CalendarComponent.prototype.computeHeightVars = function () {\n        var calendar = this.context.calendar; // yuck. need to handle dynamic options\n        var heightInput = calendar.opt('height');\n        var contentHeightInput = calendar.opt('contentHeight');\n        this.isHeightAuto = heightInput === 'auto' || contentHeightInput === 'auto';\n        if (typeof contentHeightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = contentHeightInput;\n        }\n        else if (typeof contentHeightInput === 'function') { // exists and is a function\n            this.viewHeight = contentHeightInput();\n        }\n        else if (typeof heightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = heightInput - this.queryToolbarsHeight();\n        }\n        else if (typeof heightInput === 'function') { // exists and is a function\n            this.viewHeight = heightInput() - this.queryToolbarsHeight();\n        }\n        else if (heightInput === 'parent') { // set to height of parent element\n            var parentEl = this.el.parentNode;\n            this.viewHeight = parentEl.getBoundingClientRect().height - this.queryToolbarsHeight();\n        }\n        else {\n            this.viewHeight = Math.round(this.contentEl.getBoundingClientRect().width /\n                Math.max(calendar.opt('aspectRatio'), .5));\n        }\n    };\n    CalendarComponent.prototype.queryToolbarsHeight = function () {\n        var height = 0;\n        if (this.header) {\n            height += computeHeightAndMargins(this.header.el);\n        }\n        if (this.footer) {\n            height += computeHeightAndMargins(this.footer.el);\n        }\n        return height;\n    };\n    // Height \"Freezing\"\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.freezeHeight = function () {\n        applyStyle(this.el, {\n            height: this.el.getBoundingClientRect().height,\n            overflow: 'hidden'\n        });\n    };\n    CalendarComponent.prototype.thawHeight = function () {\n        applyStyle(this.el, {\n            height: '',\n            overflow: ''\n        });\n    };\n    return CalendarComponent;\n}(Component));\n// Title and Date Formatting\n// -----------------------------------------------------------------------------------------------------------------\n// Computes what the title at the top of the calendar should be for this view\nfunction computeTitle(dateProfile, viewOptions) {\n    var range;\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n        range = dateProfile.currentRange;\n    }\n    else { // for day units or smaller, use the actual day range\n        range = dateProfile.activeRange;\n    }\n    return this.context.dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || computeTitleFormat(dateProfile), viewOptions.titleRangeSeparator), { isEndExclusive: dateProfile.isRangeAllDay });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction computeTitleFormat(dateProfile) {\n    var currentRangeUnit = dateProfile.currentRangeUnit;\n    if (currentRangeUnit === 'year') {\n        return { year: 'numeric' };\n    }\n    else if (currentRangeUnit === 'month') {\n        return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n    }\n    else {\n        var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n        if (days !== null && days > 1) {\n            // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n            return { year: 'numeric', month: 'short', day: 'numeric' };\n        }\n        else {\n            // one day. longer, like \"September 9 2014\"\n            return { year: 'numeric', month: 'long', day: 'numeric' };\n        }\n    }\n}\n// build a context scoped to the view\nfunction buildComponentContext(context, viewSpec, view) {\n    return context.extend(viewSpec.options, view);\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n    return theClasses.map(function (theClass) {\n        return new theClass();\n    });\n}\n\nvar Interaction = /** @class */ (function () {\n    function Interaction(settings) {\n        this.component = settings.component;\n    }\n    Interaction.prototype.destroy = function () {\n    };\n    return Interaction;\n}());\nfunction parseInteractionSettings(component, input) {\n    return {\n        component: component,\n        el: input.el,\n        useEventCenter: input.useEventCenter != null ? input.useEventCenter : true\n    };\n}\nfunction interactionSettingsToStore(settings) {\n    var _a;\n    return _a = {},\n        _a[settings.component.uid] = settings,\n        _a;\n}\n// global state\nvar interactionSettingsStore = {};\n\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nvar EventClicking = /** @class */ (function (_super) {\n    __extends(EventClicking, _super);\n    function EventClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handleSegClick = function (ev, segEl) {\n            var component = _this.component;\n            var _a = component.context, calendar = _a.calendar, view = _a.view;\n            var seg = getElSeg(segEl);\n            if (seg && // might be the <div> surrounding the more link\n                component.isValidSegDownEl(ev.target)) {\n                // our way to simulate a link click for elements that can't be <a> tags\n                // grab before trigger fired in case trigger trashes DOM thru rerendering\n                var hasUrlContainer = elementClosest(ev.target, '.fc-has-url');\n                var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                calendar.publiclyTrigger('eventClick', [\n                    {\n                        el: segEl,\n                        event: new EventApi(component.context.calendar, seg.eventRange.def, seg.eventRange.instance),\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n                if (url && !ev.defaultPrevented) {\n                    window.location.href = url;\n                }\n            }\n        };\n        var component = settings.component;\n        _this.destroy = listenBySelector(component.el, 'click', component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegClick);\n        return _this;\n    }\n    return EventClicking;\n}(Interaction));\n\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nvar EventHovering = /** @class */ (function (_super) {\n    __extends(EventHovering, _super);\n    function EventHovering(settings) {\n        var _this = _super.call(this, settings) || this;\n        // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n        _this.handleEventElRemove = function (el) {\n            if (el === _this.currentSegEl) {\n                _this.handleSegLeave(null, _this.currentSegEl);\n            }\n        };\n        _this.handleSegEnter = function (ev, segEl) {\n            if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                segEl.classList.add('fc-allow-mouse-resize');\n                _this.currentSegEl = segEl;\n                _this.triggerEvent('eventMouseEnter', ev, segEl);\n            }\n        };\n        _this.handleSegLeave = function (ev, segEl) {\n            if (_this.currentSegEl) {\n                segEl.classList.remove('fc-allow-mouse-resize');\n                _this.currentSegEl = null;\n                _this.triggerEvent('eventMouseLeave', ev, segEl);\n            }\n        };\n        var component = settings.component;\n        _this.removeHoverListeners = listenToHoverBySelector(component.el, component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegEnter, _this.handleSegLeave);\n        // how to make sure component already has context?\n        component.context.calendar.on('eventElRemove', _this.handleEventElRemove);\n        return _this;\n    }\n    EventHovering.prototype.destroy = function () {\n        this.removeHoverListeners();\n        this.component.context.calendar.off('eventElRemove', this.handleEventElRemove);\n    };\n    EventHovering.prototype.triggerEvent = function (publicEvName, ev, segEl) {\n        var component = this.component;\n        var _a = component.context, calendar = _a.calendar, view = _a.view;\n        var seg = getElSeg(segEl);\n        if (!ev || component.isValidSegDownEl(ev.target)) {\n            calendar.publiclyTrigger(publicEvName, [\n                {\n                    el: segEl,\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    jsEvent: ev,\n                    view: view\n                }\n            ]);\n        }\n    };\n    return EventHovering;\n}(Interaction));\n\nvar StandardTheme = /** @class */ (function (_super) {\n    __extends(StandardTheme, _super);\n    function StandardTheme() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return StandardTheme;\n}(Theme));\nStandardTheme.prototype.classes = {\n    widget: 'fc-unthemed',\n    widgetHeader: 'fc-widget-header',\n    widgetContent: 'fc-widget-content',\n    buttonGroup: 'fc-button-group',\n    button: 'fc-button fc-button-primary',\n    buttonActive: 'fc-button-active',\n    popoverHeader: 'fc-widget-header',\n    popoverContent: 'fc-widget-content',\n    // day grid\n    headerRow: 'fc-widget-header',\n    dayRow: 'fc-widget-content',\n    // list view\n    listView: 'fc-widget-content'\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n    close: 'fc-icon-x',\n    prev: 'fc-icon-chevron-left',\n    next: 'fc-icon-chevron-right',\n    prevYear: 'fc-icon-chevrons-left',\n    nextYear: 'fc-icon-chevrons-right'\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons';\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nvar Calendar = /** @class */ (function () {\n    function Calendar(el, overrides) {\n        var _this = this;\n        this.buildComponentContext = memoize(buildComponentContext$1);\n        this.parseRawLocales = memoize(parseRawLocales);\n        this.buildLocale = memoize(buildLocale);\n        this.buildDateEnv = memoize(buildDateEnv);\n        this.buildTheme = memoize(buildTheme);\n        this.buildEventUiSingleBase = memoize(this._buildEventUiSingleBase);\n        this.buildSelectionConfig = memoize(this._buildSelectionConfig);\n        this.buildEventUiBySource = memoizeOutput(buildEventUiBySource, isPropsEqual);\n        this.buildEventUiBases = memoize(buildEventUiBases);\n        this.interactionsStore = {};\n        this.actionQueue = [];\n        this.isReducing = false;\n        // isDisplaying: boolean = false // installed in DOM? accepting renders?\n        this.needsRerender = false; // needs a render?\n        this.isRendering = false; // currently in the executeRender function?\n        this.renderingPauseDepth = 0;\n        this.buildDelayedRerender = memoize(buildDelayedRerender);\n        this.afterSizingTriggers = {};\n        this.isViewUpdated = false;\n        this.isDatesUpdated = false;\n        this.isEventsUpdated = false;\n        this.el = el;\n        this.optionsManager = new OptionsManager(overrides || {});\n        this.pluginSystem = new PluginSystem();\n        // only do once. don't do in handleOptions. because can't remove plugins\n        this.addPluginInputs(this.optionsManager.computed.plugins || []);\n        this.handleOptions(this.optionsManager.computed);\n        this.publiclyTrigger('_init'); // for tests\n        this.hydrate();\n        this.calendarInteractions = this.pluginSystem.hooks.calendarInteractions\n            .map(function (calendarInteractionClass) {\n            return new calendarInteractionClass(_this);\n        });\n    }\n    Calendar.prototype.addPluginInputs = function (pluginInputs) {\n        var pluginDefs = refinePluginDefs(pluginInputs);\n        for (var _i = 0, pluginDefs_1 = pluginDefs; _i < pluginDefs_1.length; _i++) {\n            var pluginDef = pluginDefs_1[_i];\n            this.pluginSystem.add(pluginDef);\n        }\n    };\n    Object.defineProperty(Calendar.prototype, \"view\", {\n        // public API\n        get: function () {\n            return this.component ? this.component.view : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Public API for rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.render = function () {\n        if (!this.component) {\n            this.component = new CalendarComponent(this.el);\n            this.renderableEventStore = createEmptyEventStore();\n            this.bindHandlers();\n            this.executeRender();\n        }\n        else {\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.destroy = function () {\n        if (this.component) {\n            this.unbindHandlers();\n            this.component.destroy(); // don't null-out. in case API needs access\n            this.component = null; // umm ???\n            for (var _i = 0, _a = this.calendarInteractions; _i < _a.length; _i++) {\n                var interaction = _a[_i];\n                interaction.destroy();\n            }\n            this.publiclyTrigger('_destroyed');\n        }\n    };\n    // Handlers\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.bindHandlers = function () {\n        var _this = this;\n        // event delegation for nav links\n        this.removeNavLinkListener = listenBySelector(this.el, 'click', 'a[data-goto]', function (ev, anchorEl) {\n            var gotoOptions = anchorEl.getAttribute('data-goto');\n            gotoOptions = gotoOptions ? JSON.parse(gotoOptions) : {};\n            var dateEnv = _this.dateEnv;\n            var dateMarker = dateEnv.createMarker(gotoOptions.date);\n            var viewType = gotoOptions.type;\n            // property like \"navLinkDayClick\". might be a string or a function\n            var customAction = _this.viewOpt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n            if (typeof customAction === 'function') {\n                customAction(dateEnv.toDate(dateMarker), ev);\n            }\n            else {\n                if (typeof customAction === 'string') {\n                    viewType = customAction;\n                }\n                _this.zoomTo(dateMarker, viewType);\n            }\n        });\n        if (this.opt('handleWindowResize')) {\n            window.addEventListener('resize', this.windowResizeProxy = debounce(// prevents rapid calls\n            this.windowResize.bind(this), this.opt('windowResizeDelay')));\n        }\n    };\n    Calendar.prototype.unbindHandlers = function () {\n        this.removeNavLinkListener();\n        if (this.windowResizeProxy) {\n            window.removeEventListener('resize', this.windowResizeProxy);\n            this.windowResizeProxy = null;\n        }\n    };\n    // Dispatcher\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hydrate = function () {\n        var _this = this;\n        this.state = this.buildInitialState();\n        var rawSources = this.opt('eventSources') || [];\n        var singleRawSource = this.opt('events');\n        var sources = []; // parsed\n        if (singleRawSource) {\n            rawSources.unshift(singleRawSource);\n        }\n        for (var _i = 0, rawSources_1 = rawSources; _i < rawSources_1.length; _i++) {\n            var rawSource = rawSources_1[_i];\n            var source = parseEventSource(rawSource, this);\n            if (source) {\n                sources.push(source);\n            }\n        }\n        this.batchRendering(function () {\n            _this.dispatch({ type: 'INIT' }); // pass in sources here?\n            _this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: sources });\n            _this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: _this.opt('defaultView') || _this.pluginSystem.hooks.defaultView\n            });\n        });\n    };\n    Calendar.prototype.buildInitialState = function () {\n        return {\n            viewType: null,\n            loadingLevel: 0,\n            eventSourceLoadingLevel: 0,\n            currentDate: this.getInitialDate(),\n            dateProfile: null,\n            eventSources: {},\n            eventStore: createEmptyEventStore(),\n            dateSelection: null,\n            eventSelection: '',\n            eventDrag: null,\n            eventResize: null\n        };\n    };\n    Calendar.prototype.dispatch = function (action) {\n        this.actionQueue.push(action);\n        if (!this.isReducing) {\n            this.isReducing = true;\n            var oldState = this.state;\n            while (this.actionQueue.length) {\n                this.state = this.reduce(this.state, this.actionQueue.shift(), this);\n            }\n            var newState = this.state;\n            this.isReducing = false;\n            if (!oldState.loadingLevel && newState.loadingLevel) {\n                this.publiclyTrigger('loading', [true]);\n            }\n            else if (oldState.loadingLevel && !newState.loadingLevel) {\n                this.publiclyTrigger('loading', [false]);\n            }\n            var view = this.component && this.component.view;\n            if (oldState.eventStore !== newState.eventStore) {\n                if (oldState.eventStore) {\n                    this.isEventsUpdated = true;\n                }\n            }\n            if (oldState.dateProfile !== newState.dateProfile) {\n                if (oldState.dateProfile && view) { // why would view be null!?\n                    this.publiclyTrigger('datesDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isDatesUpdated = true;\n            }\n            if (oldState.viewType !== newState.viewType) {\n                if (oldState.viewType && view) { // why would view be null!?\n                    this.publiclyTrigger('viewSkeletonDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isViewUpdated = true;\n            }\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.reduce = function (state, action, calendar) {\n        return reduce(state, action, calendar);\n    };\n    // Render Queue\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.requestRerender = function () {\n        this.needsRerender = true;\n        this.delayedRerender(); // will call a debounced-version of tryRerender\n    };\n    Calendar.prototype.tryRerender = function () {\n        if (this.component && // must be accepting renders\n            this.needsRerender && // indicates that a rerender was requested\n            !this.renderingPauseDepth && // not paused\n            !this.isRendering // not currently in the render loop\n        ) {\n            this.executeRender();\n        }\n    };\n    Calendar.prototype.batchRendering = function (func) {\n        this.renderingPauseDepth++;\n        func();\n        this.renderingPauseDepth--;\n        if (this.needsRerender) {\n            this.requestRerender();\n        }\n    };\n    // Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.executeRender = function () {\n        // clear these BEFORE the render so that new values will accumulate during render\n        this.needsRerender = false;\n        this.isRendering = true;\n        this.renderComponent();\n        this.isRendering = false;\n        // received a rerender request while rendering\n        if (this.needsRerender) {\n            this.delayedRerender();\n        }\n    };\n    /*\n    don't call this directly. use executeRender instead\n    */\n    Calendar.prototype.renderComponent = function () {\n        var _a = this, state = _a.state, component = _a.component;\n        var viewType = state.viewType;\n        var viewSpec = this.viewSpecs[viewType];\n        if (!viewSpec) {\n            throw new Error(\"View type \\\"\" + viewType + \"\\\" is not valid\");\n        }\n        // if event sources are still loading and progressive rendering hasn't been enabled,\n        // keep rendering the last fully loaded set of events\n        var renderableEventStore = this.renderableEventStore =\n            (state.eventSourceLoadingLevel && !this.opt('progressiveEventRendering')) ?\n                this.renderableEventStore :\n                state.eventStore;\n        var eventUiSingleBase = this.buildEventUiSingleBase(viewSpec.options);\n        var eventUiBySource = this.buildEventUiBySource(state.eventSources);\n        var eventUiBases = this.eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n        component.receiveProps(__assign({}, state, { viewSpec: viewSpec, dateProfileGenerator: this.dateProfileGenerators[viewType], dateProfile: state.dateProfile, eventStore: renderableEventStore, eventUiBases: eventUiBases, dateSelection: state.dateSelection, eventSelection: state.eventSelection, eventDrag: state.eventDrag, eventResize: state.eventResize }), this.buildComponentContext(this.theme, this.dateEnv, this.optionsManager.computed));\n        if (this.isViewUpdated) {\n            this.isViewUpdated = false;\n            this.publiclyTrigger('viewSkeletonRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isDatesUpdated) {\n            this.isDatesUpdated = false;\n            this.publiclyTrigger('datesRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isEventsUpdated) {\n            this.isEventsUpdated = false;\n        }\n        this.releaseAfterSizingTriggers();\n    };\n    // Options\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.setOption = function (name, val) {\n        var _a;\n        this.mutateOptions((_a = {}, _a[name] = val, _a), [], true);\n    };\n    Calendar.prototype.getOption = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.opt = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.viewOpt = function (name) {\n        return this.viewOpts()[name];\n    };\n    Calendar.prototype.viewOpts = function () {\n        return this.viewSpecs[this.state.viewType].options;\n    };\n    /*\n    handles option changes (like a diff)\n    */\n    Calendar.prototype.mutateOptions = function (updates, removals, isDynamic, deepEqual) {\n        var _this = this;\n        var changeHandlers = this.pluginSystem.hooks.optionChangeHandlers;\n        var normalUpdates = {};\n        var specialUpdates = {};\n        var oldDateEnv = this.dateEnv; // do this before handleOptions\n        var isTimeZoneDirty = false;\n        var isSizeDirty = false;\n        var anyDifficultOptions = Boolean(removals.length);\n        for (var name_1 in updates) {\n            if (changeHandlers[name_1]) {\n                specialUpdates[name_1] = updates[name_1];\n            }\n            else {\n                normalUpdates[name_1] = updates[name_1];\n            }\n        }\n        for (var name_2 in normalUpdates) {\n            if (/^(height|contentHeight|aspectRatio)$/.test(name_2)) {\n                isSizeDirty = true;\n            }\n            else if (/^(defaultDate|defaultView)$/.test(name_2)) ;\n            else {\n                anyDifficultOptions = true;\n                if (name_2 === 'timeZone') {\n                    isTimeZoneDirty = true;\n                }\n            }\n        }\n        this.optionsManager.mutate(normalUpdates, removals, isDynamic);\n        if (anyDifficultOptions) {\n            this.handleOptions(this.optionsManager.computed);\n        }\n        this.batchRendering(function () {\n            if (anyDifficultOptions) {\n                if (isTimeZoneDirty) {\n                    _this.dispatch({\n                        type: 'CHANGE_TIMEZONE',\n                        oldDateEnv: oldDateEnv\n                    });\n                }\n                /* HACK\n                has the same effect as calling this.requestRerender()\n                but recomputes the state's dateProfile\n                */\n                _this.dispatch({\n                    type: 'SET_VIEW_TYPE',\n                    viewType: _this.state.viewType\n                });\n            }\n            else if (isSizeDirty) {\n                _this.updateSize();\n            }\n            // special updates\n            if (deepEqual) {\n                for (var name_3 in specialUpdates) {\n                    changeHandlers[name_3](specialUpdates[name_3], _this, deepEqual);\n                }\n            }\n        });\n    };\n    /*\n    rebuilds things based off of a complete set of refined options\n    */\n    Calendar.prototype.handleOptions = function (options) {\n        var _this = this;\n        var pluginHooks = this.pluginSystem.hooks;\n        this.defaultAllDayEventDuration = createDuration(options.defaultAllDayEventDuration);\n        this.defaultTimedEventDuration = createDuration(options.defaultTimedEventDuration);\n        this.delayedRerender = this.buildDelayedRerender(options.rerenderDelay);\n        this.theme = this.buildTheme(options);\n        var available = this.parseRawLocales(options.locales);\n        this.availableRawLocales = available.map;\n        var locale = this.buildLocale(options.locale || available.defaultCode, available.map);\n        this.dateEnv = this.buildDateEnv(locale, options.timeZone, pluginHooks.namedTimeZonedImpl, options.firstDay, options.weekNumberCalculation, options.weekLabel, pluginHooks.cmdFormatter);\n        this.selectionConfig = this.buildSelectionConfig(options); // needs dateEnv. do after :(\n        // ineffecient to do every time?\n        this.viewSpecs = buildViewSpecs(pluginHooks.views, this.optionsManager);\n        // ineffecient to do every time?\n        this.dateProfileGenerators = mapHash(this.viewSpecs, function (viewSpec) {\n            return new viewSpec.class.prototype.dateProfileGeneratorClass(viewSpec, _this);\n        });\n    };\n    Calendar.prototype.getAvailableLocaleCodes = function () {\n        return Object.keys(this.availableRawLocales);\n    };\n    Calendar.prototype._buildSelectionConfig = function (rawOpts) {\n        return processScopedUiProps('select', rawOpts, this);\n    };\n    Calendar.prototype._buildEventUiSingleBase = function (rawOpts) {\n        if (rawOpts.editable) { // so 'editable' affected events\n            rawOpts = __assign({}, rawOpts, { eventEditable: true });\n        }\n        return processScopedUiProps('event', rawOpts, this);\n    };\n    // Trigger\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hasPublicHandlers = function (name) {\n        return this.hasHandlers(name) ||\n            this.opt(name); // handler specified in options\n    };\n    Calendar.prototype.publiclyTrigger = function (name, args) {\n        var optHandler = this.opt(name);\n        this.triggerWith(name, this, args);\n        if (optHandler) {\n            return optHandler.apply(this, args);\n        }\n    };\n    Calendar.prototype.publiclyTriggerAfterSizing = function (name, args) {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        (afterSizingTriggers[name] || (afterSizingTriggers[name] = [])).push(args);\n    };\n    Calendar.prototype.releaseAfterSizingTriggers = function () {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        for (var name_4 in afterSizingTriggers) {\n            for (var _i = 0, _a = afterSizingTriggers[name_4]; _i < _a.length; _i++) {\n                var args = _a[_i];\n                this.publiclyTrigger(name_4, args);\n            }\n        }\n        this.afterSizingTriggers = {};\n    };\n    // View\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a boolean about whether the view is okay to instantiate at some point\n    Calendar.prototype.isValidViewType = function (viewType) {\n        return Boolean(this.viewSpecs[viewType]);\n    };\n    Calendar.prototype.changeView = function (viewType, dateOrRange) {\n        var dateMarker = null;\n        if (dateOrRange) {\n            if (dateOrRange.start && dateOrRange.end) { // a range\n                this.optionsManager.mutate({ visibleRange: dateOrRange }, []); // will not rerender\n                this.handleOptions(this.optionsManager.computed); // ...but yuck\n            }\n            else { // a date\n                dateMarker = this.dateEnv.createMarker(dateOrRange); // just like gotoDate\n            }\n        }\n        this.unselect();\n        this.dispatch({\n            type: 'SET_VIEW_TYPE',\n            viewType: viewType,\n            dateMarker: dateMarker\n        });\n    };\n    // Forces navigation to a view for the given date.\n    // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n    // needs to change\n    Calendar.prototype.zoomTo = function (dateMarker, viewType) {\n        var spec;\n        viewType = viewType || 'day'; // day is default zoom\n        spec = this.viewSpecs[viewType] ||\n            this.getUnitViewSpec(viewType);\n        this.unselect();\n        if (spec) {\n            this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: spec.type,\n                dateMarker: dateMarker\n            });\n        }\n        else {\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: dateMarker\n            });\n        }\n    };\n    // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n    // Preference is given to views that have corresponding buttons.\n    Calendar.prototype.getUnitViewSpec = function (unit) {\n        var component = this.component;\n        var viewTypes = [];\n        var i;\n        var spec;\n        // put views that have buttons first. there will be duplicates, but oh\n        if (component.header) {\n            viewTypes.push.apply(viewTypes, component.header.viewsWithButtons);\n        }\n        if (component.footer) {\n            viewTypes.push.apply(viewTypes, component.footer.viewsWithButtons);\n        }\n        for (var viewType in this.viewSpecs) {\n            viewTypes.push(viewType);\n        }\n        for (i = 0; i < viewTypes.length; i++) {\n            spec = this.viewSpecs[viewTypes[i]];\n            if (spec) {\n                if (spec.singleUnit === unit) {\n                    return spec;\n                }\n            }\n        }\n    };\n    // Current Date\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getInitialDate = function () {\n        var defaultDateInput = this.opt('defaultDate');\n        // compute the initial ambig-timezone date\n        if (defaultDateInput != null) {\n            return this.dateEnv.createMarker(defaultDateInput);\n        }\n        else {\n            return this.getNow(); // getNow already returns unzoned\n        }\n    };\n    Calendar.prototype.prev = function () {\n        this.unselect();\n        this.dispatch({ type: 'PREV' });\n    };\n    Calendar.prototype.next = function () {\n        this.unselect();\n        this.dispatch({ type: 'NEXT' });\n    };\n    Calendar.prototype.prevYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, -1)\n        });\n    };\n    Calendar.prototype.nextYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, 1)\n        });\n    };\n    Calendar.prototype.today = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.getNow()\n        });\n    };\n    Calendar.prototype.gotoDate = function (zonedDateInput) {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.createMarker(zonedDateInput)\n        });\n    };\n    Calendar.prototype.incrementDate = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // else, warn about invalid input?\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.dateEnv.add(this.state.currentDate, delta)\n            });\n        }\n    };\n    // for external API\n    Calendar.prototype.getDate = function () {\n        return this.dateEnv.toDate(this.state.currentDate);\n    };\n    // Date Formatting Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.formatDate = function (d, formatter) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.format(dateEnv.createMarker(d), createFormatter(formatter));\n    };\n    // `settings` is for formatter AND isEndExclusive\n    Calendar.prototype.formatRange = function (d0, d1, settings) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatRange(dateEnv.createMarker(d0), dateEnv.createMarker(d1), createFormatter(settings, this.opt('defaultRangeSeparator')), settings);\n    };\n    Calendar.prototype.formatIso = function (d, omitTime) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatIso(dateEnv.createMarker(d), { omitTime: omitTime });\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.windowResize = function (ev) {\n        if (!this.isHandlingWindowResize &&\n            this.component && // why?\n            ev.target === window // not a jqui resize event\n        ) {\n            this.isHandlingWindowResize = true;\n            this.updateSize();\n            this.publiclyTrigger('windowResize', [this.view]);\n            this.isHandlingWindowResize = false;\n        }\n    };\n    Calendar.prototype.updateSize = function () {\n        if (this.component) { // when?\n            this.component.updateSize(true);\n        }\n    };\n    // Component Registration\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.registerInteractiveComponent = function (component, settingsInput) {\n        var settings = parseInteractionSettings(component, settingsInput);\n        var DEFAULT_INTERACTIONS = [\n            EventClicking,\n            EventHovering\n        ];\n        var interactionClasses = DEFAULT_INTERACTIONS.concat(this.pluginSystem.hooks.componentInteractions);\n        var interactions = interactionClasses.map(function (interactionClass) {\n            return new interactionClass(settings);\n        });\n        this.interactionsStore[component.uid] = interactions;\n        interactionSettingsStore[component.uid] = settings;\n    };\n    Calendar.prototype.unregisterInteractiveComponent = function (component) {\n        for (var _i = 0, _a = this.interactionsStore[component.uid]; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener.destroy();\n        }\n        delete this.interactionsStore[component.uid];\n        delete interactionSettingsStore[component.uid];\n    };\n    // Date Selection / Event Selection / DayClick\n    // -----------------------------------------------------------------------------------------------------------------\n    // this public method receives start/end dates in any format, with any timezone\n    // NOTE: args were changed from v3\n    Calendar.prototype.select = function (dateOrObj, endDate) {\n        var selectionInput;\n        if (endDate == null) {\n            if (dateOrObj.start != null) {\n                selectionInput = dateOrObj;\n            }\n            else {\n                selectionInput = {\n                    start: dateOrObj,\n                    end: null\n                };\n            }\n        }\n        else {\n            selectionInput = {\n                start: dateOrObj,\n                end: endDate\n            };\n        }\n        var selection = parseDateSpan(selectionInput, this.dateEnv, createDuration({ days: 1 }) // TODO: cache this?\n        );\n        if (selection) { // throw parse error otherwise?\n            this.dispatch({ type: 'SELECT_DATES', selection: selection });\n            this.triggerDateSelect(selection);\n        }\n    };\n    // public method\n    Calendar.prototype.unselect = function (pev) {\n        if (this.state.dateSelection) {\n            this.dispatch({ type: 'UNSELECT_DATES' });\n            this.triggerDateUnselect(pev);\n        }\n    };\n    Calendar.prototype.triggerDateSelect = function (selection, pev) {\n        var arg = __assign({}, this.buildDateSpanApi(selection), { jsEvent: pev ? pev.origEvent : null, view: this.view });\n        this.publiclyTrigger('select', [arg]);\n    };\n    Calendar.prototype.triggerDateUnselect = function (pev) {\n        this.publiclyTrigger('unselect', [\n            {\n                jsEvent: pev ? pev.origEvent : null,\n                view: this.view\n            }\n        ]);\n    };\n    // TODO: receive pev?\n    Calendar.prototype.triggerDateClick = function (dateSpan, dayEl, view, ev) {\n        var arg = __assign({}, this.buildDatePointApi(dateSpan), { dayEl: dayEl, jsEvent: ev, // Is this always a mouse event? See #4655\n            view: view });\n        this.publiclyTrigger('dateClick', [arg]);\n    };\n    Calendar.prototype.buildDatePointApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.datePointTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDatePointApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    Calendar.prototype.buildDateSpanApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.dateSpanTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDateSpanApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    // Date Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a DateMarker for the current date, as defined by the client's computer or from the `now` option\n    Calendar.prototype.getNow = function () {\n        var now = this.opt('now');\n        if (typeof now === 'function') {\n            now = now();\n        }\n        if (now == null) {\n            return this.dateEnv.createNowMarker();\n        }\n        return this.dateEnv.createMarker(now);\n    };\n    // Event-Date Utilities\n    // -----------------------------------------------------------------------------------------------------------------\n    // Given an event's allDay status and start date, return what its fallback end date should be.\n    // TODO: rename to computeDefaultEventEnd\n    Calendar.prototype.getDefaultEventEnd = function (allDay, marker) {\n        var end = marker;\n        if (allDay) {\n            end = startOfDay(end);\n            end = this.dateEnv.add(end, this.defaultAllDayEventDuration);\n        }\n        else {\n            end = this.dateEnv.add(end, this.defaultTimedEventDuration);\n        }\n        return end;\n    };\n    // Public Events API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.addEvent = function (eventInput, sourceInput) {\n        if (eventInput instanceof EventApi) {\n            var def = eventInput._def;\n            var instance = eventInput._instance;\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventStore.defs[def.defId]) {\n                this.dispatch({\n                    type: 'ADD_EVENTS',\n                    eventStore: eventTupleToStore({ def: def, instance: instance }) // TODO: better util for two args?\n                });\n            }\n            return eventInput;\n        }\n        var sourceId;\n        if (sourceInput instanceof EventSourceApi) {\n            sourceId = sourceInput.internalEventSource.sourceId;\n        }\n        else if (sourceInput != null) {\n            var sourceApi = this.getEventSourceById(sourceInput); // TODO: use an internal function\n            if (!sourceApi) {\n                console.warn('Could not find an event source with ID \"' + sourceInput + '\"'); // TODO: test\n                return null;\n            }\n            else {\n                sourceId = sourceApi.internalEventSource.sourceId;\n            }\n        }\n        var tuple = parseEvent(eventInput, sourceId, this);\n        if (tuple) {\n            this.dispatch({\n                type: 'ADD_EVENTS',\n                eventStore: eventTupleToStore(tuple)\n            });\n            return new EventApi(this, tuple.def, tuple.def.recurringDef ? null : tuple.instance);\n        }\n        return null;\n    };\n    // TODO: optimize\n    Calendar.prototype.getEventById = function (id) {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        id = String(id);\n        for (var defId in defs) {\n            var def = defs[defId];\n            if (def.publicId === id) {\n                if (def.recurringDef) {\n                    return new EventApi(this, def, null);\n                }\n                else {\n                    for (var instanceId in instances) {\n                        var instance = instances[instanceId];\n                        if (instance.defId === def.defId) {\n                            return new EventApi(this, def, instance);\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.getEvents = function () {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        var eventApis = [];\n        for (var id in instances) {\n            var instance = instances[id];\n            var def = defs[instance.defId];\n            eventApis.push(new EventApi(this, def, instance));\n        }\n        return eventApis;\n    };\n    Calendar.prototype.removeAllEvents = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENTS' });\n    };\n    Calendar.prototype.rerenderEvents = function () {\n        this.dispatch({ type: 'RESET_EVENTS' });\n    };\n    // Public Event Sources API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getEventSources = function () {\n        var sourceHash = this.state.eventSources;\n        var sourceApis = [];\n        for (var internalId in sourceHash) {\n            sourceApis.push(new EventSourceApi(this, sourceHash[internalId]));\n        }\n        return sourceApis;\n    };\n    Calendar.prototype.getEventSourceById = function (id) {\n        var sourceHash = this.state.eventSources;\n        id = String(id);\n        for (var sourceId in sourceHash) {\n            if (sourceHash[sourceId].publicId === id) {\n                return new EventSourceApi(this, sourceHash[sourceId]);\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.addEventSource = function (sourceInput) {\n        if (sourceInput instanceof EventSourceApi) {\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventSources[sourceInput.internalEventSource.sourceId]) {\n                this.dispatch({\n                    type: 'ADD_EVENT_SOURCES',\n                    sources: [sourceInput.internalEventSource]\n                });\n            }\n            return sourceInput;\n        }\n        var eventSource = parseEventSource(sourceInput, this);\n        if (eventSource) { // TODO: error otherwise?\n            this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: [eventSource] });\n            return new EventSourceApi(this, eventSource);\n        }\n        return null;\n    };\n    Calendar.prototype.removeAllEventSources = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENT_SOURCES' });\n    };\n    Calendar.prototype.refetchEvents = function () {\n        this.dispatch({ type: 'FETCH_EVENT_SOURCES' });\n    };\n    // Scroll\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.scrollToTime = function (timeInput) {\n        var duration = createDuration(timeInput);\n        if (duration) {\n            this.component.view.scrollToDuration(duration);\n        }\n    };\n    return Calendar;\n}());\nEmitterMixin.mixInto(Calendar);\n// for memoizers\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildComponentContext$1(theme, dateEnv, options) {\n    return new ComponentContext(this, theme, dateEnv, options, null);\n}\nfunction buildDateEnv(locale, timeZone, namedTimeZoneImpl, firstDay, weekNumberCalculation, weekLabel, cmdFormatter) {\n    return new DateEnv({\n        calendarSystem: 'gregory',\n        timeZone: timeZone,\n        namedTimeZoneImpl: namedTimeZoneImpl,\n        locale: locale,\n        weekNumberCalculation: weekNumberCalculation,\n        firstDay: firstDay,\n        weekLabel: weekLabel,\n        cmdFormatter: cmdFormatter\n    });\n}\nfunction buildTheme(calendarOptions) {\n    var themeClass = this.pluginSystem.hooks.themeClasses[calendarOptions.themeSystem] || StandardTheme;\n    return new themeClass(calendarOptions);\n}\nfunction buildDelayedRerender(wait) {\n    var func = this.tryRerender.bind(this);\n    if (wait != null) {\n        func = debounce(func, wait);\n    }\n    return func;\n}\nfunction buildEventUiBySource(eventSources) {\n    return mapHash(eventSources, function (eventSource) {\n        return eventSource.ui;\n    });\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n    var eventUiBases = { '': eventUiSingleBase };\n    for (var defId in eventDefs) {\n        var def = eventDefs[defId];\n        if (def.sourceId && eventUiBySource[def.sourceId]) {\n            eventUiBases[defId] = eventUiBySource[def.sourceId];\n        }\n    }\n    return eventUiBases;\n}\n\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    function View(viewSpec, parentEl) {\n        var _this = _super.call(this, createElement('div', { className: 'fc-view fc-' + viewSpec.type + '-view' })) || this;\n        _this.renderDatesMem = memoizeRendering(_this.renderDatesWrap, _this.unrenderDatesWrap);\n        _this.renderBusinessHoursMem = memoizeRendering(_this.renderBusinessHours, _this.unrenderBusinessHours, [_this.renderDatesMem]);\n        _this.renderDateSelectionMem = memoizeRendering(_this.renderDateSelectionWrap, _this.unrenderDateSelectionWrap, [_this.renderDatesMem]);\n        _this.renderEventsMem = memoizeRendering(_this.renderEvents, _this.unrenderEvents, [_this.renderDatesMem]);\n        _this.renderEventSelectionMem = memoizeRendering(_this.renderEventSelectionWrap, _this.unrenderEventSelectionWrap, [_this.renderEventsMem]);\n        _this.renderEventDragMem = memoizeRendering(_this.renderEventDragWrap, _this.unrenderEventDragWrap, [_this.renderDatesMem]);\n        _this.renderEventResizeMem = memoizeRendering(_this.renderEventResizeWrap, _this.unrenderEventResizeWrap, [_this.renderDatesMem]);\n        _this.viewSpec = viewSpec;\n        _this.type = viewSpec.type;\n        parentEl.appendChild(_this.el);\n        _this.initialize();\n        return _this;\n    }\n    View.prototype.initialize = function () {\n    };\n    Object.defineProperty(View.prototype, \"activeStart\", {\n        // Date Setting/Unsetting\n        // -----------------------------------------------------------------------------------------------------------------\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"activeEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentStart\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // General Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.render = function (props, context) {\n        this.renderDatesMem(props.dateProfile);\n        this.renderBusinessHoursMem(props.businessHours);\n        this.renderDateSelectionMem(props.dateSelection);\n        this.renderEventsMem(props.eventStore);\n        this.renderEventSelectionMem(props.eventSelection);\n        this.renderEventDragMem(props.eventDrag);\n        this.renderEventResizeMem(props.eventResize);\n    };\n    View.prototype.beforeUpdate = function () {\n        this.addScroll(this.queryScroll());\n    };\n    View.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderDatesMem.unrender(); // should unrender everything else\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        var calendar = this.context.calendar;\n        if (isResize) {\n            this.addScroll(this.queryScroll()); // NOTE: same code as in beforeUpdate\n        }\n        if (isResize || // HACKS...\n            calendar.isViewUpdated ||\n            calendar.isDatesUpdated ||\n            calendar.isEventsUpdated) {\n            // sort of the catch-all sizing\n            // anything that might cause dimension changes\n            this.updateBaseSize(isResize, viewHeight, isAuto);\n        }\n        // NOTE: popScroll is called by CalendarComponent\n    };\n    View.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n    };\n    // Date Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDatesWrap = function (dateProfile) {\n        this.renderDates(dateProfile);\n        this.addScroll({\n            duration: createDuration(this.context.options.scrollTime)\n        });\n    };\n    View.prototype.unrenderDatesWrap = function () {\n        this.stopNowIndicator();\n        this.unrenderDates();\n    };\n    View.prototype.renderDates = function (dateProfile) { };\n    View.prototype.unrenderDates = function () { };\n    // Business Hours\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderBusinessHours = function (businessHours) { };\n    View.prototype.unrenderBusinessHours = function () { };\n    // Date Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.renderDateSelection(selection);\n        }\n    };\n    View.prototype.unrenderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.unrenderDateSelection(selection);\n        }\n    };\n    View.prototype.renderDateSelection = function (selection) { };\n    View.prototype.unrenderDateSelection = function (selection) { };\n    // Event Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEvents = function (eventStore) { };\n    View.prototype.unrenderEvents = function () { };\n    // util for subclasses\n    View.prototype.sliceEvents = function (eventStore, allDay) {\n        var props = this.props;\n        return sliceEventStore(eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? this.context.nextDayThreshold : null).fg;\n    };\n    // Event Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.renderEventSelection(instanceId);\n        }\n    };\n    View.prototype.unrenderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.unrenderEventSelection(instanceId);\n        }\n    };\n    View.prototype.renderEventSelection = function (instanceId) { };\n    View.prototype.unrenderEventSelection = function (instanceId) { };\n    // Event Drag\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventDragWrap = function (state) {\n        if (state) {\n            this.renderEventDrag(state);\n        }\n    };\n    View.prototype.unrenderEventDragWrap = function (state) {\n        if (state) {\n            this.unrenderEventDrag(state);\n        }\n    };\n    View.prototype.renderEventDrag = function (state) { };\n    View.prototype.unrenderEventDrag = function (state) { };\n    // Event Resize\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventResizeWrap = function (state) {\n        if (state) {\n            this.renderEventResize(state);\n        }\n    };\n    View.prototype.unrenderEventResizeWrap = function (state) {\n        if (state) {\n            this.unrenderEventResize(state);\n        }\n    };\n    View.prototype.renderEventResize = function (state) { };\n    View.prototype.unrenderEventResize = function (state) { };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Immediately render the current time indicator and begins re-rendering it at an interval,\n    // which is defined by this.getNowIndicatorUnit().\n    // TODO: somehow do this for the current whole day's background too\n    // USAGE: must be called manually from subclasses' render methods! don't need to call stopNowIndicator tho\n    View.prototype.startNowIndicator = function (dateProfile, dateProfileGenerator) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, dateEnv = _a.dateEnv, options = _a.options;\n        var unit;\n        var update;\n        var delay; // ms wait value\n        if (options.nowIndicator && !this.initialNowDate) {\n            unit = this.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n            if (unit) {\n                update = this.updateNowIndicator.bind(this);\n                this.initialNowDate = calendar.getNow();\n                this.initialNowQueriedMs = new Date().valueOf();\n                // wait until the beginning of the next interval\n                delay = dateEnv.add(dateEnv.startOf(this.initialNowDate, unit), createDuration(1, unit)).valueOf() - this.initialNowDate.valueOf();\n                // TODO: maybe always use setTimeout, waiting until start of next unit\n                this.nowIndicatorTimeoutID = setTimeout(function () {\n                    _this.nowIndicatorTimeoutID = null;\n                    update();\n                    if (unit === 'second') {\n                        delay = 1000; // every second\n                    }\n                    else {\n                        delay = 1000 * 60; // otherwise, every minute\n                    }\n                    _this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n                }, delay);\n            }\n            // rendering will be initiated in updateSize\n        }\n    };\n    // rerenders the now indicator, computing the new current time from the amount of time that has passed\n    // since the initial getNow call.\n    View.prototype.updateNowIndicator = function () {\n        if (this.props.dateProfile && // a way to determine if dates were rendered yet\n            this.initialNowDate // activated before?\n        ) {\n            this.unrenderNowIndicator(); // won't unrender if unnecessary\n            this.renderNowIndicator(addMs(this.initialNowDate, new Date().valueOf() - this.initialNowQueriedMs));\n            this.isNowIndicatorRendered = true;\n        }\n    };\n    // Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n    // Won't cause side effects if indicator isn't rendered.\n    View.prototype.stopNowIndicator = function () {\n        if (this.nowIndicatorTimeoutID) {\n            clearTimeout(this.nowIndicatorTimeoutID);\n            this.nowIndicatorTimeoutID = null;\n        }\n        if (this.nowIndicatorIntervalID) {\n            clearInterval(this.nowIndicatorIntervalID);\n            this.nowIndicatorIntervalID = null;\n        }\n        if (this.isNowIndicatorRendered) {\n            this.unrenderNowIndicator();\n            this.isNowIndicatorRendered = false;\n        }\n    };\n    View.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        // subclasses should implement\n    };\n    // Renders a current time indicator at the given datetime\n    View.prototype.renderNowIndicator = function (date) {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    // Undoes the rendering actions from renderNowIndicator\n    View.prototype.unrenderNowIndicator = function () {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    /* Scroller\n    ------------------------------------------------------------------------------------------------------------------*/\n    View.prototype.addScroll = function (scroll, isForced) {\n        if (isForced) {\n            scroll.isForced = isForced;\n        }\n        __assign(this.queuedScroll || (this.queuedScroll = {}), scroll);\n    };\n    View.prototype.popScroll = function (isResize) {\n        this.applyQueuedScroll(isResize);\n        this.queuedScroll = null;\n    };\n    View.prototype.applyQueuedScroll = function (isResize) {\n        if (this.queuedScroll) {\n            this.applyScroll(this.queuedScroll, isResize);\n        }\n    };\n    View.prototype.queryScroll = function () {\n        var scroll = {};\n        if (this.props.dateProfile) { // dates rendered yet?\n            __assign(scroll, this.queryDateScroll());\n        }\n        return scroll;\n    };\n    View.prototype.applyScroll = function (scroll, isResize) {\n        var duration = scroll.duration, isForced = scroll.isForced;\n        if (duration != null && !isForced) {\n            delete scroll.duration;\n            if (this.props.dateProfile) { // dates rendered yet?\n                __assign(scroll, this.computeDateScroll(duration));\n            }\n        }\n        if (this.props.dateProfile) { // dates rendered yet?\n            this.applyDateScroll(scroll);\n        }\n    };\n    View.prototype.computeDateScroll = function (duration) {\n        return {}; // subclasses must implement\n    };\n    View.prototype.queryDateScroll = function () {\n        return {}; // subclasses must implement\n    };\n    View.prototype.applyDateScroll = function (scroll) {\n        // subclasses must implement\n    };\n    // for API\n    View.prototype.scrollToDuration = function (duration) {\n        this.applyScroll({ duration: duration }, false);\n    };\n    return View;\n}(DateComponent));\nEmitterMixin.mixInto(View);\nView.prototype.usesMinMaxTime = false;\nView.prototype.dateProfileGeneratorClass = DateProfileGenerator;\n\nvar FgEventRenderer = /** @class */ (function () {\n    function FgEventRenderer() {\n        this.segs = [];\n        this.isSizeDirty = false;\n    }\n    FgEventRenderer.prototype.renderSegs = function (context, segs, mirrorInfo) {\n        this.context = context;\n        this.rangeUpdated(); // called too frequently :(\n        // render an `.el` on each seg\n        // returns a subset of the segs. segs that were actually rendered\n        segs = this.renderSegEls(segs, mirrorInfo);\n        this.segs = segs;\n        this.attachSegs(segs, mirrorInfo);\n        this.isSizeDirty = true;\n        triggerRenderedSegs(this.context, this.segs, Boolean(mirrorInfo));\n    };\n    FgEventRenderer.prototype.unrender = function (context, _segs, mirrorInfo) {\n        triggerWillRemoveSegs(this.context, this.segs, Boolean(mirrorInfo));\n        this.detachSegs(this.segs);\n        this.segs = [];\n    };\n    // Updates values that rely on options and also relate to range\n    FgEventRenderer.prototype.rangeUpdated = function () {\n        var options = this.context.options;\n        var displayEventTime;\n        var displayEventEnd;\n        this.eventTimeFormat = createFormatter(options.eventTimeFormat || this.computeEventTimeFormat(), options.defaultRangeSeparator);\n        displayEventTime = options.displayEventTime;\n        if (displayEventTime == null) {\n            displayEventTime = this.computeDisplayEventTime(); // might be based off of range\n        }\n        displayEventEnd = options.displayEventEnd;\n        if (displayEventEnd == null) {\n            displayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n        }\n        this.displayEventTime = displayEventTime;\n        this.displayEventEnd = displayEventEnd;\n    };\n    // Renders and assigns an `el` property for each foreground event segment.\n    // Only returns segments that successfully rendered.\n    FgEventRenderer.prototype.renderSegEls = function (segs, mirrorInfo) {\n        var html = '';\n        var i;\n        if (segs.length) { // don't build an empty html string\n            // build a large concatenation of event segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(segs[i], mirrorInfo);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            segs = filterSegsViaEls(this.context, segs, Boolean(mirrorInfo));\n        }\n        return segs;\n    };\n    // Generic utility for generating the HTML classNames for an event segment's element\n    FgEventRenderer.prototype.getSegClasses = function (seg, isDraggable, isResizable, mirrorInfo) {\n        var classes = [\n            'fc-event',\n            seg.isStart ? 'fc-start' : 'fc-not-start',\n            seg.isEnd ? 'fc-end' : 'fc-not-end'\n        ].concat(seg.eventRange.ui.classNames);\n        if (isDraggable) {\n            classes.push('fc-draggable');\n        }\n        if (isResizable) {\n            classes.push('fc-resizable');\n        }\n        if (mirrorInfo) {\n            classes.push('fc-mirror');\n            if (mirrorInfo.isDragging) {\n                classes.push('fc-dragging');\n            }\n            if (mirrorInfo.isResizing) {\n                classes.push('fc-resizing');\n            }\n        }\n        return classes;\n    };\n    // Compute the text that should be displayed on an event's element.\n    // `range` can be the Event object itself, or something range-like, with at least a `start`.\n    // If event times are disabled, or the event has no time, will return a blank string.\n    // If not specified, formatter will default to the eventTimeFormat setting,\n    // and displayEnd will default to the displayEventEnd setting.\n    FgEventRenderer.prototype.getTimeText = function (eventRange, formatter, displayEnd) {\n        var def = eventRange.def, instance = eventRange.instance;\n        return this._getTimeText(instance.range.start, def.hasEnd ? instance.range.end : null, def.allDay, formatter, displayEnd, instance.forcedStartTzo, instance.forcedEndTzo);\n    };\n    FgEventRenderer.prototype._getTimeText = function (start, end, allDay, formatter, displayEnd, forcedStartTzo, forcedEndTzo) {\n        var dateEnv = this.context.dateEnv;\n        if (formatter == null) {\n            formatter = this.eventTimeFormat;\n        }\n        if (displayEnd == null) {\n            displayEnd = this.displayEventEnd;\n        }\n        if (this.displayEventTime && !allDay) {\n            if (displayEnd && end) {\n                return dateEnv.formatRange(start, end, formatter, {\n                    forcedStartTzo: forcedStartTzo,\n                    forcedEndTzo: forcedEndTzo\n                });\n            }\n            else {\n                return dateEnv.format(start, formatter, {\n                    forcedTzo: forcedStartTzo\n                });\n            }\n        }\n        return '';\n    };\n    FgEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true\n        };\n    };\n    FgEventRenderer.prototype.computeDisplayEventTime = function () {\n        return true;\n    };\n    FgEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return true;\n    };\n    // Utility for generating event skin-related CSS properties\n    FgEventRenderer.prototype.getSkinCss = function (ui) {\n        return {\n            'background-color': ui.backgroundColor,\n            'border-color': ui.borderColor,\n            color: ui.textColor\n        };\n    };\n    FgEventRenderer.prototype.sortEventSegs = function (segs) {\n        var specs = this.context.eventOrderSpecs;\n        var objs = segs.map(buildSegCompareObj);\n        objs.sort(function (obj0, obj1) {\n            return compareByFieldSpecs(obj0, obj1, specs);\n        });\n        return objs.map(function (c) {\n            return c._seg;\n        });\n    };\n    FgEventRenderer.prototype.computeSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.computeSegSizes(this.segs);\n        }\n    };\n    FgEventRenderer.prototype.assignSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.assignSegSizes(this.segs);\n            this.isSizeDirty = false;\n        }\n    };\n    FgEventRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FgEventRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    // Manipulation on rendered segs\n    FgEventRenderer.prototype.hideByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.showByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = '';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.selectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                var eventInstance = seg.eventRange.instance;\n                if (eventInstance && eventInstance.instanceId === instanceId &&\n                    seg.el // necessary?\n                ) {\n                    seg.el.classList.add('fc-selected');\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.unselectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (seg.el) { // necessary?\n                    seg.el.classList.remove('fc-selected');\n                }\n            }\n        }\n    };\n    return FgEventRenderer;\n}());\n// returns a object with all primitive props that can be compared\nfunction buildSegCompareObj(seg) {\n    var eventDef = seg.eventRange.def;\n    var range = seg.eventRange.instance.range;\n    var start = range.start ? range.start.valueOf() : 0; // TODO: better support for open-range events\n    var end = range.end ? range.end.valueOf() : 0; // \"\n    return __assign({}, eventDef.extendedProps, eventDef, { id: eventDef.publicId, start: start,\n        end: end, duration: end - start, allDay: Number(eventDef.allDay), _seg: seg // for later retrieval\n     });\n}\n\n/*\nTODO: when refactoring this class, make a new FillRenderer instance for each `type`\n*/\nvar FillRenderer = /** @class */ (function () {\n    function FillRenderer() {\n        this.fillSegTag = 'div';\n        this.dirtySizeFlags = {};\n        this.containerElsByType = {};\n        this.segsByType = {};\n    }\n    FillRenderer.prototype.getSegsByType = function (type) {\n        return this.segsByType[type] || [];\n    };\n    FillRenderer.prototype.renderSegs = function (type, context, segs) {\n        var _a;\n        this.context = context;\n        var renderedSegs = this.renderSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n        var containerEls = this.attachSegs(type, renderedSegs);\n        if (containerEls) {\n            (_a = (this.containerElsByType[type] || (this.containerElsByType[type] = []))).push.apply(_a, containerEls);\n        }\n        this.segsByType[type] = renderedSegs;\n        if (type === 'bgEvent') {\n            triggerRenderedSegs(context, renderedSegs, false); // isMirror=false\n        }\n        this.dirtySizeFlags[type] = true;\n    };\n    // Unrenders a specific type of fill that is currently rendered on the grid\n    FillRenderer.prototype.unrender = function (type, context) {\n        var segs = this.segsByType[type];\n        if (segs) {\n            if (type === 'bgEvent') {\n                triggerWillRemoveSegs(context, segs, false); // isMirror=false\n            }\n            this.detachSegs(type, segs);\n        }\n    };\n    // Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n    // Only returns segments that successfully rendered.\n    FillRenderer.prototype.renderSegEls = function (type, segs) {\n        var _this = this;\n        var html = '';\n        var i;\n        if (segs.length) {\n            // build a large concatenation of segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(type, segs[i]);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            if (type === 'bgEvent') {\n                segs = filterSegsViaEls(this.context, segs, false // isMirror. background events can never be mirror elements\n                );\n            }\n            // correct element type? (would be bad if a non-TD were inserted into a table for example)\n            segs = segs.filter(function (seg) {\n                return elementMatches(seg.el, _this.fillSegTag);\n            });\n        }\n        return segs;\n    };\n    // Builds the HTML needed for one fill segment. Generic enough to work with different types.\n    FillRenderer.prototype.renderSegHtml = function (type, seg) {\n        var css = null;\n        var classNames = [];\n        if (type !== 'highlight' && type !== 'businessHours') {\n            css = {\n                'background-color': seg.eventRange.ui.backgroundColor\n            };\n        }\n        if (type !== 'highlight') {\n            classNames = classNames.concat(seg.eventRange.ui.classNames);\n        }\n        if (type === 'businessHours') {\n            classNames.push('fc-bgevent');\n        }\n        else {\n            classNames.push('fc-' + type.toLowerCase());\n        }\n        return '<' + this.fillSegTag +\n            (classNames.length ? ' class=\"' + classNames.join(' ') + '\"' : '') +\n            (css ? ' style=\"' + cssToStr(css) + '\"' : '') +\n            '></' + this.fillSegTag + '>';\n    };\n    FillRenderer.prototype.detachSegs = function (type, segs) {\n        var containerEls = this.containerElsByType[type];\n        if (containerEls) {\n            containerEls.forEach(removeElement);\n            delete this.containerElsByType[type];\n        }\n    };\n    FillRenderer.prototype.computeSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.computeSegSizes(this.segsByType[type]);\n            }\n        }\n    };\n    FillRenderer.prototype.assignSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.assignSegSizes(this.segsByType[type]);\n            }\n        }\n        this.dirtySizeFlags = {};\n    };\n    FillRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FillRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    return FillRenderer;\n}());\n\nvar NamedTimeZoneImpl = /** @class */ (function () {\n    function NamedTimeZoneImpl(timeZoneName) {\n        this.timeZoneName = timeZoneName;\n    }\n    return NamedTimeZoneImpl;\n}());\n\n/*\nAn abstraction for a dragging interaction originating on an event.\nDoes higher-level things than PointerDragger, such as possibly:\n- a \"mirror\" that moves with the pointer\n- a minimum number of pixels or other criteria for a true drag to begin\n\nsubclasses must emit:\n- pointerdown\n- dragstart\n- dragmove\n- pointerup\n- dragend\n*/\nvar ElementDragging = /** @class */ (function () {\n    function ElementDragging(el) {\n        this.emitter = new EmitterMixin();\n    }\n    ElementDragging.prototype.destroy = function () {\n    };\n    ElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        // optional\n    };\n    return ElementDragging;\n}());\n\nfunction formatDate(dateInput, settings) {\n    if (settings === void 0) { settings = {}; }\n    var dateEnv = buildDateEnv$1(settings);\n    var formatter = createFormatter(settings);\n    var dateMeta = dateEnv.createMarkerMeta(dateInput);\n    if (!dateMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.format(dateMeta.marker, formatter, {\n        forcedTzo: dateMeta.forcedTzo\n    });\n}\nfunction formatRange(startInput, endInput, settings // mixture of env and formatter settings\n) {\n    var dateEnv = buildDateEnv$1(typeof settings === 'object' && settings ? settings : {}); // pass in if non-null object\n    var formatter = createFormatter(settings, globalDefaults.defaultRangeSeparator);\n    var startMeta = dateEnv.createMarkerMeta(startInput);\n    var endMeta = dateEnv.createMarkerMeta(endInput);\n    if (!startMeta || !endMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n        forcedStartTzo: startMeta.forcedTzo,\n        forcedEndTzo: endMeta.forcedTzo,\n        isEndExclusive: settings.isEndExclusive\n    });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv$1(settings) {\n    var locale = buildLocale(settings.locale || 'en', parseRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n    // ensure required settings\n    settings = __assign({ timeZone: globalDefaults.timeZone, calendarSystem: 'gregory' }, settings, { locale: locale });\n    return new DateEnv(settings);\n}\n\nvar DRAG_META_PROPS = {\n    startTime: createDuration,\n    duration: createDuration,\n    create: Boolean,\n    sourceId: String\n};\nvar DRAG_META_DEFAULTS = {\n    create: true\n};\nfunction parseDragMeta(raw) {\n    var leftoverProps = {};\n    var refined = refineProps(raw, DRAG_META_PROPS, DRAG_META_DEFAULTS, leftoverProps);\n    refined.leftoverProps = leftoverProps;\n    return refined;\n}\n\n// Computes a default column header formatting string if `colFormat` is not explicitly defined\nfunction computeFallbackHeaderFormat(datesRepDistinctDays, dayCnt) {\n    // if more than one week row, or if there are a lot of columns with not much space,\n    // put just the day numbers will be in each cell\n    if (!datesRepDistinctDays || dayCnt > 10) {\n        return { weekday: 'short' }; // \"Sat\"\n    }\n    else if (dayCnt > 1) {\n        return { weekday: 'short', month: 'numeric', day: 'numeric', omitCommas: true }; // \"Sat 11/12\"\n    }\n    else {\n        return { weekday: 'long' }; // \"Saturday\"\n    }\n}\nfunction renderDateCell(dateMarker, dateProfile, datesRepDistinctDays, colCnt, colHeadFormat, context, colspan, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme, options = context.options;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, dateMarker); // TODO: called too frequently. cache somehow.\n    var classNames = [\n        'fc-day-header',\n        theme.getClass('widgetHeader')\n    ];\n    var innerHtml;\n    if (typeof options.columnHeaderHtml === 'function') {\n        innerHtml = options.columnHeaderHtml(dateEnv.toDate(dateMarker));\n    }\n    else if (typeof options.columnHeaderText === 'function') {\n        innerHtml = htmlEscape(options.columnHeaderText(dateEnv.toDate(dateMarker)));\n    }\n    else {\n        innerHtml = htmlEscape(dateEnv.format(dateMarker, colHeadFormat));\n    }\n    // if only one row of days, the classNames on the header can represent the specific days beneath\n    if (datesRepDistinctDays) {\n        classNames = classNames.concat(\n        // includes the day-of-week class\n        // noThemeHighlight=true (don't highlight the header)\n        getDayClasses(dateMarker, dateProfile, context, true));\n    }\n    else {\n        classNames.push('fc-' + DAY_IDS[dateMarker.getUTCDay()]); // only add the day-of-week class\n    }\n    return '' +\n        '<th class=\"' + classNames.join(' ') + '\"' +\n        ((isDateValid && datesRepDistinctDays) ?\n            ' data-date=\"' + dateEnv.formatIso(dateMarker, { omitTime: true }) + '\"' :\n            '') +\n        (colspan > 1 ?\n            ' colspan=\"' + colspan + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '>' +\n        (isDateValid ?\n            // don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n            buildGotoAnchorHtml(options, dateEnv, { date: dateMarker, forceOff: !datesRepDistinctDays || colCnt === 1 }, innerHtml) :\n            // if not valid, display text, but no link\n            innerHtml) +\n        '</th>';\n}\n\nvar DayHeader = /** @class */ (function (_super) {\n    __extends(DayHeader, _super);\n    function DayHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    DayHeader.prototype.render = function (props, context) {\n        var dates = props.dates, datesRepDistinctDays = props.datesRepDistinctDays;\n        var parts = [];\n        this.renderSkeleton(context);\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        var colHeadFormat = createFormatter(context.options.columnHeaderFormat ||\n            computeFallbackHeaderFormat(datesRepDistinctDays, dates.length));\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            parts.push(renderDateCell(date, props.dateProfile, datesRepDistinctDays, dates.length, colHeadFormat, context));\n        }\n        if (context.isRtl) {\n            parts.reverse();\n        }\n        this.thead.innerHTML = '<tr>' + parts.join('') + '</tr>';\n    };\n    DayHeader.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    DayHeader.prototype._renderSkeleton = function (context) {\n        var theme = context.theme;\n        var parentEl = this.parentEl;\n        parentEl.innerHTML = ''; // because might be nbsp\n        parentEl.appendChild(this.el = htmlToElement('<div class=\"fc-row ' + theme.getClass('headerRow') + '\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            '<thead></thead>' +\n            '</table>' +\n            '</div>'));\n        this.thead = this.el.querySelector('thead');\n    };\n    DayHeader.prototype._unrenderSkeleton = function () {\n        removeElement(this.el);\n    };\n    return DayHeader;\n}(Component));\n\nvar DaySeries = /** @class */ (function () {\n    function DaySeries(range, dateProfileGenerator) {\n        var date = range.start;\n        var end = range.end;\n        var indices = [];\n        var dates = [];\n        var dayIndex = -1;\n        while (date < end) { // loop each day from start to end\n            if (dateProfileGenerator.isHiddenDay(date)) {\n                indices.push(dayIndex + 0.5); // mark that it's between indices\n            }\n            else {\n                dayIndex++;\n                indices.push(dayIndex);\n                dates.push(date);\n            }\n            date = addDays(date, 1);\n        }\n        this.dates = dates;\n        this.indices = indices;\n        this.cnt = dates.length;\n    }\n    DaySeries.prototype.sliceRange = function (range) {\n        var firstIndex = this.getDateDayIndex(range.start); // inclusive first index\n        var lastIndex = this.getDateDayIndex(addDays(range.end, -1)); // inclusive last index\n        var clippedFirstIndex = Math.max(0, firstIndex);\n        var clippedLastIndex = Math.min(this.cnt - 1, lastIndex);\n        // deal with in-between indices\n        clippedFirstIndex = Math.ceil(clippedFirstIndex); // in-between starts round to next cell\n        clippedLastIndex = Math.floor(clippedLastIndex); // in-between ends round to prev cell\n        if (clippedFirstIndex <= clippedLastIndex) {\n            return {\n                firstIndex: clippedFirstIndex,\n                lastIndex: clippedLastIndex,\n                isStart: firstIndex === clippedFirstIndex,\n                isEnd: lastIndex === clippedLastIndex\n            };\n        }\n        else {\n            return null;\n        }\n    };\n    // Given a date, returns its chronolocial cell-index from the first cell of the grid.\n    // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n    // If before the first offset, returns a negative number.\n    // If after the last offset, returns an offset past the last cell offset.\n    // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n    DaySeries.prototype.getDateDayIndex = function (date) {\n        var indices = this.indices;\n        var dayOffset = Math.floor(diffDays(this.dates[0], date));\n        if (dayOffset < 0) {\n            return indices[0] - 1;\n        }\n        else if (dayOffset >= indices.length) {\n            return indices[indices.length - 1] + 1;\n        }\n        else {\n            return indices[dayOffset];\n        }\n    };\n    return DaySeries;\n}());\n\nvar DayTable = /** @class */ (function () {\n    function DayTable(daySeries, breakOnWeeks) {\n        var dates = daySeries.dates;\n        var daysPerRow;\n        var firstDay;\n        var rowCnt;\n        if (breakOnWeeks) {\n            // count columns until the day-of-week repeats\n            firstDay = dates[0].getUTCDay();\n            for (daysPerRow = 1; daysPerRow < dates.length; daysPerRow++) {\n                if (dates[daysPerRow].getUTCDay() === firstDay) {\n                    break;\n                }\n            }\n            rowCnt = Math.ceil(dates.length / daysPerRow);\n        }\n        else {\n            rowCnt = 1;\n            daysPerRow = dates.length;\n        }\n        this.rowCnt = rowCnt;\n        this.colCnt = daysPerRow;\n        this.daySeries = daySeries;\n        this.cells = this.buildCells();\n        this.headerDates = this.buildHeaderDates();\n    }\n    DayTable.prototype.buildCells = function () {\n        var rows = [];\n        for (var row = 0; row < this.rowCnt; row++) {\n            var cells = [];\n            for (var col = 0; col < this.colCnt; col++) {\n                cells.push(this.buildCell(row, col));\n            }\n            rows.push(cells);\n        }\n        return rows;\n    };\n    DayTable.prototype.buildCell = function (row, col) {\n        return {\n            date: this.daySeries.dates[row * this.colCnt + col]\n        };\n    };\n    DayTable.prototype.buildHeaderDates = function () {\n        var dates = [];\n        for (var col = 0; col < this.colCnt; col++) {\n            dates.push(this.cells[0][col].date);\n        }\n        return dates;\n    };\n    DayTable.prototype.sliceRange = function (range) {\n        var colCnt = this.colCnt;\n        var seriesSeg = this.daySeries.sliceRange(range);\n        var segs = [];\n        if (seriesSeg) {\n            var firstIndex = seriesSeg.firstIndex, lastIndex = seriesSeg.lastIndex;\n            var index = firstIndex;\n            while (index <= lastIndex) {\n                var row = Math.floor(index / colCnt);\n                var nextIndex = Math.min((row + 1) * colCnt, lastIndex + 1);\n                segs.push({\n                    row: row,\n                    firstCol: index % colCnt,\n                    lastCol: (nextIndex - 1) % colCnt,\n                    isStart: seriesSeg.isStart && index === firstIndex,\n                    isEnd: seriesSeg.isEnd && (nextIndex - 1) === lastIndex\n                });\n                index = nextIndex;\n            }\n        }\n        return segs;\n    };\n    return DayTable;\n}());\n\nvar Slicer = /** @class */ (function () {\n    function Slicer() {\n        this.sliceBusinessHours = memoize(this._sliceBusinessHours);\n        this.sliceDateSelection = memoize(this._sliceDateSpan);\n        this.sliceEventStore = memoize(this._sliceEventStore);\n        this.sliceEventDrag = memoize(this._sliceInteraction);\n        this.sliceEventResize = memoize(this._sliceInteraction);\n    }\n    Slicer.prototype.sliceProps = function (props, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        var eventUiBases = props.eventUiBases;\n        var eventSegs = this.sliceEventStore.apply(this, [props.eventStore, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs));\n        return {\n            dateSelectionSegs: this.sliceDateSelection.apply(this, [props.dateSelection, eventUiBases, component].concat(extraArgs)),\n            businessHourSegs: this.sliceBusinessHours.apply(this, [props.businessHours, dateProfile, nextDayThreshold, calendar, component].concat(extraArgs)),\n            fgEventSegs: eventSegs.fg,\n            bgEventSegs: eventSegs.bg,\n            eventDrag: this.sliceEventDrag.apply(this, [props.eventDrag, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventResize: this.sliceEventResize.apply(this, [props.eventResize, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventSelection: props.eventSelection\n        }; // TODO: give interactionSegs?\n    };\n    Slicer.prototype.sliceNowDate = function (// does not memoize\n    date, component) {\n        var extraArgs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            extraArgs[_i - 2] = arguments[_i];\n        }\n        return this._sliceDateSpan.apply(this, [{ range: { start: date, end: addMs(date, 1) }, allDay: false },\n            {},\n            component].concat(extraArgs));\n    };\n    Slicer.prototype._sliceBusinessHours = function (businessHours, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!businessHours) {\n            return [];\n        }\n        return this._sliceEventStore.apply(this, [expandRecurring(businessHours, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), calendar),\n            {},\n            dateProfile,\n            nextDayThreshold,\n            component].concat(extraArgs)).bg;\n    };\n    Slicer.prototype._sliceEventStore = function (eventStore, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (eventStore) {\n            var rangeRes = sliceEventStore(eventStore, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n            return {\n                bg: this.sliceEventRanges(rangeRes.bg, component, extraArgs),\n                fg: this.sliceEventRanges(rangeRes.fg, component, extraArgs)\n            };\n        }\n        else {\n            return { bg: [], fg: [] };\n        }\n    };\n    Slicer.prototype._sliceInteraction = function (interaction, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!interaction) {\n            return null;\n        }\n        var rangeRes = sliceEventStore(interaction.mutatedEvents, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n        return {\n            segs: this.sliceEventRanges(rangeRes.fg, component, extraArgs),\n            affectedInstances: interaction.affectedEvents.instances,\n            isEvent: interaction.isEvent,\n            sourceSeg: interaction.origSeg\n        };\n    };\n    Slicer.prototype._sliceDateSpan = function (dateSpan, eventUiBases, component) {\n        var extraArgs = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            extraArgs[_i - 3] = arguments[_i];\n        }\n        if (!dateSpan) {\n            return [];\n        }\n        var eventRange = fabricateEventRange(dateSpan, eventUiBases, component.context.calendar);\n        var segs = this.sliceRange.apply(this, [dateSpan.range].concat(extraArgs));\n        for (var _a = 0, segs_1 = segs; _a < segs_1.length; _a++) {\n            var seg = segs_1[_a];\n            seg.component = component;\n            seg.eventRange = eventRange;\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRanges = function (eventRanges, component, // TODO: kill\n    extraArgs) {\n        var segs = [];\n        for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n            var eventRange = eventRanges_1[_i];\n            segs.push.apply(segs, this.sliceEventRange(eventRange, component, extraArgs));\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRange = function (eventRange, component, // TODO: kill\n    extraArgs) {\n        var segs = this.sliceRange.apply(this, [eventRange.range].concat(extraArgs));\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            seg.component = component;\n            seg.eventRange = eventRange;\n            seg.isStart = eventRange.isStart && seg.isStart;\n            seg.isEnd = eventRange.isEnd && seg.isEnd;\n        }\n        return segs;\n    };\n    return Slicer;\n}());\n/*\nfor incorporating minTime/maxTime if appropriate\nTODO: should be part of DateProfile!\nTimelineDateProfile already does this btw\n*/\nfunction computeActiveRange(dateProfile, isComponentAllDay) {\n    var range = dateProfile.activeRange;\n    if (isComponentAllDay) {\n        return range;\n    }\n    return {\n        start: addMs(range.start, dateProfile.minTime.milliseconds),\n        end: addMs(range.end, dateProfile.maxTime.milliseconds - 864e5) // 864e5 = ms in a day\n    };\n}\n\n// exports\n// --------------------------------------------------------------------------------------------------\nvar version = '4.4.0';\n\nexport { Calendar, Component, ComponentContext, DateComponent, DateEnv, DateProfileGenerator, DayHeader, DaySeries, DayTable, ElementDragging, ElementScrollController, EmitterMixin, EventApi, FgEventRenderer, FillRenderer, Interaction, Mixin, NamedTimeZoneImpl, PositionCache, ScrollComponent, ScrollController, Slicer, Splitter, Theme, View, WindowScrollController, addDays, addDurations, addMs, addWeeks, allowContextMenu, allowSelection, appendToElement, applyAll, applyMutationToEventStore, applyStyle, applyStyleProp, asRoughMinutes, asRoughMs, asRoughSeconds, buildGotoAnchorHtml, buildSegCompareObj, capitaliseFirstLetter, combineEventUis, compareByFieldSpec, compareByFieldSpecs, compareNumbers, compensateScroll, computeClippingRect, computeEdges, computeEventDraggable, computeEventEndResizable, computeEventStartResizable, computeFallbackHeaderFormat, computeHeightAndMargins, computeInnerRect, computeRect, computeVisibleDayRange, config, constrainPoint, createDuration, createElement, createEmptyEventStore, createEventInstance, createFormatter, createPlugin, cssToStr, debounce, diffDates, diffDayAndTime, diffDays, diffPoints, diffWeeks, diffWholeDays, diffWholeWeeks, disableCursor, distributeHeight, elementClosest, elementMatches, enableCursor, eventTupleToStore, filterEventStoreDefs, filterHash, findChildren, findElements, flexibleCompare, forceClassName, formatDate, formatIsoTimeString, formatRange, getAllDayHtml, getClippingParents, getDayClasses, getElSeg, getRectCenter, getRelevantEvents, globalDefaults, greatestDurationDenominator, hasBgRendering, htmlEscape, htmlToElement, insertAfterElement, interactionSettingsStore, interactionSettingsToStore, intersectRanges, intersectRects, isArraysEqual, isDateSpansEqual, isInt, isInteractionValid, isMultiDayRange, isPropsEqual, isPropsValid, isSingleDay, isValidDate, listenBySelector, mapHash, matchCellWidths, memoize, memoizeOutput, memoizeRendering, mergeEventStores, multiplyDuration, padStart, parseBusinessHours, parseDragMeta, parseEventDef, parseFieldSpecs, parse as parseMarker, pointInsideRect, prependToElement, preventContextMenu, preventDefault, preventSelection, processScopedUiProps, rangeContainsMarker, rangeContainsRange, rangesEqual, rangesIntersect, refineProps, removeElement, removeExact, renderDateCell, requestJson, sliceEventStore, startOfDay, subtractInnerElHeight, translateRect, uncompensateScroll, undistributeHeight, unpromisify, version, whenTransitionDone, wholeDivideDurations };\n","/** Use it instead of .includes method for IE support */\nexport function arrayIncludes<T>(array: T[], itemOrItems: T | T[]) {\n  if (Array.isArray(itemOrItems)) {\n    return itemOrItems.every(item => array.indexOf(item) !== -1);\n  }\n\n  return array.indexOf(itemOrItems) !== -1;\n}\n\nexport type Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;\n","export const DIALOG_WIDTH = 310;\n\nexport const DIALOG_WIDTH_WIDER = 325;\n\nexport const VIEW_HEIGHT = 305;\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { DIALOG_WIDTH } from '../constants/dimensions';\n\nconst useStyles = makeStyles(\n  theme => ({\n    staticWrapperRoot: {\n      overflow: 'hidden',\n      minWidth: DIALOG_WIDTH,\n      display: 'flex',\n      flexDirection: 'column',\n      backgroundColor: theme.palette.background.paper,\n    },\n  }),\n  { name: 'MuiPickersStaticWrapper' }\n);\n\nexport const StaticWrapper: React.FC = ({ children }) => {\n  const classes = useStyles();\n\n  return <div className={classes.staticWrapperRoot} children={children} />;\n};\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog, { DialogProps } from '@material-ui/core/Dialog';\nimport { DIALOG_WIDTH, DIALOG_WIDTH_WIDER } from '../constants/dimensions';\nimport { createStyles, WithStyles, withStyles } from '@material-ui/core/styles';\n\nexport interface ModalDialogProps extends DialogProps {\n  onAccept: () => void;\n  onDismiss: () => void;\n  onClear: () => void;\n  onSetToday: () => void;\n  okLabel?: React.ReactNode;\n  cancelLabel?: React.ReactNode;\n  clearLabel?: React.ReactNode;\n  todayLabel?: React.ReactNode;\n  clearable?: boolean;\n  showTodayButton?: boolean;\n  showTabs?: boolean;\n  wider?: boolean;\n}\n\nexport const ModalDialog: React.SFC<ModalDialogProps & WithStyles<typeof styles>> = ({\n  children,\n  classes,\n  onAccept,\n  onDismiss,\n  onClear,\n  onSetToday,\n  okLabel,\n  cancelLabel,\n  clearLabel,\n  todayLabel,\n  clearable,\n  showTodayButton,\n  showTabs,\n  wider,\n  ...other\n}) => (\n  <Dialog\n    role=\"dialog\"\n    onClose={onDismiss}\n    classes={{\n      paper: clsx(classes.dialogRoot, {\n        [classes.dialogRootWider]: wider,\n      }),\n    }}\n    {...other}\n  >\n    <DialogContent children={children} className={classes.dialog} />\n\n    <DialogActions\n      classes={{\n        root: clsx({\n          [classes.withAdditionalAction]: clearable || showTodayButton,\n        }),\n      }}\n    >\n      {clearable && (\n        <Button color=\"primary\" onClick={onClear}>\n          {clearLabel}\n        </Button>\n      )}\n\n      {showTodayButton && (\n        <Button color=\"primary\" onClick={onSetToday}>\n          {todayLabel}\n        </Button>\n      )}\n\n      {cancelLabel && (\n        <Button color=\"primary\" onClick={onDismiss}>\n          {cancelLabel}\n        </Button>\n      )}\n\n      {okLabel && (\n        <Button color=\"primary\" onClick={onAccept}>\n          {okLabel}\n        </Button>\n      )}\n    </DialogActions>\n  </Dialog>\n);\n\nModalDialog.displayName = 'ModalDialog';\n\nexport const styles = createStyles({\n  dialogRoot: {\n    minWidth: DIALOG_WIDTH,\n  },\n  dialogRootWider: {\n    minWidth: DIALOG_WIDTH_WIDER,\n  },\n  dialog: {\n    '&:first-child': {\n      padding: 0,\n    },\n  },\n  withAdditionalAction: {\n    // set justifyContent to default value to fix IE11 layout bug\n    // see https://github.com/dmtrKovalenko/material-ui-pickers/pull/267\n    justifyContent: 'flex-start',\n\n    '& > *:first-child': {\n      marginRight: 'auto',\n    },\n  },\n});\n\nexport default withStyles(styles, { name: 'MuiPickersModal' })(ModalDialog);\n","import * as React from 'react';\n\nexport const useIsomorphicEffect =\n  typeof window === 'undefined' ? React.useEffect : React.useLayoutEffect;\n\ntype KeyHandlers = Record<KeyboardEvent['key'], () => void>;\n\nexport function runKeyHandler(e: KeyboardEvent, keyHandlers: KeyHandlers) {\n  const handler = keyHandlers[e.key];\n  if (handler) {\n    handler();\n    // if event was handled prevent other side effects (e.g. page scroll)\n    e.preventDefault();\n  }\n}\n\nexport function useKeyDown(active: boolean, keyHandlers: KeyHandlers) {\n  const keyHandlersRef = React.useRef(keyHandlers);\n  keyHandlersRef.current = keyHandlers;\n\n  useIsomorphicEffect(() => {\n    if (active) {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        runKeyHandler(event, keyHandlersRef.current);\n      };\n      window.addEventListener('keydown', handleKeyDown);\n      return () => {\n        window.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n  }, [active]);\n}\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport ModalDialog from '../_shared/ModalDialog';\nimport { WrapperProps } from './Wrapper';\nimport { Omit } from '../_helpers/utils';\nimport { useKeyDown } from '../_shared/hooks/useKeyDown';\nimport { DialogProps as MuiDialogProps } from '@material-ui/core/Dialog';\n\nexport interface ModalWrapperProps<T = {}> extends WrapperProps<T> {\n  /**\n   * \"OK\" label message\n   * @default \"OK\"\n   */\n  okLabel?: React.ReactNode;\n  /**\n   * \"CANCEL\" label message\n   * @default \"CANCEL\"\n   */\n  cancelLabel?: React.ReactNode;\n  /**\n   * \"CLEAR\" label message\n   * @default \"CLEAR\"\n   */\n  clearLabel?: React.ReactNode;\n  /**\n   * \"TODAY\" label message\n   * @default \"TODAY\"\n   */\n  todayLabel?: React.ReactNode;\n  /**\n   * If true today button will be displayed <b>Note*</b> that clear button has higher priority\n   * @default false\n   */\n  showTodayButton?: boolean;\n  /**\n   * Show clear action in picker dialog\n   * @default false\n   */\n  clearable?: boolean;\n  /**\n   * Props to be passed directly to material-ui Dialog\n   * @type {Partial<MuiDialogProps>}\n   */\n  DialogProps?: Partial<Omit<MuiDialogProps, 'classes'>>;\n}\n\nexport const ModalWrapper: React.FC<ModalWrapperProps<any>> = ({\n  open,\n  children,\n  okLabel,\n  cancelLabel,\n  clearLabel,\n  todayLabel,\n  showTodayButton,\n  clearable,\n  DialogProps,\n  showTabs,\n  wider,\n  InputComponent,\n  DateInputProps,\n  onClear,\n  onAccept,\n  onDismiss,\n  onSetToday,\n  ...other\n}) => {\n  useKeyDown(open, {\n    Enter: onAccept,\n  });\n\n  return (\n    <React.Fragment>\n      <InputComponent {...other} {...DateInputProps} />\n\n      <ModalDialog\n        wider={wider}\n        showTabs={showTabs}\n        open={open}\n        onClear={onClear}\n        onAccept={onAccept}\n        onDismiss={onDismiss}\n        onSetToday={onSetToday}\n        clearLabel={clearLabel}\n        todayLabel={todayLabel}\n        okLabel={okLabel}\n        cancelLabel={cancelLabel}\n        clearable={clearable}\n        showTodayButton={showTodayButton}\n        children={children}\n        {...DialogProps}\n      />\n    </React.Fragment>\n  );\n};\n\nModalWrapper.propTypes = {\n  okLabel: PropTypes.node,\n  cancelLabel: PropTypes.node,\n  clearLabel: PropTypes.node,\n  clearable: PropTypes.bool,\n  todayLabel: PropTypes.node,\n  showTodayButton: PropTypes.bool,\n  DialogProps: PropTypes.object,\n} as any;\n\nModalWrapper.defaultProps = {\n  okLabel: 'OK',\n  cancelLabel: 'Cancel',\n  clearLabel: 'Clear',\n  todayLabel: 'Today',\n  clearable: false,\n  showTodayButton: false,\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Popover, { PopoverProps as PopoverPropsType } from '@material-ui/core/Popover';\nimport { WrapperProps } from './Wrapper';\nimport { useKeyDown } from '../_shared/hooks/useKeyDown';\nimport { TextFieldProps } from '@material-ui/core/TextField';\n\nexport interface InlineWrapperProps<T = TextFieldProps> extends WrapperProps<T> {\n  /** Popover props passed to material-ui Popover (with variant=\"inline\") */\n  PopoverProps?: Partial<PopoverPropsType>;\n}\n\nexport const InlineWrapper: React.FC<InlineWrapperProps> = ({\n  open,\n  wider,\n  children,\n  PopoverProps,\n  onClear,\n  onDismiss,\n  onSetToday,\n  onAccept,\n  showTabs,\n  DateInputProps,\n  InputComponent,\n  ...other\n}) => {\n  const ref = React.useRef();\n\n  useKeyDown(open, {\n    Enter: onAccept,\n  });\n\n  return (\n    <React.Fragment>\n      <InputComponent {...other} {...DateInputProps} inputRef={ref} />\n\n      <Popover\n        open={open}\n        onClose={onDismiss}\n        anchorEl={ref.current}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n        children={children}\n        {...PopoverProps}\n      />\n    </React.Fragment>\n  );\n};\n\nInlineWrapper.propTypes = {\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  PopoverProps: PropTypes.object,\n} as any;\n","import * as React from 'react';\nimport { Omit } from '../_helpers/utils';\nimport { StaticWrapper } from './StaticWrapper';\nimport { ModalWrapper, ModalWrapperProps } from './ModalWrapper';\nimport { InlineWrapper, InlineWrapperProps } from './InlineWrapper';\nimport { KeyboardDateInputProps } from '../_shared/KeyboardDateInput';\nimport { PureDateInputProps, NotOverridableProps } from '../_shared/PureDateInput';\n\nexport type WrapperVariant = 'dialog' | 'inline' | 'static';\n\nexport interface WrapperProps<T> {\n  open: boolean;\n  onAccept: () => void;\n  onDismiss: () => void;\n  onClear: () => void;\n  onSetToday: () => void;\n  InputComponent: React.FC<T>;\n  DateInputProps: T;\n  wider?: boolean;\n  showTabs?: boolean;\n}\n\ntype OmitInnerWrapperProps<T extends WrapperProps<any>> = Omit<\n  T,\n  keyof WrapperProps<any> | 'showTabs'\n>;\n\nexport type ModalRoot = OmitInnerWrapperProps<ModalWrapperProps>;\n\nexport type InlineRoot = OmitInnerWrapperProps<InlineWrapperProps>;\n\n// prettier-ignore\nexport type ExtendWrapper<TInput extends PureDateInputProps | KeyboardDateInputProps> = {\n  /**\n   * Picker container option\n   * @default 'dialog'\n   */\n  variant?: WrapperVariant\n} & ModalRoot\n  & InlineRoot\n  & Omit<TInput, NotOverridableProps>\n\nexport function getWrapperFromVariant<T>(\n  variant?: WrapperVariant\n): React.ComponentType<InlineWrapperProps<T> | ModalWrapperProps<T>> {\n  switch (variant) {\n    case 'inline':\n      return InlineWrapper as any;\n\n    case 'static':\n      return StaticWrapper as any;\n\n    default:\n      return ModalWrapper as any;\n  }\n}\n\ntype Props<T> = {\n  variant?: WrapperVariant;\n  children?: React.ReactChild;\n} & (ModalWrapperProps<T> | InlineWrapperProps<T>);\n\nexport const VariantContext = React.createContext<WrapperVariant | null>(null);\n\nexport const Wrapper: <T extends KeyboardDateInputProps | PureDateInputProps>(\n  p: Props<T>\n) => React.ReactElement<Props<T>> = ({ variant, ...props }) => {\n  const Component = getWrapperFromVariant<typeof props.DateInputProps>(variant);\n\n  return (\n    <VariantContext.Provider value={variant || 'dialog'}>\n      <Component {...props} />\n    </VariantContext.Provider>\n  );\n};\n","enum ClockType {\n  HOURS = 'hours',\n\n  MINUTES = 'minutes',\n\n  SECONDS = 'seconds',\n}\n\nexport type ClockViewType = 'hours' | 'minutes' | 'seconds';\n\nexport default ClockType;\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport ClockType, { ClockViewType } from '../../constants/ClockType';\nimport { Theme } from '@material-ui/core/styles';\nimport { withStyles, createStyles, WithStyles } from '@material-ui/core/styles';\n\nexport interface ClockPointerProps extends WithStyles<typeof styles> {\n  value: number;\n  hasSelected: boolean;\n  isInner: boolean;\n  type: ClockViewType;\n}\n\nexport class ClockPointer extends React.Component<ClockPointerProps> {\n  public static getDerivedStateFromProps = (\n    nextProps: ClockPointerProps,\n    state: ClockPointer['state']\n  ) => {\n    if (nextProps.type !== state.previousType) {\n      return {\n        toAnimateTransform: true,\n        previousType: nextProps.type,\n      };\n    }\n\n    return {\n      toAnimateTransform: false,\n      previousType: nextProps.type,\n    };\n  };\n\n  public state = {\n    toAnimateTransform: false,\n    previousType: undefined,\n  };\n\n  public getAngleStyle = () => {\n    const { value, isInner, type } = this.props;\n\n    const max = type === ClockType.HOURS ? 12 : 60;\n    let angle = (360 / max) * value;\n\n    if (type === ClockType.HOURS && value > 12) {\n      angle -= 360; // round up angle to max 360 degrees\n    }\n\n    return {\n      height: isInner ? '26%' : '40%',\n      transform: `rotateZ(${angle}deg)`,\n    };\n  };\n\n  public render() {\n    const { classes, hasSelected } = this.props;\n\n    return (\n      <div\n        style={this.getAngleStyle()}\n        className={clsx(classes.pointer, {\n          [classes.animateTransform]: this.state.toAnimateTransform,\n        })}\n      >\n        <div\n          className={clsx(classes.thumb, {\n            [classes.noPoint]: hasSelected,\n          })}\n        />\n      </div>\n    );\n  }\n}\n\nexport const styles = (theme: Theme) =>\n  createStyles({\n    pointer: {\n      width: 2,\n      backgroundColor: theme.palette.primary.main,\n      position: 'absolute',\n      left: 'calc(50% - 1px)',\n      bottom: '50%',\n      transformOrigin: 'center bottom 0px',\n    },\n    animateTransform: {\n      transition: theme.transitions.create(['transform', 'height']),\n    },\n    thumb: {\n      width: 4,\n      height: 4,\n      backgroundColor: theme.palette.primary.contrastText,\n      borderRadius: '100%',\n      position: 'absolute',\n      top: -21,\n      left: -15,\n      border: `14px solid ${theme.palette.primary.main}`,\n      boxSizing: 'content-box',\n    },\n    noPoint: {\n      backgroundColor: theme.palette.primary.main,\n    },\n  });\n\nexport default withStyles(styles, {\n  name: 'MuiPickersClockPointer',\n})(ClockPointer as React.ComponentType<ClockPointerProps>);\n","import { IUtils } from '@date-io/core/IUtils';\nimport { MaterialUiPickersDate } from '../typings/date';\n\nconst center = {\n  x: 260 / 2,\n  y: 260 / 2,\n};\n\nconst basePoint = {\n  x: center.x,\n  y: 0,\n};\n\nconst cx = basePoint.x - center.x;\nconst cy = basePoint.y - center.y;\n\nconst rad2deg = (rad: number) => rad * 57.29577951308232;\n\nconst getAngleValue = (step: number, offsetX: number, offsetY: number) => {\n  const x = offsetX - center.x;\n  const y = offsetY - center.y;\n\n  const atan = Math.atan2(cx, cy) - Math.atan2(x, y);\n\n  let deg = rad2deg(atan);\n  deg = Math.round(deg / step) * step;\n  deg %= 360;\n\n  const value = Math.floor(deg / step) || 0;\n  const delta = Math.pow(x, 2) + Math.pow(y, 2);\n  const distance = Math.sqrt(delta);\n\n  return { value, distance };\n};\n\nexport const getHours = (offsetX: number, offsetY: number, ampm: boolean) => {\n  let { value, distance } = getAngleValue(30, offsetX, offsetY);\n  value = value || 12;\n\n  if (!ampm) {\n    if (distance < 90) {\n      value += 12;\n      value %= 24;\n    }\n  } else {\n    value %= 12;\n  }\n\n  return value;\n};\n\nexport const getMinutes = (offsetX: number, offsetY: number, step = 1) => {\n  const angleStep = step * 6;\n  let { value } = getAngleValue(angleStep, offsetX, offsetY);\n  value = (value * step) % 60;\n\n  return value;\n};\n\nexport const getMeridiem = (\n  date: MaterialUiPickersDate,\n  utils: IUtils<MaterialUiPickersDate>\n): 'am' | 'pm' => {\n  return utils.getHours(date) >= 12 ? 'pm' : 'am';\n};\n\nexport const convertToMeridiem = (\n  time: MaterialUiPickersDate,\n  meridiem: 'am' | 'pm',\n  ampm: boolean,\n  utils: IUtils<MaterialUiPickersDate>\n) => {\n  if (ampm) {\n    const currentMeridiem = utils.getHours(time) >= 12 ? 'pm' : 'am';\n    if (currentMeridiem !== meridiem) {\n      const hours = meridiem === 'am' ? utils.getHours(time) - 12 : utils.getHours(time) + 12;\n\n      return utils.setHours(time, hours);\n    }\n  }\n\n  return time;\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport ClockPointer from './ClockPointer';\nimport ClockType, { ClockViewType } from '../../constants/ClockType';\nimport { getHours, getMinutes } from '../../_helpers/time-utils';\nimport { withStyles, createStyles, WithStyles, Theme } from '@material-ui/core/styles';\n\nexport interface ClockProps extends WithStyles<typeof styles> {\n  type: ClockViewType;\n  value: number;\n  onChange: (value: number, isFinish?: boolean) => void;\n  ampm?: boolean;\n  minutesStep?: number;\n  children: React.ReactElement<any>[];\n}\n\nexport class Clock extends React.Component<ClockProps> {\n  public static propTypes: any = {\n    type: PropTypes.oneOf(\n      Object.keys(ClockType).map(key => ClockType[key as keyof typeof ClockType])\n    ).isRequired,\n    value: PropTypes.number.isRequired,\n    onChange: PropTypes.func.isRequired,\n    children: PropTypes.arrayOf(PropTypes.node).isRequired,\n    ampm: PropTypes.bool,\n    minutesStep: PropTypes.number,\n    innerRef: PropTypes.any,\n  };\n\n  public static defaultProps = {\n    ampm: false,\n    minutesStep: 1,\n  };\n\n  public isMoving = false;\n\n  public setTime(e: any, isFinish = false) {\n    let { offsetX, offsetY } = e;\n\n    if (typeof offsetX === 'undefined') {\n      const rect = e.target.getBoundingClientRect();\n\n      offsetX = e.changedTouches[0].clientX - rect.left;\n      offsetY = e.changedTouches[0].clientY - rect.top;\n    }\n\n    const value =\n      this.props.type === ClockType.SECONDS || this.props.type === ClockType.MINUTES\n        ? getMinutes(offsetX, offsetY, this.props.minutesStep)\n        : getHours(offsetX, offsetY, Boolean(this.props.ampm));\n\n    this.props.onChange(value, isFinish);\n  }\n\n  public handleTouchMove = (e: React.TouchEvent) => {\n    this.isMoving = true;\n    this.setTime(e);\n  };\n\n  public handleTouchEnd = (e: React.TouchEvent) => {\n    if (this.isMoving) {\n      this.setTime(e, true);\n      this.isMoving = false;\n    }\n  };\n\n  public handleMove = (e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    // MouseEvent.which is deprecated, but MouseEvent.buttons is not supported in Safari\n    const isButtonPressed =\n      typeof e.buttons === 'undefined' ? e.nativeEvent.which === 1 : e.buttons === 1;\n\n    if (isButtonPressed) {\n      this.setTime(e.nativeEvent, false);\n    }\n  };\n\n  public handleMouseUp = (e: React.MouseEvent) => {\n    if (this.isMoving) {\n      this.isMoving = false;\n    }\n\n    this.setTime(e.nativeEvent, true);\n  };\n\n  public hasSelected = () => {\n    const { type, value } = this.props;\n\n    if (type === ClockType.HOURS) {\n      return true;\n    }\n\n    return value % 5 === 0;\n  };\n\n  public render() {\n    const { classes, value, children, type, ampm } = this.props;\n\n    const isPointerInner = !ampm && type === ClockType.HOURS && (value < 1 || value > 12);\n\n    return (\n      <div className={classes.container}>\n        <div className={classes.clock}>\n          <div\n            role=\"menu\"\n            tabIndex={-1}\n            className={classes.squareMask}\n            onTouchMove={this.handleTouchMove}\n            onTouchEnd={this.handleTouchEnd}\n            onMouseUp={this.handleMouseUp}\n            onMouseMove={this.handleMove}\n          />\n\n          <div className={classes.pin} />\n\n          <ClockPointer\n            type={type}\n            value={value}\n            isInner={isPointerInner}\n            hasSelected={this.hasSelected()}\n          />\n\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const styles = (theme: Theme) =>\n  createStyles({\n    container: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'flex-end',\n      margin: `${theme.spacing(2)}px 0 ${theme.spacing(1)}px`,\n    },\n    clock: {\n      backgroundColor: 'rgba(0,0,0,.07)',\n      borderRadius: '50%',\n      height: 260,\n      width: 260,\n      position: 'relative',\n      pointerEvents: 'none',\n    },\n    squareMask: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'auto',\n      outline: 'none',\n      touchActions: 'none',\n      userSelect: 'none',\n      '&:active': {\n        cursor: 'move',\n      },\n    },\n    pin: {\n      width: 6,\n      height: 6,\n      borderRadius: '50%',\n      backgroundColor: theme.palette.primary.main,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n    },\n  });\n\nexport default withStyles(styles, {\n  name: 'MuiPickersClock',\n})(Clock as React.ComponentType<ClockProps>);\n","import _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport { Component } from 'react';\n\nvar Rifm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Rifm, _React$Component);\n\n  function Rifm(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this._state = null;\n    _this._del = false;\n\n    _this._handleChange = function (evt) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (evt.target.type === 'number') {\n          console.error('Rifm does not support input type=number, use type=tel instead.');\n          return;\n        }\n      } // FUTURE: use evt.nativeEvent.inputType for del event, see comments at onkeydown\n\n\n      var stateValue = _this.state.value;\n      var value = evt.target.value;\n      var input = evt.target;\n      var op = value.length > stateValue.length;\n      var del = _this._del;\n\n      var noOp = stateValue === _this.props.format(value);\n\n      _this.setState({\n        value: value,\n        local: true\n      }, function () {\n        var selectionStart = input.selectionStart;\n        var refuse = _this.props.refuse || /[^\\d]+/g;\n        var before = value.substr(0, selectionStart).replace(refuse, '');\n        _this._state = {\n          input: input,\n          before: before,\n          op: op,\n          di: del && noOp,\n          del: del\n        };\n\n        if (_this.props.replace && _this.props.replace(stateValue) && op && !noOp) {\n          var start = -1;\n\n          for (var i = 0; i !== before.length; ++i) {\n            start = Math.max(start, value.toLowerCase().indexOf(before[i].toLowerCase(), start + 1));\n          }\n\n          var c = value.substr(start + 1).replace(refuse, '')[0];\n          start = value.indexOf(c, start + 1);\n          value = \"\" + value.substr(0, start) + value.substr(start + 1);\n        }\n\n        var fv = _this.props.format(value);\n\n        if (stateValue === fv) {\n          _this.setState({\n            value: value\n          });\n        } else {\n          _this.props.onChange(fv);\n        }\n      });\n    };\n\n    _this._hKD = function (evt) {\n      if (evt.code === 'Delete') {\n        _this._del = true;\n      }\n    };\n\n    _this._hKU = function (evt) {\n      if (evt.code === 'Delete') {\n        _this._del = false;\n      }\n    };\n\n    _this.state = {\n      value: props.value,\n      local: true\n    };\n    return _this;\n  }\n\n  Rifm.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    return {\n      value: state.local ? state.value : props.value,\n      local: false\n    };\n  };\n\n  var _proto = Rifm.prototype;\n\n  _proto.render = function render() {\n    var _handleChange = this._handleChange,\n        value = this.state.value,\n        children = this.props.children;\n    return children({\n      value: value,\n      onChange: _handleChange\n    });\n  } // delete when  https://developer.mozilla.org/en-US/docs/Web/API/InputEvent/inputType will be supported by all major browsers\n  ;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener('keydown', this._hKD);\n    document.removeEventListener('keyup', this._hKU);\n  } // delete when  https://developer.mozilla.org/en-US/docs/Web/API/InputEvent/inputType will be supported by all major browsers\n  ;\n\n  _proto.componentDidMount = function componentDidMount() {\n    document.addEventListener('keydown', this._hKD);\n    document.addEventListener('keyup', this._hKU);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    var _state = this._state;\n\n    if (_state) {\n      var value = this.state.value;\n      var start = -1;\n\n      for (var i = 0; i !== _state.before.length; ++i) {\n        start = Math.max(start, value.toLowerCase().indexOf(_state.before[i].toLowerCase(), start + 1));\n      } // format usually looks better without this\n\n\n      if (this.props.replace && (_state.op || _state.del && !_state.di)) {\n        while (value[start + 1] && (this.props.refuse || /[^\\d]+/).test(value[start + 1])) {\n          start += 1;\n        }\n      }\n\n      _state.input.selectionStart = _state.input.selectionEnd = start + 1 + (_state.di ? 1 : 0);\n    }\n\n    this._state = null;\n  };\n\n  return Rifm;\n}(Component);\n\nexport { Rifm };\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles(\n  theme => ({\n    day: {\n      width: 36,\n      height: 36,\n      fontSize: theme.typography.caption.fontSize,\n      margin: '0 2px',\n      color: theme.palette.text.primary,\n      fontWeight: theme.typography.fontWeightMedium,\n      padding: 0,\n    },\n    hidden: {\n      opacity: 0,\n      pointerEvents: 'none',\n    },\n    current: {\n      color: theme.palette.primary.main,\n      fontWeight: 600,\n    },\n    daySelected: {\n      color: theme.palette.primary.contrastText,\n      backgroundColor: theme.palette.primary.main,\n      fontWeight: theme.typography.fontWeightMedium,\n      '&:hover': {\n        backgroundColor: theme.palette.primary.main,\n      },\n    },\n    dayDisabled: {\n      pointerEvents: 'none',\n      color: theme.palette.text.hint,\n    },\n  }),\n  { name: 'MuiPickersDay' }\n);\n\nexport interface DayProps {\n  /** Day text */\n  children: React.ReactNode;\n  /** Is today */\n  current?: boolean;\n  /** Disabled? */\n  disabled?: boolean;\n  /** Hidden? */\n  hidden?: boolean;\n  /** Selected? */\n  selected?: boolean;\n}\n\nexport const Day: React.FC<DayProps> = ({\n  children,\n  disabled,\n  hidden,\n  current,\n  selected,\n  ...other\n}) => {\n  const classes = useStyles();\n\n  const className = clsx(classes.day, {\n    [classes.hidden]: hidden,\n    [classes.current]: current,\n    [classes.daySelected]: selected,\n    [classes.dayDisabled]: disabled,\n  });\n\n  return (\n    <IconButton className={className} tabIndex={hidden || disabled ? -1 : 0} {...other}>\n      <Typography variant=\"body2\" color=\"inherit\">\n        {children}\n      </Typography>\n    </IconButton>\n  );\n};\n\nDay.displayName = 'Day';\n\nDay.propTypes = {\n  current: PropTypes.bool,\n  disabled: PropTypes.bool,\n  hidden: PropTypes.bool,\n  selected: PropTypes.bool,\n};\n\nDay.defaultProps = {\n  disabled: false,\n  hidden: false,\n  current: false,\n  selected: false,\n};\n\nexport default Day;\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport Typography, { TypographyProps } from '@material-ui/core/Typography';\nimport { ExtendMui } from '../typings/extendMui';\nimport { makeStyles, fade } from '@material-ui/core/styles';\n\nexport interface ToolbarTextProps extends ExtendMui<TypographyProps> {\n  selected?: boolean;\n  label: string;\n}\n\nexport const useStyles = makeStyles(\n  theme => {\n    const textColor =\n      theme.palette.type === 'light'\n        ? theme.palette.primary.contrastText\n        : theme.palette.getContrastText(theme.palette.background.default);\n\n    return {\n      toolbarTxt: {\n        color: fade(textColor, 0.54),\n      },\n      toolbarBtnSelected: {\n        color: textColor,\n      },\n    };\n  },\n  { name: 'MuiPickersToolbarText' }\n);\n\nconst ToolbarText: React.FunctionComponent<ToolbarTextProps> = ({\n  selected,\n  label,\n  className = null,\n  ...other\n}) => {\n  const classes = useStyles();\n  return (\n    <Typography\n      children={label}\n      className={clsx(classes.toolbarTxt, className, {\n        [classes.toolbarBtnSelected]: selected,\n      })}\n      {...other}\n    />\n  );\n};\n\nexport default ToolbarText;\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport ToolbarText from './ToolbarText';\nimport Button, { ButtonProps } from '@material-ui/core/Button';\nimport { ExtendMui } from '../typings/extendMui';\nimport { TypographyProps } from '@material-ui/core/Typography';\nimport { createStyles, withStyles, WithStyles } from '@material-ui/core/styles';\n\nexport interface ToolbarButtonProps\n  extends ExtendMui<ButtonProps, 'variant'>,\n    WithStyles<typeof styles> {\n  variant: TypographyProps['variant'];\n  selected: boolean;\n  label: string;\n  align?: TypographyProps['align'];\n  typographyClassName?: string;\n}\n\nconst ToolbarButton: React.FunctionComponent<ToolbarButtonProps> = ({\n  classes,\n  className = null,\n  label,\n  selected,\n  variant,\n  align,\n  typographyClassName,\n  ...other\n}) => {\n  return (\n    <Button variant=\"text\" className={clsx(classes.toolbarBtn, className)} {...other}>\n      <ToolbarText\n        align={align}\n        className={typographyClassName}\n        variant={variant}\n        label={label}\n        selected={selected}\n      />\n    </Button>\n  );\n};\n\n(ToolbarButton as any).propTypes = {\n  selected: PropTypes.bool.isRequired,\n  label: PropTypes.string.isRequired,\n  classes: PropTypes.any.isRequired,\n  className: PropTypes.string,\n  innerRef: PropTypes.any,\n};\n\nToolbarButton.defaultProps = {\n  className: '',\n};\n\nexport const styles = createStyles({\n  toolbarBtn: {\n    padding: 0,\n    minWidth: '16px',\n    textTransform: 'none',\n  },\n});\n\nexport default withStyles(styles, { name: 'MuiPickersToolbarButton' })(ToolbarButton);\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport Toolbar, { ToolbarProps } from '@material-ui/core/Toolbar';\nimport { ExtendMui } from '../typings/extendMui';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles(\n  theme => ({\n    toolbar: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: 100,\n      backgroundColor:\n        theme.palette.type === 'light'\n          ? theme.palette.primary.main\n          : theme.palette.background.default,\n    },\n    toolbarLandscape: {\n      height: 'auto',\n      maxWidth: 150,\n      padding: 8,\n      justifyContent: 'flex-start',\n    },\n  }),\n  { name: 'MuiPickersToolbar' }\n);\n\ninterface PickerToolbarProps extends ExtendMui<ToolbarProps> {\n  isLandscape: boolean;\n}\n\nconst PickerToolbar: React.SFC<PickerToolbarProps> = ({\n  children,\n  isLandscape,\n  className = null,\n  ...other\n}) => {\n  const classes = useStyles();\n\n  return (\n    <Toolbar\n      className={clsx(classes.toolbar, { [classes.toolbarLandscape]: isLandscape }, className)}\n      {...other}\n    >\n      {children}\n    </Toolbar>\n  );\n};\n\nexport default PickerToolbar;\n","import * as React from 'react';\nimport TextField, { BaseTextFieldProps, TextFieldProps } from '@material-ui/core/TextField';\nimport { ExtendMui } from '../typings/extendMui';\n\nexport type NotOverridableProps =\n  | 'openPicker'\n  | 'inputValue'\n  | 'onChange'\n  | 'format'\n  | 'validationError'\n  | 'format'\n  | 'forwardedRef';\n\nexport interface PureDateInputProps\n  extends ExtendMui<BaseTextFieldProps, 'variant' | 'onError' | 'value'> {\n  /** Pass material-ui text field variant down, bypass internal variant prop */\n  inputVariant?: TextFieldProps['variant'];\n  /** Override input component */\n  TextFieldComponent?: React.ComponentType<TextFieldProps>;\n  InputProps?: TextFieldProps['InputProps'];\n  inputProps?: TextFieldProps['inputProps'];\n  onBlur?: TextFieldProps['onBlur'];\n  onFocus?: TextFieldProps['onFocus'];\n  inputValue: string;\n  validationError?: React.ReactNode;\n  openPicker: () => void;\n}\n\nexport const PureDateInput: React.FC<PureDateInputProps> = ({\n  inputValue,\n  inputVariant,\n  validationError,\n  InputProps,\n  openPicker: onOpen,\n  TextFieldComponent = TextField,\n  ...other\n}) => {\n  const PureDateInputProps = React.useMemo(\n    () => ({\n      ...InputProps,\n      readOnly: true,\n    }),\n    [InputProps]\n  );\n\n  return (\n    <TextFieldComponent\n      error={Boolean(validationError)}\n      helperText={validationError}\n      {...other}\n      // do not overridable\n      onClick={onOpen}\n      value={inputValue}\n      variant={inputVariant as any}\n      InputProps={PureDateInputProps}\n      onKeyDown={e => {\n        // space\n        if (e.keyCode === 32) {\n          e.stopPropagation();\n          onOpen();\n        }\n      }}\n    />\n  );\n};\n\nPureDateInput.displayName = 'PureDateInput';\n","import React from 'react';\nimport SvgIcon, { SvgIconProps } from '@material-ui/core/SvgIcon';\n\nexport const KeyboardIcon: React.SFC<SvgIconProps> = props => {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z\" />\n      <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n    </SvgIcon>\n  );\n};\n","import { Omit } from './utils';\nimport { DatePickerProps } from '..';\nimport { IUtils } from '@date-io/core/IUtils';\nimport { ParsableDate } from '../constants/prop-types';\nimport { BasePickerProps } from '../typings/BasePicker';\n\nexport const getDisplayDate = (\n  value: ParsableDate,\n  format: string,\n  utils: IUtils<any>,\n  isEmpty: boolean,\n  { invalidLabel, emptyLabel, labelFunc }: Omit<BasePickerProps, 'value' | 'onChange'>\n) => {\n  const date = utils.date(value);\n  if (labelFunc) {\n    return labelFunc(isEmpty ? null : date, invalidLabel!);\n  }\n\n  if (isEmpty) {\n    return emptyLabel || '';\n  }\n\n  return utils.isValid(date) ? utils.format(date, format) : invalidLabel!;\n};\n\nexport interface BaseValidationProps {\n  /**\n   * Message, appearing when date cannot be parsed\n   * @default 'Invalid Date Format'\n   */\n  invalidDateMessage?: React.ReactNode;\n}\n\nexport interface DateValidationProps extends BaseValidationProps {\n  /**\n   * Error message, shown if date is less then minimal date\n   * @default 'Date should not be before minimal date'\n   */\n  minDateMessage?: React.ReactNode;\n  /**\n   * Error message, shown if date is more then maximal date\n   * @default 'Date should not be after maximal date'\n   */\n  maxDateMessage?: React.ReactNode;\n}\n\nconst getComparisonMaxDate = (utils: IUtils<any>, strictCompareDates: boolean, date: Date) => {\n  if (strictCompareDates) {\n    return date;\n  }\n\n  return utils.endOfDay(date);\n};\n\nconst getComparisonMinDate = (utils: IUtils<any>, strictCompareDates: boolean, date: Date) => {\n  if (strictCompareDates) {\n    return date;\n  }\n\n  return utils.startOfDay(date);\n};\n\nexport const validate = (\n  value: ParsableDate,\n  utils: IUtils<any>,\n  {\n    maxDate,\n    minDate,\n    disablePast,\n    disableFuture,\n    maxDateMessage,\n    minDateMessage,\n    invalidDateMessage,\n    strictCompareDates,\n  }: Omit<DatePickerProps, 'views' | 'openTo'> // DateTimePicker doesn't support\n): React.ReactNode => {\n  const parsedValue = utils.date(value);\n\n  // if null - do not show error\n  if (value === null) {\n    return '';\n  }\n\n  if (!utils.isValid(value)) {\n    return invalidDateMessage;\n  }\n\n  if (\n    maxDate &&\n    utils.isAfter(\n      parsedValue,\n      getComparisonMaxDate(utils, !!strictCompareDates, utils.date(maxDate))\n    )\n  ) {\n    return maxDateMessage;\n  }\n\n  if (\n    disableFuture &&\n    utils.isAfter(parsedValue, getComparisonMaxDate(utils, !!strictCompareDates, utils.date()))\n  ) {\n    return maxDateMessage;\n  }\n\n  if (\n    minDate &&\n    utils.isBefore(\n      parsedValue,\n      getComparisonMinDate(utils, !!strictCompareDates, utils.date(minDate))\n    )\n  ) {\n    return minDateMessage;\n  }\n  if (\n    disablePast &&\n    utils.isBefore(parsedValue, getComparisonMinDate(utils, !!strictCompareDates, utils.date()))\n  ) {\n    return minDateMessage;\n  }\n\n  return '';\n};\n\nexport function pick12hOr24hFormat(\n  userFormat: string | undefined,\n  ampm: boolean | undefined = true,\n  formats: { '12h': string; '24h': string }\n) {\n  if (userFormat) {\n    return userFormat;\n  }\n\n  return ampm ? formats['12h'] : formats['24h'];\n}\n\nexport function makeMaskFromFormat(format: string, numberMaskChar: string) {\n  return format.replace(/[a-z]/gi, numberMaskChar);\n}\n\nexport const maskedDateFormatter = (mask: string, numberMaskChar: string, refuse: RegExp) => (\n  value: string\n) => {\n  let result = '';\n  const parsed = value.replace(refuse, '');\n\n  if (parsed === '') {\n    return parsed;\n  }\n\n  let i = 0;\n  let n = 0;\n  while (i < mask.length) {\n    const maskChar = mask[i];\n    if (maskChar === numberMaskChar && n < parsed.length) {\n      const parsedChar = parsed[n];\n      result += parsedChar;\n      n += 1;\n    } else {\n      result += maskChar;\n    }\n    i += 1;\n  }\n\n  return result;\n};\n","import * as React from 'react';\nimport IconButton, { IconButtonProps } from '@material-ui/core/IconButton';\nimport InputAdornment, { InputAdornmentProps } from '@material-ui/core/InputAdornment';\nimport TextField, { BaseTextFieldProps, TextFieldProps } from '@material-ui/core/TextField';\nimport { Rifm } from 'rifm';\nimport { ExtendMui } from '../typings/extendMui';\nimport { KeyboardIcon } from './icons/KeyboardIcon';\nimport { makeMaskFromFormat, maskedDateFormatter } from '../_helpers/text-field-helper';\n\nexport interface KeyboardDateInputProps\n  extends ExtendMui<BaseTextFieldProps, 'variant' | 'onError' | 'value'> {\n  format: string;\n  onChange: (value: string | null) => void;\n  openPicker: () => void;\n  validationError?: React.ReactNode;\n  inputValue: string;\n  inputProps?: TextFieldProps['inputProps'];\n  InputProps?: TextFieldProps['InputProps'];\n  onBlur?: TextFieldProps['onBlur'];\n  onFocus?: TextFieldProps['onFocus'];\n  /** Override input component */\n  TextFieldComponent?: React.ComponentType<TextFieldProps>;\n  /** Icon displaying for open picker button */\n  keyboardIcon?: React.ReactNode;\n  /** Pass material-ui text field variant down, bypass internal variant prop */\n  inputVariant?: TextFieldProps['variant'];\n  /**\n   * Custom mask. Can be used to override generate from format. (e.g. __/__/____ __:__)\n   */\n  mask?: string;\n  /**\n   * Char string that will be replaced with number (for \"_\" mask will be \"__/__/____\")\n   * @default '_'\n   */\n  maskChar?: string;\n  /**\n   * Refuse values regexp\n   * @default /[^\\d]+/gi\n   */\n  refuse?: RegExp;\n  /**\n   * Props to pass to keyboard input adornment\n   * @type {Partial<InputAdornmentProps>}\n   */\n  InputAdornmentProps?: Partial<InputAdornmentProps>;\n  /**\n   * Props to pass to keyboard adornment button\n   * @type {Partial<IconButtonProps>}\n   */\n  KeyboardButtonProps?: Partial<IconButtonProps>;\n  /** Custom formatter to be passed into Rifm component */\n  rifmFormatter?: (str: string) => string;\n}\n\nexport const KeyboardDateInput: React.FunctionComponent<KeyboardDateInputProps> = ({\n  inputValue,\n  inputVariant,\n  validationError,\n  KeyboardButtonProps,\n  InputAdornmentProps,\n  openPicker: onOpen,\n  onChange,\n  InputProps,\n  mask,\n  maskChar = '_',\n  refuse = /[^\\d]+/gi,\n  format,\n  keyboardIcon,\n  disabled,\n  rifmFormatter,\n  TextFieldComponent = TextField,\n  ...other\n}) => {\n  const inputMask = mask || makeMaskFromFormat(format, maskChar);\n  // prettier-ignore\n  const formatter = React.useMemo(\n    () => maskedDateFormatter(inputMask, maskChar, refuse),\n    [inputMask, maskChar, refuse]\n  );\n\n  const position =\n    InputAdornmentProps && InputAdornmentProps.position ? InputAdornmentProps.position : 'end';\n\n  const handleChange = (text: string) => {\n    const finalString = text === '' || text === inputMask ? null : text;\n    onChange(finalString);\n  };\n\n  return (\n    <Rifm\n      key={inputMask}\n      value={inputValue}\n      onChange={handleChange}\n      refuse={refuse}\n      format={rifmFormatter || formatter}\n    >\n      {({ onChange, value }) => (\n        <TextFieldComponent\n          disabled={disabled}\n          error={Boolean(validationError)}\n          helperText={validationError}\n          {...other}\n          value={value}\n          onChange={onChange}\n          variant={inputVariant as any}\n          InputProps={{\n            ...InputProps,\n            [`${position}Adornment`]: (\n              <InputAdornment position={position} {...InputAdornmentProps}>\n                <IconButton disabled={disabled} {...KeyboardButtonProps} onClick={onOpen}>\n                  {keyboardIcon}\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n      )}\n    </Rifm>\n  );\n};\n\nKeyboardDateInput.defaultProps = {\n  keyboardIcon: <KeyboardIcon />,\n};\n\nexport default KeyboardDateInput;\n","import { useUtils } from './useUtils';\nimport { IUtils } from '@date-io/core/IUtils';\nimport { useOpenState } from './useOpenState';\nimport { MaterialUiPickersDate } from '../../typings/date';\nimport { BasePickerProps } from '../../typings/BasePicker';\nimport { getDisplayDate, validate } from '../../_helpers/text-field-helper';\nimport { useCallback, useDebugValue, useEffect, useMemo, useState, useRef } from 'react';\n\nexport interface StateHookOptions {\n  getDefaultFormat: () => string;\n}\n\nconst useValueToDate = (\n  utils: IUtils<MaterialUiPickersDate>,\n  { value, initialFocusedDate }: BasePickerProps\n) => {\n  const nowRef = useRef(utils.date());\n  const date = utils.date(value || initialFocusedDate || nowRef.current);\n\n  return date && utils.isValid(date) ? date : nowRef.current;\n};\n\nfunction useDateValues(props: BasePickerProps, options: StateHookOptions) {\n  const utils = useUtils();\n  const date = useValueToDate(utils, props);\n  const format = props.format || options.getDefaultFormat();\n\n  return { date, format };\n}\n\nexport function usePickerState(props: BasePickerProps, options: StateHookOptions) {\n  const { autoOk, disabled, readOnly, onAccept, onChange, onError, value, variant } = props;\n\n  const utils = useUtils();\n  const { isOpen, setIsOpen } = useOpenState(props);\n  const { date, format } = useDateValues(props, options);\n  const [pickerDate, setPickerDate] = useState(date);\n\n  useEffect(() => {\n    // if value was changed in closed state - treat it as accepted\n    if (!isOpen && !utils.isEqual(pickerDate, date)) {\n      setPickerDate(date);\n    }\n  }, [date, isOpen, pickerDate, utils]);\n\n  const acceptDate = useCallback(\n    (acceptedDate: MaterialUiPickersDate) => {\n      onChange(acceptedDate);\n      if (onAccept) {\n        onAccept(acceptedDate);\n      }\n\n      setIsOpen(false);\n    },\n    [onAccept, onChange, setIsOpen]\n  );\n\n  const wrapperProps = useMemo(\n    () => ({\n      format,\n      open: isOpen,\n      onClear: () => acceptDate(null),\n      onAccept: () => acceptDate(pickerDate),\n      onSetToday: () => setPickerDate(utils.date()),\n      onDismiss: () => {\n        setIsOpen(false);\n      },\n    }),\n    [acceptDate, format, isOpen, pickerDate, setIsOpen, utils]\n  );\n\n  const pickerProps = useMemo(\n    () => ({\n      date: pickerDate,\n      onChange: (newDate: MaterialUiPickersDate, isFinish = true) => {\n        setPickerDate(newDate);\n\n        if (isFinish && autoOk) {\n          acceptDate(newDate);\n          return;\n        }\n\n        // simulate autoOk, but do not close the modal\n        if (variant === 'inline' || variant === 'static') {\n          onChange(newDate);\n          onAccept && onAccept(newDate);\n        }\n      },\n    }),\n    [acceptDate, autoOk, onAccept, onChange, pickerDate, variant]\n  );\n\n  const validationError = validate(value, utils, props);\n  useEffect(() => {\n    if (onError) {\n      onError(validationError, value);\n    }\n  }, [onError, validationError, value]);\n\n  const inputValue = getDisplayDate(date, format, utils, value === null, props);\n  const inputProps = useMemo(\n    () => ({\n      inputValue,\n      validationError,\n      openPicker: () => !readOnly && !disabled && setIsOpen(true),\n    }),\n    [disabled, inputValue, readOnly, setIsOpen, validationError]\n  );\n\n  const pickerState = { pickerProps, inputProps, wrapperProps };\n\n  useDebugValue(pickerState);\n  return pickerState;\n}\n","/* eslint-disable react-hooks/rules-of-hooks */\nimport { BasePickerProps } from '../../typings/BasePicker';\nimport { useCallback, useState, Dispatch, SetStateAction } from 'react';\n\nexport function useOpenState({ open, onOpen, onClose }: BasePickerProps) {\n  let setIsOpenState: null | Dispatch<SetStateAction<boolean>> = null;\n  if (open === undefined || open === null) {\n    // The component is uncontrolled, so we need to give it its own state.\n    [open, setIsOpenState] = useState<boolean>(false);\n  }\n\n  // prettier-ignore\n  const setIsOpen = useCallback((newIsOpen: boolean) => {\n    setIsOpenState && setIsOpenState(newIsOpen);\n\n    return newIsOpen\n      ? onOpen && onOpen()\n      : onClose && onClose();\n  }, [onOpen, onClose, setIsOpenState]);\n\n  return { isOpen: open, setIsOpen };\n}\n","import { useUtils } from './useUtils';\nimport { Omit } from '../../_helpers/utils';\nimport { IUtils } from '@date-io/core/IUtils';\nimport { BasePickerProps } from '../../typings/BasePicker';\nimport { MaterialUiPickersDate } from '../../typings/date';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { getDisplayDate } from '../../_helpers/text-field-helper';\nimport { StateHookOptions, usePickerState } from './usePickerState';\n\nexport interface BaseKeyboardPickerProps extends Omit<BasePickerProps, 'onChange'> {\n  /** String value for controlling value with pure input string. Overrides value prop */\n  inputValue?: string;\n  /** Keyboard onChange callback @DateIOType */\n  onChange: (date: MaterialUiPickersDate | null, value?: string | null) => void;\n}\n\nfunction parseInputString(value: string, utils: IUtils<any>, format: string) {\n  try {\n    return utils.parse(value, format);\n  } catch {\n    return null;\n  }\n}\n\nexport function useKeyboardPickerState(props: BaseKeyboardPickerProps, options: StateHookOptions) {\n  const { format = options.getDefaultFormat(), inputValue, onChange, value } = props;\n  const utils = useUtils();\n\n  const displayDate = getDisplayDate(value, format, utils, value === null, props);\n  const [innerInputValue, setInnerInputValue] = useState(displayDate);\n  const dateValue = inputValue ? parseInputString(inputValue, utils, format) : value;\n\n  useEffect(() => {\n    if (value === null || utils.isValid(value)) {\n      setInnerInputValue(displayDate);\n    }\n  }, [displayDate, setInnerInputValue, utils, value]);\n\n  const handleKeyboardChange = useCallback(\n    (date: MaterialUiPickersDate) => {\n      onChange(date, date === null ? null : utils.format(date, format));\n    },\n    [format, onChange, utils]\n  );\n\n  const { inputProps: innerInputProps, wrapperProps, pickerProps } = usePickerState(\n    // Extend props interface\n    { ...props, value: dateValue, onChange: handleKeyboardChange },\n    options\n  );\n\n  const inputProps = useMemo(\n    () => ({\n      ...innerInputProps, // reuse validation and open/close logic\n      format: wrapperProps.format,\n      inputValue: inputValue || innerInputValue,\n      onChange: (value: string | null) => {\n        setInnerInputValue(value || '');\n        const date = value === null ? null : utils.parse(value, wrapperProps.format);\n\n        onChange(date, value);\n      },\n    }),\n    [innerInputProps, innerInputValue, inputValue, onChange, utils, wrapperProps.format]\n  );\n\n  return {\n    inputProps,\n    wrapperProps,\n    pickerProps,\n  };\n}\n","import * as React from 'react';\nimport { BasePickerProps } from '../typings/BasePicker';\nimport { Picker, ToolbarComponentProps } from './Picker';\nimport { ExtendWrapper, Wrapper } from '../wrappers/Wrapper';\nimport { PureDateInputProps } from '../_shared/PureDateInput';\nimport { DateValidationProps } from '../_helpers/text-field-helper';\nimport { KeyboardDateInputProps } from '../_shared/KeyboardDateInput';\nimport { StateHookOptions, usePickerState } from '../_shared/hooks/usePickerState';\nimport {\n  BaseKeyboardPickerProps,\n  useKeyboardPickerState,\n} from '../_shared/hooks/useKeyboardPickerState';\n\nexport type WithKeyboardInputProps = DateValidationProps &\n  BaseKeyboardPickerProps &\n  ExtendWrapper<KeyboardDateInputProps>;\n\nexport type WithPureInputProps = DateValidationProps &\n  BasePickerProps &\n  ExtendWrapper<PureDateInputProps>;\n\nexport interface MakePickerOptions<T extends any> {\n  Input: any;\n  useState: typeof usePickerState | typeof useKeyboardPickerState;\n  useOptions: (props: any) => StateHookOptions;\n  getCustomProps?: (props: T) => Partial<T>;\n  DefaultToolbarComponent: React.ComponentType<ToolbarComponentProps>;\n}\n\nexport function makePickerWithState<T extends any>({\n  Input,\n  useState,\n  useOptions,\n  getCustomProps,\n  DefaultToolbarComponent,\n}: MakePickerOptions<T>): React.FC<T> {\n  function PickerWithState(props: T) {\n    const {\n      allowKeyboardControl,\n      ampm,\n      animateYearScrolling,\n      autoOk,\n      dateRangeIcon,\n      disableFuture,\n      disablePast,\n      disableToolbar,\n      emptyLabel,\n      format,\n      forwardedRef,\n      hideTabs,\n      initialFocusedDate,\n      invalidDateMessage,\n      invalidLabel,\n      labelFunc,\n      leftArrowButtonProps,\n      leftArrowIcon,\n      loadingIndicator,\n      maxDate,\n      maxDateMessage,\n      minDate,\n      minDateMessage,\n      minutesStep,\n      onAccept,\n      onChange,\n      onClose,\n      onMonthChange,\n      onOpen,\n      onYearChange,\n      openTo,\n      orientation,\n      renderDay,\n      rightArrowButtonProps,\n      rightArrowIcon,\n      shouldDisableDate,\n      strictCompareDates,\n      timeIcon,\n      ToolbarComponent = DefaultToolbarComponent,\n      value,\n      variant,\n      views,\n      ...other\n    } = props;\n\n    const injectedProps = getCustomProps ? getCustomProps(props) : {};\n\n    const options = useOptions(props);\n    const { pickerProps, inputProps, wrapperProps } = useState(props as any, options);\n\n    return (\n      <Wrapper\n        variant={variant}\n        InputComponent={Input}\n        DateInputProps={inputProps}\n        {...injectedProps}\n        {...wrapperProps}\n        {...other}\n      >\n        <Picker\n          {...pickerProps}\n          allowKeyboardControl={allowKeyboardControl}\n          ampm={ampm}\n          animateYearScrolling={animateYearScrolling}\n          dateRangeIcon={dateRangeIcon}\n          disableFuture={disableFuture}\n          disablePast={disablePast}\n          disableToolbar={disableToolbar}\n          hideTabs={hideTabs}\n          leftArrowButtonProps={leftArrowButtonProps}\n          leftArrowIcon={leftArrowIcon}\n          loadingIndicator={loadingIndicator}\n          maxDate={maxDate}\n          minDate={minDate}\n          minutesStep={minutesStep}\n          onMonthChange={onMonthChange}\n          onYearChange={onYearChange}\n          openTo={openTo}\n          orientation={orientation}\n          renderDay={renderDay}\n          rightArrowButtonProps={rightArrowButtonProps}\n          rightArrowIcon={rightArrowIcon}\n          shouldDisableDate={shouldDisableDate}\n          strictCompareDates={strictCompareDates}\n          timeIcon={timeIcon}\n          ToolbarComponent={ToolbarComponent}\n          views={views}\n        />\n      </Wrapper>\n    );\n  }\n\n  return PickerWithState;\n}\n","import * as PropTypes from 'prop-types';\nimport { BaseTimePickerProps } from '../TimePicker/TimePicker';\nimport { BaseDatePickerProps } from '../DatePicker/DatePicker';\n\nconst date = PropTypes.oneOfType([\n  PropTypes.object,\n  PropTypes.string,\n  PropTypes.number,\n  PropTypes.instanceOf(Date),\n]);\n\nconst datePickerView = PropTypes.oneOf(['year', 'month', 'day']);\n\nexport type ParsableDate = object | string | number | Date | null | undefined;\n\nexport const DomainPropTypes = { date, datePickerView };\n\n/* eslint-disable @typescript-eslint/no-object-literal-type-assertion */\nexport const timePickerDefaultProps = {\n  ampm: true,\n  invalidDateMessage: 'Invalid Time Format',\n} as BaseTimePickerProps;\n\nexport const datePickerDefaultProps = {\n  minDate: new Date('1900-01-01'),\n  maxDate: new Date('2100-01-01'),\n  invalidDateMessage: 'Invalid Date Format',\n  minDateMessage: 'Date should not be before minimal date',\n  maxDateMessage: 'Date should not be after maximal date',\n  allowKeyboardControl: true,\n} as BaseDatePickerProps;\n\nexport const dateTimePickerDefaultProps = {\n  ...timePickerDefaultProps,\n  ...datePickerDefaultProps,\n  showTabs: true,\n} as BaseTimePickerProps & BaseDatePickerProps;\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport interface YearProps {\n  children: React.ReactNode;\n  disabled?: boolean;\n  onSelect: (value: any) => void;\n  selected?: boolean;\n  value: any;\n  forwardedRef?: React.Ref<HTMLDivElement>;\n}\n\nexport const useStyles = makeStyles(\n  theme => ({\n    root: {\n      height: 40,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      cursor: 'pointer',\n      outline: 'none',\n      '&:focus': {\n        color: theme.palette.primary.main,\n        fontWeight: theme.typography.fontWeightMedium,\n      },\n    },\n    yearSelected: {\n      margin: '10px 0',\n      fontWeight: theme.typography.fontWeightMedium,\n    },\n    yearDisabled: {\n      pointerEvents: 'none',\n      color: theme.palette.text.hint,\n    },\n  }),\n  { name: 'MuiPickersYear' }\n);\n\nexport const Year: React.FC<YearProps> = ({\n  onSelect,\n  forwardedRef,\n  value,\n  selected,\n  disabled,\n  children,\n  ...other\n}) => {\n  const classes = useStyles();\n  const handleClick = React.useCallback(() => onSelect(value), [onSelect, value]);\n\n  return (\n    <Typography\n      role=\"button\"\n      component=\"div\"\n      tabIndex={disabled ? -1 : 0}\n      onClick={handleClick}\n      onKeyPress={handleClick}\n      color={selected ? 'primary' : undefined}\n      variant={selected ? 'h5' : 'subtitle1'}\n      children={children}\n      ref={forwardedRef}\n      className={clsx(classes.root, {\n        [classes.yearSelected]: selected,\n        [classes.yearDisabled]: disabled,\n      })}\n      {...other}\n    />\n  );\n};\n\nYear.displayName = 'Year';\n\nexport default React.forwardRef<HTMLDivElement, YearProps>((props, ref) => (\n  <Year {...props} forwardedRef={ref} />\n));\n","import * as React from 'react';\nimport Year from './Year';\nimport { DateType } from '@date-io/type';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { VariantContext } from '../../wrappers/Wrapper';\nimport { MaterialUiPickersDate } from '../../typings/date';\n\nexport interface YearSelectionProps {\n  date: MaterialUiPickersDate;\n  minDate: DateType;\n  maxDate: DateType;\n  onChange: (date: MaterialUiPickersDate, isFinish: boolean) => void;\n  disablePast?: boolean | null | undefined;\n  disableFuture?: boolean | null | undefined;\n  animateYearScrolling?: boolean | null | undefined;\n  onYearChange?: (date: MaterialUiPickersDate) => void;\n}\n\nexport const useStyles = makeStyles(\n  {\n    container: {\n      height: 300,\n      overflowY: 'auto',\n    },\n  },\n  { name: 'MuiPickersYearSelection' }\n);\n\nexport const YearSelection: React.FC<YearSelectionProps> = ({\n  date,\n  onChange,\n  onYearChange,\n  minDate,\n  maxDate,\n  disablePast,\n  disableFuture,\n  animateYearScrolling,\n}) => {\n  const utils = useUtils();\n  const classes = useStyles();\n  const currentVariant = React.useContext(VariantContext);\n  const selectedYearRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (selectedYearRef.current && selectedYearRef.current.scrollIntoView) {\n      try {\n        selectedYearRef.current.scrollIntoView({\n          block: currentVariant === 'static' ? 'nearest' : 'center',\n          behavior: animateYearScrolling ? 'smooth' : 'auto',\n        });\n      } catch (e) {\n        // call without arguments in case when scrollIntoView works improperly (e.g. Firefox 52-57)\n        selectedYearRef.current.scrollIntoView();\n      }\n    }\n  }, []); // eslint-disable-line\n\n  const currentYear = utils.getYear(date);\n  const onYearSelect = React.useCallback(\n    (year: number) => {\n      const newDate = utils.setYear(date, year);\n      if (onYearChange) {\n        onYearChange(newDate);\n      }\n\n      onChange(newDate, true);\n    },\n    [date, onChange, onYearChange, utils]\n  );\n\n  return (\n    <div className={classes.container}>\n      {utils.getYearRange(minDate, maxDate).map(year => {\n        const yearNumber = utils.getYear(year);\n        const selected = yearNumber === currentYear;\n\n        return (\n          <Year\n            key={utils.getYearText(year)}\n            selected={selected}\n            value={yearNumber}\n            onSelect={onYearSelect}\n            ref={selected ? selectedYearRef : undefined}\n            disabled={Boolean(\n              (disablePast && utils.isBeforeYear(year, utils.date())) ||\n                (disableFuture && utils.isAfterYear(year, utils.date()))\n            )}\n          >\n            {utils.getYearText(year)}\n          </Year>\n        );\n      })}\n    </div>\n  );\n};\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport interface MonthProps {\n  children: React.ReactNode;\n  disabled?: boolean;\n  onSelect: (value: any) => void;\n  selected?: boolean;\n  value: any;\n}\n\nexport const useStyles = makeStyles(\n  theme => ({\n    root: {\n      flex: '1 0 33.33%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      cursor: 'pointer',\n      outline: 'none',\n      height: 75,\n      transition: theme.transitions.create('font-size', { duration: '100ms' }),\n      '&:focus': {\n        color: theme.palette.primary.main,\n        fontWeight: theme.typography.fontWeightMedium,\n      },\n    },\n    monthSelected: {\n      color: theme.palette.primary.main,\n      fontWeight: theme.typography.fontWeightMedium,\n    },\n    monthDisabled: {\n      pointerEvents: 'none',\n      color: theme.palette.text.hint,\n    },\n  }),\n  { name: 'MuiPickersMonth' }\n);\n\nexport const Month: React.FC<MonthProps> = ({\n  selected,\n  onSelect,\n  disabled,\n  value,\n  children,\n  ...other\n}) => {\n  const classes = useStyles();\n  const handleSelection = React.useCallback(() => {\n    onSelect(value);\n  }, [onSelect, value]);\n\n  return (\n    <Typography\n      role=\"button\"\n      component=\"div\"\n      className={clsx(classes.root, {\n        [classes.monthSelected]: selected,\n        [classes.monthDisabled]: disabled,\n      })}\n      tabIndex={disabled ? -1 : 0}\n      onClick={handleSelection}\n      onKeyPress={handleSelection}\n      color={selected ? 'primary' : undefined}\n      variant={selected ? 'h5' : 'subtitle1'}\n      children={children}\n      {...other}\n    />\n  );\n};\n\nMonth.displayName = 'Month';\n\nexport default Month;\n","import * as React from 'react';\nimport Month from './Month';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { ParsableDate } from '../../constants/prop-types';\nimport { MaterialUiPickersDate } from '../../typings/date';\n\nexport interface MonthSelectionProps {\n  date: MaterialUiPickersDate;\n  minDate?: ParsableDate;\n  maxDate?: ParsableDate;\n  onChange: (date: MaterialUiPickersDate, isFinish: boolean) => void;\n  disablePast?: boolean | null | undefined;\n  disableFuture?: boolean | null | undefined;\n  onMonthChange?: (date: MaterialUiPickersDate) => void | Promise<void>;\n}\n\nexport const useStyles = makeStyles(\n  {\n    container: {\n      width: 310,\n      display: 'flex',\n      flexWrap: 'wrap',\n      alignContent: 'stretch',\n    },\n  },\n  { name: 'MuiPickersMonthSelection' }\n);\n\nexport const MonthSelection: React.FC<MonthSelectionProps> = ({\n  disablePast,\n  disableFuture,\n  minDate,\n  maxDate,\n  date,\n  onMonthChange,\n  onChange,\n}) => {\n  const utils = useUtils();\n  const classes = useStyles();\n  const currentMonth = utils.getMonth(date);\n\n  const shouldDisableMonth = (month: MaterialUiPickersDate) => {\n    const now = utils.date();\n    const utilMinDate = utils.date(minDate);\n    const utilMaxDate = utils.date(maxDate);\n\n    const firstEnabledMonth = utils.startOfMonth(\n      disablePast && utils.isAfter(now, utilMinDate) ? now : utilMinDate\n    );\n\n    const lastEnabledMonth = utils.startOfMonth(\n      disableFuture && utils.isBefore(now, utilMaxDate) ? now : utilMaxDate\n    );\n\n    const isBeforeFirstEnabled = utils.isBefore(month, firstEnabledMonth);\n    const isAfterLastEnabled = utils.isAfter(month, lastEnabledMonth);\n\n    return isBeforeFirstEnabled || isAfterLastEnabled;\n  };\n\n  const onMonthSelect = React.useCallback(\n    (month: number) => {\n      const newDate = utils.setMonth(date, month);\n\n      onChange(newDate, true);\n      if (onMonthChange) {\n        onMonthChange(newDate);\n      }\n    },\n    [date, onChange, onMonthChange, utils]\n  );\n\n  return (\n    <div className={classes.container}>\n      {utils.getMonthArray(date).map(month => {\n        const monthNumber = utils.getMonth(month);\n        const monthText = utils.format(month, 'MMM');\n\n        return (\n          <Month\n            key={monthText}\n            value={monthNumber}\n            selected={monthNumber === currentMonth}\n            onSelect={onMonthSelect}\n            disabled={shouldDisableMonth(month)}\n          >\n            {monthText}\n          </Month>\n        );\n      })}\n    </div>\n  );\n};\n","import * as React from 'react';\nimport { useIsomorphicEffect } from './useKeyDown';\nimport { BasePickerProps } from '../../typings/BasePicker';\n\nconst getOrientation = () => {\n  if (typeof window === 'undefined') {\n    return 'portrait';\n  }\n\n  if (window.screen && window.screen.orientation && window.screen.orientation.angle) {\n    return Math.abs(window.screen.orientation.angle) === 90 ? 'landscape' : 'portrait';\n  }\n\n  // Support IOS safari\n  if (window.orientation) {\n    return Math.abs(Number(window.orientation)) === 90 ? 'landscape' : 'portrait';\n  }\n\n  return 'portrait';\n};\n\nexport function useIsLandscape(customOrientation?: BasePickerProps['orientation']) {\n  const [orientation, setOrientation] = React.useState<BasePickerProps['orientation']>(\n    getOrientation()\n  );\n\n  const eventHandler = React.useCallback(() => setOrientation(getOrientation()), []);\n\n  useIsomorphicEffect(() => {\n    window.addEventListener('orientationchange', eventHandler);\n    return () => window.removeEventListener('orientationchange', eventHandler);\n  }, [eventHandler]);\n\n  const orientationToUse = customOrientation || orientation;\n  return orientationToUse === 'landscape';\n}\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport Calendar from '../views/Calendar/Calendar';\nimport { useUtils } from '../_shared/hooks/useUtils';\nimport { useViews } from '../_shared/hooks/useViews';\nimport { ClockView } from '../views/Clock/ClockView';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { YearSelection } from '../views/Year/YearView';\nimport { BasePickerProps } from '../typings/BasePicker';\nimport { MaterialUiPickersDate } from '../typings/date';\nimport { MonthSelection } from '../views/Month/MonthView';\nimport { BaseTimePickerProps } from '../TimePicker/TimePicker';\nimport { BaseDatePickerProps } from '../DatePicker/DatePicker';\nimport { useIsLandscape } from '../_shared/hooks/useIsLandscape';\nimport { datePickerDefaultProps } from '../constants/prop-types';\nimport { DIALOG_WIDTH_WIDER, DIALOG_WIDTH, VIEW_HEIGHT } from '../constants/dimensions';\n\nconst viewsMap = {\n  year: YearSelection,\n  month: MonthSelection,\n  date: Calendar,\n  hours: ClockView,\n  minutes: ClockView,\n  seconds: ClockView,\n};\n\nexport type PickerView = keyof typeof viewsMap;\n\nexport type ToolbarComponentProps = BaseDatePickerProps &\n  BaseTimePickerProps & {\n    views: PickerView[];\n    openView: PickerView;\n    date: MaterialUiPickersDate;\n    setOpenView: (view: PickerView) => void;\n    onChange: (date: MaterialUiPickersDate, isFinish?: boolean) => void;\n    // TODO move out, cause it is DateTimePickerOnly\n    hideTabs?: boolean;\n    dateRangeIcon?: React.ReactNode;\n    timeIcon?: React.ReactNode;\n    isLandscape: boolean;\n  };\n\nexport interface PickerViewProps extends BaseDatePickerProps, BaseTimePickerProps {\n  views: PickerView[];\n  openTo: PickerView;\n  disableToolbar?: boolean;\n  ToolbarComponent: React.ComponentType<ToolbarComponentProps>;\n  // TODO move out, cause it is DateTimePickerOnly\n  hideTabs?: boolean;\n  dateRangeIcon?: React.ReactNode;\n  timeIcon?: React.ReactNode;\n}\n\ninterface PickerProps extends PickerViewProps {\n  date: MaterialUiPickersDate;\n  orientation?: BasePickerProps['orientation'];\n  onChange: (date: MaterialUiPickersDate, isFinish?: boolean) => void;\n}\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    containerLandscape: {\n      flexDirection: 'row',\n    },\n    pickerView: {\n      overflowX: 'hidden',\n      minHeight: VIEW_HEIGHT,\n      minWidth: DIALOG_WIDTH,\n      maxWidth: DIALOG_WIDTH_WIDER,\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n    },\n    pickerViewLandscape: {\n      padding: '0 8px',\n    },\n  },\n  { name: 'MuiPickersBasePicker' }\n);\n\nexport const Picker: React.FunctionComponent<PickerProps> = ({\n  date,\n  views,\n  disableToolbar,\n  onChange,\n  openTo,\n  minDate: unparsedMinDate,\n  maxDate: unparsedMaxDate,\n  ToolbarComponent,\n  orientation,\n  ...rest\n}) => {\n  const utils = useUtils();\n  const classes = useStyles();\n  const isLandscape = useIsLandscape(orientation);\n  const { openView, setOpenView, handleChangeAndOpenNext } = useViews(views, openTo, onChange);\n\n  const minDate = React.useMemo(() => utils.date(unparsedMinDate)!, [unparsedMinDate, utils]);\n  const maxDate = React.useMemo(() => utils.date(unparsedMaxDate)!, [unparsedMaxDate, utils]);\n\n  return (\n    <div\n      className={clsx(classes.container, {\n        [classes.containerLandscape]: isLandscape,\n      })}\n    >\n      {!disableToolbar && (\n        <ToolbarComponent\n          {...rest}\n          views={views}\n          isLandscape={isLandscape}\n          date={date}\n          onChange={onChange}\n          setOpenView={setOpenView}\n          openView={openView}\n        />\n      )}\n\n      <div className={clsx(classes.pickerView, { [classes.pickerViewLandscape]: isLandscape })}>\n        {openView === 'year' && (\n          <YearSelection\n            {...rest}\n            date={date}\n            onChange={handleChangeAndOpenNext}\n            minDate={minDate}\n            maxDate={maxDate}\n          />\n        )}\n\n        {openView === 'month' && (\n          <MonthSelection\n            {...rest}\n            date={date}\n            onChange={handleChangeAndOpenNext}\n            minDate={minDate}\n            maxDate={maxDate}\n          />\n        )}\n\n        {openView === 'date' && (\n          <Calendar\n            {...rest}\n            date={date}\n            onChange={handleChangeAndOpenNext}\n            minDate={minDate}\n            maxDate={maxDate}\n          />\n        )}\n\n        {(openView === 'hours' || openView === 'minutes' || openView === 'seconds') && (\n          <ClockView\n            {...rest}\n            date={date}\n            type={openView}\n            onHourChange={handleChangeAndOpenNext}\n            onMinutesChange={handleChangeAndOpenNext}\n            onSecondsChange={handleChangeAndOpenNext}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nPicker.defaultProps = {\n  ...datePickerDefaultProps,\n  views: Object.keys(viewsMap),\n} as any;\n","import * as React from 'react';\nimport { PickerView } from '../../Picker/Picker';\nimport { arrayIncludes } from '../../_helpers/utils';\nimport { MaterialUiPickersDate } from '../../typings/date';\n\nexport function useViews(\n  views: PickerView[],\n  openTo: PickerView,\n  onChange: (date: MaterialUiPickersDate, isFinish?: boolean) => void\n) {\n  const [openView, setOpenView] = React.useState(\n    openTo && arrayIncludes(views, openTo) ? openTo : views[0]\n  );\n\n  const handleChangeAndOpenNext = React.useCallback(\n    (date: MaterialUiPickersDate, isFinish?: boolean) => {\n      const nextViewToOpen = views[views.indexOf(openView!) + 1];\n      if (isFinish && nextViewToOpen) {\n        // do not close picker if needs to show next view\n        onChange(date, false);\n        setOpenView(nextViewToOpen);\n        return;\n      }\n\n      onChange(date, Boolean(isFinish));\n    },\n    [onChange, openView, views]\n  );\n\n  return { handleChangeAndOpenNext, openView, setOpenView };\n}\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst positions: Record<number, [number, number]> = {\n  0: [0, 40],\n  1: [55, 19.6],\n  2: [94.4, 59.5],\n  3: [109, 114],\n  4: [94.4, 168.5],\n  5: [54.5, 208.4],\n  6: [0, 223],\n  7: [-54.5, 208.4],\n  8: [-94.4, 168.5],\n  9: [-109, 114],\n  10: [-94.4, 59.5],\n  11: [-54.5, 19.6],\n  12: [0, 5],\n  13: [36.9, 49.9],\n  14: [64, 77],\n  15: [74, 114],\n  16: [64, 151],\n  17: [37, 178],\n  18: [0, 188],\n  19: [-37, 178],\n  20: [-64, 151],\n  21: [-74, 114],\n  22: [-64, 77],\n  23: [-37, 50],\n};\n\nexport interface ClockNumberProps {\n  index: number;\n  label: string;\n  selected: boolean;\n  isInner?: boolean;\n}\n\nexport const useStyles = makeStyles(\n  theme => {\n    const size = theme.spacing(4);\n\n    return {\n      clockNumber: {\n        width: size,\n        height: 32,\n        userSelect: 'none',\n        position: 'absolute',\n        left: `calc((100% - ${typeof size === 'number' ? `${size}px` : size}) / 2)`,\n        display: 'inline-flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderRadius: '50%',\n        color:\n          theme.palette.type === 'light' ? theme.palette.text.primary : theme.palette.text.hint,\n      },\n      clockNumberSelected: {\n        color: theme.palette.primary.contrastText,\n      },\n    };\n  },\n  { name: 'MuiPickersClockNumber' }\n);\n\nexport const ClockNumber: React.FC<ClockNumberProps> = ({ selected, label, index, isInner }) => {\n  const classes = useStyles();\n  const className = clsx(classes.clockNumber, {\n    [classes.clockNumberSelected]: selected,\n  });\n\n  const transformStyle = React.useMemo(() => {\n    const position = positions[index];\n\n    return {\n      transform: `translate(${position[0]}px, ${position[1]}px`,\n    };\n  }, [index]);\n\n  return (\n    <Typography\n      component=\"span\"\n      className={className}\n      variant={isInner ? 'body2' : 'body1'}\n      style={transformStyle}\n      children={label}\n    />\n  );\n};\n\nexport default ClockNumber;\n","import * as React from 'react';\nimport ClockNumber from './ClockNumber';\nimport { IUtils } from '@date-io/core/IUtils';\nimport { MaterialUiPickersDate } from '../../typings/date';\n\nexport const getHourNumbers = ({\n  ampm,\n  utils,\n  date,\n}: {\n  ampm: boolean;\n  utils: IUtils<MaterialUiPickersDate>;\n  date: MaterialUiPickersDate;\n}) => {\n  const currentHours = utils.getHours(date);\n\n  const hourNumbers: JSX.Element[] = [];\n  const startHour = ampm ? 1 : 0;\n  const endHour = ampm ? 12 : 23;\n\n  const isSelected = (hour: number) => {\n    if (ampm) {\n      if (hour === 12) {\n        return currentHours === 12 || currentHours === 0;\n      }\n\n      return currentHours === hour || currentHours - 12 === hour;\n    }\n\n    return currentHours === hour;\n  };\n\n  for (let hour = startHour; hour <= endHour; hour += 1) {\n    let label = hour.toString();\n\n    if (hour === 0) {\n      label = '00';\n    }\n\n    const props = {\n      index: hour,\n      label: utils.formatNumber(label),\n      selected: isSelected(hour),\n      isInner: !ampm && (hour === 0 || hour > 12),\n    };\n\n    hourNumbers.push(<ClockNumber key={hour} {...props} />);\n  }\n\n  return hourNumbers;\n};\n\nexport const getMinutesNumbers = ({\n  value,\n  utils,\n}: {\n  value: number;\n  utils: IUtils<MaterialUiPickersDate>;\n}) => {\n  const f = utils.formatNumber;\n\n  return [\n    <ClockNumber label={f('00')} selected={value === 0} index={12} key={12} />,\n    <ClockNumber label={f('05')} selected={value === 5} index={1} key={1} />,\n    <ClockNumber label={f('10')} selected={value === 10} index={2} key={2} />,\n    <ClockNumber label={f('15')} selected={value === 15} index={3} key={3} />,\n    <ClockNumber label={f('20')} selected={value === 20} index={4} key={4} />,\n    <ClockNumber label={f('25')} selected={value === 25} index={5} key={5} />,\n    <ClockNumber label={f('30')} selected={value === 30} index={6} key={6} />,\n    <ClockNumber label={f('35')} selected={value === 35} index={7} key={7} />,\n    <ClockNumber label={f('40')} selected={value === 40} index={8} key={8} />,\n    <ClockNumber label={f('45')} selected={value === 45} index={9} key={9} />,\n    <ClockNumber label={f('50')} selected={value === 50} index={10} key={10} />,\n    <ClockNumber label={f('55')} selected={value === 55} index={11} key={11} />,\n  ];\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Clock from './Clock';\nimport ClockType from '../../constants/ClockType';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { MaterialUiPickersDate } from '../../typings/date';\nimport { getHourNumbers, getMinutesNumbers } from './ClockNumbers';\nimport { convertToMeridiem, getMeridiem } from '../../_helpers/time-utils';\n\nexport interface TimePickerViewProps {\n  /** TimePicker value */\n  date: MaterialUiPickersDate;\n  /** Clock type */\n  type: 'hours' | 'minutes' | 'seconds';\n  /** 12h/24h clock mode */\n  ampm?: boolean;\n  /** Minutes step */\n  minutesStep?: number;\n  /** On hour change */\n  onHourChange: (date: MaterialUiPickersDate, isFinish?: boolean) => void;\n  /** On minutes change */\n  onMinutesChange: (date: MaterialUiPickersDate, isFinish?: boolean) => void;\n  /** On seconds change */\n  onSecondsChange: (date: MaterialUiPickersDate, isFinish?: boolean) => void;\n}\n\nexport const ClockView: React.FC<TimePickerViewProps> = ({\n  type,\n  onHourChange,\n  onMinutesChange,\n  onSecondsChange,\n  ampm,\n  date,\n  minutesStep,\n}) => {\n  const utils = useUtils();\n  const viewProps = React.useMemo(() => {\n    switch (type) {\n      case ClockType.HOURS:\n        return {\n          value: utils.getHours(date),\n          children: getHourNumbers({ date, utils, ampm: Boolean(ampm) }),\n          onChange: (value: number, isFinish?: boolean) => {\n            const currentMeridiem = getMeridiem(date, utils);\n            const updatedTimeWithMeridiem = convertToMeridiem(\n              utils.setHours(date, value),\n              currentMeridiem,\n              Boolean(ampm),\n              utils\n            );\n\n            onHourChange(updatedTimeWithMeridiem, isFinish);\n          },\n        };\n\n      case ClockType.MINUTES:\n        const minutesValue = utils.getMinutes(date);\n        return {\n          value: minutesValue,\n          children: getMinutesNumbers({ value: minutesValue, utils }),\n          onChange: (value: number, isFinish?: boolean) => {\n            const updatedTime = utils.setMinutes(date, value);\n\n            onMinutesChange(updatedTime, isFinish);\n          },\n        };\n\n      case ClockType.SECONDS:\n        const secondsValue = utils.getSeconds(date);\n        return {\n          value: secondsValue,\n          children: getMinutesNumbers({ value: secondsValue, utils }),\n          onChange: (value: number, isFinish?: boolean) => {\n            const updatedTime = utils.setSeconds(date, value);\n\n            onSecondsChange(updatedTime, isFinish);\n          },\n        };\n\n      default:\n        throw new Error('You must provide the type for TimePickerView');\n    }\n  }, [ampm, date, onHourChange, onMinutesChange, onSecondsChange, type, utils]);\n\n  return <Clock type={type} ampm={ampm} minutesStep={minutesStep} {...viewProps} />;\n};\n\nClockView.displayName = 'TimePickerView';\n\nClockView.propTypes = {\n  date: PropTypes.object.isRequired,\n  onHourChange: PropTypes.func.isRequired,\n  onMinutesChange: PropTypes.func.isRequired,\n  onSecondsChange: PropTypes.func.isRequired,\n  ampm: PropTypes.bool,\n  minutesStep: PropTypes.number,\n  type: PropTypes.oneOf(Object.keys(ClockType).map(key => ClockType[key as keyof typeof ClockType]))\n    .isRequired,\n} as any;\n\nClockView.defaultProps = {\n  ampm: true,\n  minutesStep: 1,\n};\n\nexport default React.memo(ClockView);\n","function replaceClassName(origClass, classToRemove) {\n  return origClass.replace(new RegExp(\"(^|\\\\s)\" + classToRemove + \"(?:\\\\s|$)\", 'g'), '$1').replace(/\\s+/g, ' ').replace(/^\\s*|\\s*$/g, '');\n}\n\nexport default function removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else if (typeof element.className === 'string') {\n    ;\n    element.className = replaceClassName(element.className, className);\n  } else {\n    element.setAttribute('class', replaceClassName(element.className && element.className.baseVal || '', className));\n  }\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport PropTypes from 'prop-types';\nimport addOneClass from 'dom-helpers/addClass';\nimport removeOneClass from 'dom-helpers/removeClass';\nimport React from 'react';\nimport Transition from './Transition';\nimport { classNamesShape } from './utils/PropTypes';\n\nvar _addClass = function addClass(node, classes) {\n  return node && classes && classes.split(' ').forEach(function (c) {\n    return addOneClass(node, c);\n  });\n};\n\nvar removeClass = function removeClass(node, classes) {\n  return node && classes && classes.split(' ').forEach(function (c) {\n    return removeOneClass(node, c);\n  });\n};\n/**\n * A transition component inspired by the excellent\n * [ng-animate](http://www.nganimate.org/) library, you should use it if you're\n * using CSS transitions or animations. It's built upon the\n * [`Transition`](https://reactcommunity.org/react-transition-group/transition)\n * component, so it inherits all of its props.\n *\n * `CSSTransition` applies a pair of class names during the `appear`, `enter`,\n * and `exit` states of the transition. The first class is applied and then a\n * second `*-active` class in order to activate the CSS transition. After the\n * transition, matching `*-done` class names are applied to persist the\n * transition state.\n *\n * ```jsx\n * function App() {\n *   const [inProp, setInProp] = useState(false);\n *   return (\n *     <div>\n *       <CSSTransition in={inProp} timeout={200} classNames=\"my-node\">\n *         <div>\n *           {\"I'll receive my-node-* classes\"}\n *         </div>\n *       </CSSTransition>\n *       <button type=\"button\" onClick={() => setInProp(true)}>\n *         Click to Enter\n *       </button>\n *     </div>\n *   );\n * }\n * ```\n *\n * When the `in` prop is set to `true`, the child component will first receive\n * the class `example-enter`, then the `example-enter-active` will be added in\n * the next tick. `CSSTransition` [forces a\n * reflow](https://github.com/reactjs/react-transition-group/blob/5007303e729a74be66a21c3e2205e4916821524b/src/CSSTransition.js#L208-L215)\n * between before adding the `example-enter-active`. This is an important trick\n * because it allows us to transition between `example-enter` and\n * `example-enter-active` even though they were added immediately one after\n * another. Most notably, this is what makes it possible for us to animate\n * _appearance_.\n *\n * ```css\n * .my-node-enter {\n *   opacity: 0;\n * }\n * .my-node-enter-active {\n *   opacity: 1;\n *   transition: opacity 200ms;\n * }\n * .my-node-exit {\n *   opacity: 1;\n * }\n * .my-node-exit-active {\n *   opacity: 0;\n *   transition: opacity 200ms;\n * }\n * ```\n *\n * `*-active` classes represent which styles you want to animate **to**.\n *\n * **Note**: If you're using the\n * [`appear`](http://reactcommunity.org/react-transition-group/transition#Transition-prop-appear)\n * prop, make sure to define styles for `.appear-*` classes as well.\n */\n\n\nvar CSSTransition =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(CSSTransition, _React$Component);\n\n  function CSSTransition() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.appliedClasses = {\n      appear: {},\n      enter: {},\n      exit: {}\n    };\n\n    _this.onEnter = function (node, appearing) {\n      _this.removeClasses(node, 'exit');\n\n      _this.addClass(node, appearing ? 'appear' : 'enter', 'base');\n\n      if (_this.props.onEnter) {\n        _this.props.onEnter(node, appearing);\n      }\n    };\n\n    _this.onEntering = function (node, appearing) {\n      var type = appearing ? 'appear' : 'enter';\n\n      _this.addClass(node, type, 'active');\n\n      if (_this.props.onEntering) {\n        _this.props.onEntering(node, appearing);\n      }\n    };\n\n    _this.onEntered = function (node, appearing) {\n      var type = appearing ? 'appear' : 'enter';\n\n      _this.removeClasses(node, type);\n\n      _this.addClass(node, type, 'done');\n\n      if (_this.props.onEntered) {\n        _this.props.onEntered(node, appearing);\n      }\n    };\n\n    _this.onExit = function (node) {\n      _this.removeClasses(node, 'appear');\n\n      _this.removeClasses(node, 'enter');\n\n      _this.addClass(node, 'exit', 'base');\n\n      if (_this.props.onExit) {\n        _this.props.onExit(node);\n      }\n    };\n\n    _this.onExiting = function (node) {\n      _this.addClass(node, 'exit', 'active');\n\n      if (_this.props.onExiting) {\n        _this.props.onExiting(node);\n      }\n    };\n\n    _this.onExited = function (node) {\n      _this.removeClasses(node, 'exit');\n\n      _this.addClass(node, 'exit', 'done');\n\n      if (_this.props.onExited) {\n        _this.props.onExited(node);\n      }\n    };\n\n    _this.getClassNames = function (type) {\n      var classNames = _this.props.classNames;\n      var isStringClassNames = typeof classNames === 'string';\n      var prefix = isStringClassNames && classNames ? classNames + \"-\" : '';\n      var baseClassName = isStringClassNames ? \"\" + prefix + type : classNames[type];\n      var activeClassName = isStringClassNames ? baseClassName + \"-active\" : classNames[type + \"Active\"];\n      var doneClassName = isStringClassNames ? baseClassName + \"-done\" : classNames[type + \"Done\"];\n      return {\n        baseClassName: baseClassName,\n        activeClassName: activeClassName,\n        doneClassName: doneClassName\n      };\n    };\n\n    return _this;\n  }\n\n  var _proto = CSSTransition.prototype;\n\n  _proto.addClass = function addClass(node, type, phase) {\n    var className = this.getClassNames(type)[phase + \"ClassName\"];\n\n    if (type === 'appear' && phase === 'done') {\n      className += \" \" + this.getClassNames('enter').doneClassName;\n    } // This is for to force a repaint,\n    // which is necessary in order to transition styles when adding a class name.\n\n\n    if (phase === 'active') {\n      /* eslint-disable no-unused-expressions */\n      node && node.scrollTop;\n    }\n\n    this.appliedClasses[type][phase] = className;\n\n    _addClass(node, className);\n  };\n\n  _proto.removeClasses = function removeClasses(node, type) {\n    var _this$appliedClasses$ = this.appliedClasses[type],\n        baseClassName = _this$appliedClasses$.base,\n        activeClassName = _this$appliedClasses$.active,\n        doneClassName = _this$appliedClasses$.done;\n    this.appliedClasses[type] = {};\n\n    if (baseClassName) {\n      removeClass(node, baseClassName);\n    }\n\n    if (activeClassName) {\n      removeClass(node, activeClassName);\n    }\n\n    if (doneClassName) {\n      removeClass(node, doneClassName);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        _ = _this$props.classNames,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"classNames\"]);\n\n    return React.createElement(Transition, _extends({}, props, {\n      onEnter: this.onEnter,\n      onEntered: this.onEntered,\n      onEntering: this.onEntering,\n      onExit: this.onExit,\n      onExiting: this.onExiting,\n      onExited: this.onExited\n    }));\n  };\n\n  return CSSTransition;\n}(React.Component);\n\nCSSTransition.defaultProps = {\n  classNames: ''\n};\nCSSTransition.propTypes = process.env.NODE_ENV !== \"production\" ? _extends({}, Transition.propTypes, {\n  /**\n   * The animation classNames applied to the component as it appears, enters,\n   * exits or has finished the transition. A single name can be provided and it\n   * will be suffixed for each stage: e.g.\n   *\n   * `classNames=\"fade\"` applies `fade-appear`, `fade-appear-active`,\n   * `fade-appear-done`, `fade-enter`, `fade-enter-active`, `fade-enter-done`,\n   * `fade-exit`, `fade-exit-active`, and `fade-exit-done`.\n   *\n   * **Note**: `fade-appear-done` and `fade-enter-done` will _both_ be applied.\n   * This allows you to define different behavior for when appearing is done and\n   * when regular entering is done, using selectors like\n   * `.fade-enter-done:not(.fade-appear-done)`. For example, you could apply an\n   * epic entrance animation when element first appears in the DOM using\n   * [Animate.css](https://daneden.github.io/animate.css/). Otherwise you can\n   * simply use `fade-enter-done` for defining both cases.\n   *\n   * Each individual classNames can also be specified independently like:\n   *\n   * ```js\n   * classNames={{\n   *  appear: 'my-appear',\n   *  appearActive: 'my-active-appear',\n   *  appearDone: 'my-done-appear',\n   *  enter: 'my-enter',\n   *  enterActive: 'my-active-enter',\n   *  enterDone: 'my-done-enter',\n   *  exit: 'my-exit',\n   *  exitActive: 'my-active-exit',\n   *  exitDone: 'my-done-exit',\n   * }}\n   * ```\n   *\n   * If you want to set these classes using CSS Modules:\n   *\n   * ```js\n   * import styles from './styles.css';\n   * ```\n   *\n   * you might want to use camelCase in your CSS file, that way could simply\n   * spread them instead of listing them one by one:\n   *\n   * ```js\n   * classNames={{ ...styles }}\n   * ```\n   *\n   * @type {string | {\n   *  appear?: string,\n   *  appearActive?: string,\n   *  appearDone?: string,\n   *  enter?: string,\n   *  enterActive?: string,\n   *  enterDone?: string,\n   *  exit?: string,\n   *  exitActive?: string,\n   *  exitDone?: string,\n   * }}\n   */\n  classNames: classNamesShape,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'enter' or 'appear' class is\n   * applied.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'enter-active' or\n   * 'appear-active' class is applied.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'enter' or\n   * 'appear' classes are **removed** and the `done` class is added to the DOM node.\n   *\n   * @type Function(node: HtmlElement, isAppearing: bool)\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'exit' class is\n   * applied.\n   *\n   * @type Function(node: HtmlElement)\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'exit-active' is applied.\n   *\n   * @type Function(node: HtmlElement)\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * A `<Transition>` callback fired immediately after the 'exit' classes\n   * are **removed** and the `exit-done` class is added to the DOM node.\n   *\n   * @type Function(node: HtmlElement)\n   */\n  onExited: PropTypes.func\n}) : {};\nexport default CSSTransition;","import hasClass from './hasClass';\nexport default function addClass(element, className) {\n  if (element.classList) element.classList.add(className);else if (!hasClass(element, className)) if (typeof element.className === 'string') element.className = element.className + \" \" + className;else element.setAttribute('class', (element.className && element.className.baseVal || '') + \" \" + className);\n}","export default function hasClass(element, className) {\n  if (element.classList) return !!className && element.classList.contains(className);\n  return (\" \" + (element.className.baseVal || element.className) + \" \").indexOf(\" \" + className + \" \") !== -1;\n}","import { arrayIncludes } from './utils';\nimport { IUtils } from '@date-io/core/IUtils';\nimport { MaterialUiPickersDate } from '../typings/date';\nimport { DatePickerView } from '../DatePicker/DatePicker';\n\ninterface FindClosestDateParams {\n  date: MaterialUiPickersDate;\n  utils: IUtils<MaterialUiPickersDate>;\n  minDate: MaterialUiPickersDate;\n  maxDate: MaterialUiPickersDate;\n  disableFuture: boolean;\n  disablePast: boolean;\n  shouldDisableDate: (date: MaterialUiPickersDate) => boolean;\n}\n\nexport const findClosestEnabledDate = ({\n  date,\n  utils,\n  minDate,\n  maxDate,\n  disableFuture,\n  disablePast,\n  shouldDisableDate,\n}: FindClosestDateParams) => {\n  const today = utils.startOfDay(utils.date());\n\n  if (disablePast && utils.isBefore(minDate!, today)) {\n    minDate = today;\n  }\n\n  if (disableFuture && utils.isAfter(maxDate, today)) {\n    maxDate = today;\n  }\n\n  let forward = date;\n  let backward = date;\n  if (utils.isBefore(date, minDate)) {\n    forward = utils.date(minDate);\n    backward = null;\n  }\n\n  if (utils.isAfter(date, maxDate)) {\n    if (backward) {\n      backward = utils.date(maxDate);\n    }\n\n    forward = null;\n  }\n\n  while (forward || backward) {\n    if (forward && utils.isAfter(forward, maxDate)) {\n      forward = null;\n    }\n    if (backward && utils.isBefore(backward, minDate)) {\n      backward = null;\n    }\n\n    if (forward) {\n      if (!shouldDisableDate(forward)) {\n        return forward;\n      }\n      forward = utils.addDays(forward, 1);\n    }\n\n    if (backward) {\n      if (!shouldDisableDate(backward)) {\n        return backward;\n      }\n      backward = utils.addDays(backward, -1);\n    }\n  }\n\n  // fallback to today if no enabled days\n  return utils.date();\n};\n\nexport const isYearOnlyView = (views: DatePickerView[]) =>\n  views.length === 1 && views[0] === 'year';\n\nexport const isYearAndMonthViews = (views: DatePickerView[]) =>\n  views.length === 2 && arrayIncludes(views, 'month') && arrayIncludes(views, 'year');\n\nexport const getFormatByViews = (views: DatePickerView[], utils: IUtils<MaterialUiPickersDate>) => {\n  if (isYearOnlyView(views)) {\n    return utils.yearFormat;\n  }\n\n  if (isYearAndMonthViews(views)) {\n    return utils.yearMonthFormat;\n  }\n\n  return utils.dateFormat;\n};\n","import * as React from 'react';\n\nexport interface DayWrapperProps {\n  value: any;\n  children: React.ReactNode;\n  dayInCurrentMonth?: boolean;\n  disabled?: boolean;\n  onSelect: (value: any) => void;\n}\n\nconst DayWrapper: React.FC<DayWrapperProps> = ({\n  children,\n  value,\n  disabled,\n  onSelect,\n  dayInCurrentMonth,\n  ...other\n}) => {\n  const handleClick = React.useCallback(() => onSelect(value), [onSelect, value]);\n\n  return (\n    <div\n      role=\"presentation\"\n      onClick={dayInCurrentMonth && !disabled ? handleClick : undefined}\n      onKeyPress={dayInCurrentMonth && !disabled ? handleClick : undefined}\n      {...other}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default DayWrapper;\n","import * as React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\n\nexport type SlideDirection = 'right' | 'left';\ninterface SlideTransitionProps {\n  transKey: React.Key;\n  className?: string;\n  slideDirection: SlideDirection;\n  children: React.ReactChild;\n}\n\nconst animationDuration = 350;\nexport const useStyles = makeStyles(\n  theme => {\n    const slideTransition = theme.transitions.create('transform', {\n      duration: animationDuration,\n      easing: 'cubic-bezier(0.35, 0.8, 0.4, 1)',\n    });\n\n    return {\n      transitionContainer: {\n        display: 'block',\n        position: 'relative',\n        '& > *': {\n          position: 'absolute',\n          top: 0,\n          right: 0,\n          left: 0,\n        },\n      },\n      'slideEnter-left': {\n        willChange: 'transform',\n        transform: 'translate(100%)',\n      },\n      'slideEnter-right': {\n        willChange: 'transform',\n        transform: 'translate(-100%)',\n      },\n      slideEnterActive: {\n        transform: 'translate(0%)',\n        transition: slideTransition,\n      },\n      slideExit: {\n        transform: 'translate(0%)',\n      },\n      'slideExitActiveLeft-left': {\n        willChange: 'transform',\n        transform: 'translate(-200%)',\n        transition: slideTransition,\n      },\n      'slideExitActiveLeft-right': {\n        willChange: 'transform',\n        transform: 'translate(200%)',\n        transition: slideTransition,\n      },\n    };\n  },\n  { name: 'MuiPickersSlideTransition' }\n);\n\nconst SlideTransition: React.SFC<SlideTransitionProps> = ({\n  children,\n  transKey,\n  slideDirection,\n  className = null,\n}) => {\n  const classes = useStyles();\n  const transitionClasses = {\n    exit: classes.slideExit,\n    enterActive: classes.slideEnterActive,\n    // @ts-ignore\n    enter: classes['slideEnter-' + slideDirection],\n    // @ts-ignore\n    exitActive: classes['slideExitActiveLeft-' + slideDirection],\n  };\n\n  return (\n    <TransitionGroup\n      className={clsx(classes.transitionContainer, className)}\n      childFactory={element =>\n        React.cloneElement(element, {\n          classNames: transitionClasses,\n        })\n      }\n    >\n      <CSSTransition\n        mountOnEnter\n        unmountOnExit\n        key={transKey + slideDirection}\n        timeout={animationDuration}\n        classNames={transitionClasses}\n        children={children}\n      />\n    </TransitionGroup>\n  );\n};\n\nexport default SlideTransition;\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport SlideTransition, { SlideDirection } from './SlideTransition';\nimport IconButton, { IconButtonProps } from '@material-ui/core/IconButton';\nimport { DateType } from '@date-io/type';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { MaterialUiPickersDate } from '../../typings/date';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { ArrowLeftIcon } from '../../_shared/icons/ArrowLeftIcon';\nimport { ArrowRightIcon } from '../../_shared/icons/ArrowRightIcon';\n\nexport interface CalendarHeaderProps {\n  currentMonth: DateType;\n  leftArrowIcon?: React.ReactNode;\n  rightArrowIcon?: React.ReactNode;\n  leftArrowButtonProps?: Partial<IconButtonProps>;\n  rightArrowButtonProps?: Partial<IconButtonProps>;\n  disablePrevMonth?: boolean;\n  disableNextMonth?: boolean;\n  slideDirection: SlideDirection;\n  onMonthChange: (date: MaterialUiPickersDate, direction: SlideDirection) => void | Promise<void>;\n}\n\nexport const useStyles = makeStyles(\n  theme => ({\n    switchHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginTop: theme.spacing(0.5),\n      marginBottom: theme.spacing(1),\n    },\n    transitionContainer: {\n      width: '100%',\n      overflow: 'hidden',\n      height: 23,\n    },\n    iconButton: {\n      zIndex: 1,\n      backgroundColor: theme.palette.background.paper,\n    },\n    daysHeader: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      maxHeight: 16,\n    },\n    dayLabel: {\n      width: 36,\n      margin: '0 2px',\n      textAlign: 'center',\n      color: theme.palette.text.hint,\n    },\n  }),\n  { name: 'MuiPickersCalendarHeader' }\n);\n\nexport const CalendarHeader: React.SFC<CalendarHeaderProps> = ({\n  currentMonth,\n  onMonthChange,\n  leftArrowIcon,\n  rightArrowIcon,\n  leftArrowButtonProps,\n  rightArrowButtonProps,\n  disablePrevMonth,\n  disableNextMonth,\n  slideDirection,\n}) => {\n  const utils = useUtils();\n  const classes = useStyles();\n  const theme = useTheme();\n  const rtl = theme.direction === 'rtl';\n\n  const selectNextMonth = () => onMonthChange(utils.getNextMonth(currentMonth), 'left');\n  const selectPreviousMonth = () => onMonthChange(utils.getPreviousMonth(currentMonth), 'right');\n\n  return (\n    <div>\n      <div className={classes.switchHeader}>\n        <IconButton\n          {...leftArrowButtonProps}\n          disabled={disablePrevMonth}\n          onClick={selectPreviousMonth}\n          className={classes.iconButton}\n        >\n          {rtl ? rightArrowIcon : leftArrowIcon}\n        </IconButton>\n\n        <SlideTransition\n          slideDirection={slideDirection}\n          transKey={currentMonth.toString()}\n          className={classes.transitionContainer}\n        >\n          <Typography align=\"center\" variant=\"body1\">\n            {utils.getCalendarHeaderText(currentMonth)}\n          </Typography>\n        </SlideTransition>\n\n        <IconButton\n          {...rightArrowButtonProps}\n          disabled={disableNextMonth}\n          onClick={selectNextMonth}\n          className={classes.iconButton}\n        >\n          {rtl ? leftArrowIcon : rightArrowIcon}\n        </IconButton>\n      </div>\n\n      <div className={classes.daysHeader}>\n        {utils.getWeekdays().map((day, index) => (\n          <Typography\n            key={index} // eslint-disable-line react/no-array-index-key\n            variant=\"caption\"\n            className={classes.dayLabel}\n          >\n            {day}\n          </Typography>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nCalendarHeader.displayName = 'CalendarHeader';\n\nCalendarHeader.propTypes = {\n  leftArrowIcon: PropTypes.node,\n  rightArrowIcon: PropTypes.node,\n  disablePrevMonth: PropTypes.bool,\n  disableNextMonth: PropTypes.bool,\n};\n\nCalendarHeader.defaultProps = {\n  leftArrowIcon: <ArrowLeftIcon />,\n  rightArrowIcon: <ArrowRightIcon />,\n  disablePrevMonth: false,\n  disableNextMonth: false,\n};\n\nexport default CalendarHeader;\n","import React from 'react';\nimport SvgIcon, { SvgIconProps } from '@material-ui/core/SvgIcon';\n\nexport const ArrowLeftIcon: React.SFC<SvgIconProps> = props => {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\" />\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n    </SvgIcon>\n  );\n};\n","import React from 'react';\nimport SvgIcon, { SvgIconProps } from '@material-ui/core/SvgIcon';\n\nexport const ArrowRightIcon: React.SFC<SvgIconProps> = props => {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n    </SvgIcon>\n  );\n};\n","import * as React from 'react';\nimport { Omit } from '../_helpers/utils';\nimport { useUtils } from './hooks/useUtils';\nimport { IUtils } from '@date-io/core/IUtils';\nimport { MaterialUiPickersDate } from '../typings/date';\n\nexport interface WithUtilsProps {\n  utils: IUtils<MaterialUiPickersDate>;\n}\n\nexport const withUtils = () => <P extends WithUtilsProps>(Component: React.ComponentType<P>) => {\n  const WithUtils: React.SFC<Omit<P, keyof WithUtilsProps>> = props => {\n    const utils = useUtils();\n    return <Component utils={utils} {...(props as any)} />;\n  };\n\n  WithUtils.displayName = `WithUtils(${Component.displayName || Component.name})`;\n  return WithUtils;\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Day from './Day';\nimport DayWrapper from './DayWrapper';\nimport CalendarHeader from './CalendarHeader';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SlideTransition, { SlideDirection } from './SlideTransition';\nimport { Theme } from '@material-ui/core/styles';\nimport { VariantContext } from '../../wrappers/Wrapper';\nimport { MaterialUiPickersDate } from '../../typings/date';\nimport { runKeyHandler } from '../../_shared/hooks/useKeyDown';\nimport { IconButtonProps } from '@material-ui/core/IconButton';\nimport { withStyles, WithStyles } from '@material-ui/core/styles';\nimport { findClosestEnabledDate } from '../../_helpers/date-utils';\nimport { withUtils, WithUtilsProps } from '../../_shared/WithUtils';\n\nexport interface OutterCalendarProps {\n  /** Left arrow icon */\n  leftArrowIcon?: React.ReactNode;\n  /** Right arrow icon */\n  rightArrowIcon?: React.ReactNode;\n  /** Custom renderer for day @DateIOType */\n  renderDay?: (\n    day: MaterialUiPickersDate,\n    selectedDate: MaterialUiPickersDate,\n    dayInCurrentMonth: boolean,\n    dayComponent: JSX.Element\n  ) => JSX.Element;\n  /**\n   * Enables keyboard listener for moving between days in calendar\n   * @default true\n   */\n  allowKeyboardControl?: boolean;\n  /**\n   * Props to pass to left arrow button\n   * @type {Partial<IconButtonProps>}\n   */\n  leftArrowButtonProps?: Partial<IconButtonProps>;\n  /**\n   * Props to pass to right arrow button\n   * @type {Partial<IconButtonProps>}\n   */\n  rightArrowButtonProps?: Partial<IconButtonProps>;\n  /** Disable specific date @DateIOType */\n  shouldDisableDate?: (day: MaterialUiPickersDate) => boolean;\n  /** Callback firing on month change. Return promise to render spinner till it will not be resolved @DateIOType */\n  onMonthChange?: (date: MaterialUiPickersDate) => void | Promise<void>;\n  /** Custom loading indicator  */\n  loadingIndicator?: JSX.Element;\n}\n\nexport interface CalendarProps\n  extends OutterCalendarProps,\n    WithUtilsProps,\n    WithStyles<typeof styles, true> {\n  /** Calendar Date @DateIOType */\n  date: MaterialUiPickersDate;\n  /** Calendar onChange */\n  onChange: (date: MaterialUiPickersDate, isFinish?: boolean) => void;\n  /** Min date @DateIOType */\n  minDate?: MaterialUiPickersDate;\n  /** Max date @DateIOType */\n  maxDate?: MaterialUiPickersDate;\n  /** Disable past dates */\n  disablePast?: boolean;\n  /** Disable future dates */\n  disableFuture?: boolean;\n}\n\nexport interface CalendarState {\n  slideDirection: SlideDirection;\n  currentMonth: MaterialUiPickersDate;\n  lastDate?: MaterialUiPickersDate;\n  loadingQueue: number;\n}\n\nconst KeyDownListener = ({ onKeyDown }: { onKeyDown: (e: KeyboardEvent) => void }) => {\n  React.useEffect(() => {\n    window.addEventListener('keydown', onKeyDown);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n    };\n  }, [onKeyDown]);\n\n  return null;\n};\n\nexport class Calendar extends React.Component<CalendarProps, CalendarState> {\n  static contextType = VariantContext;\n  static propTypes: any = {\n    renderDay: PropTypes.func,\n    shouldDisableDate: PropTypes.func,\n    allowKeyboardControl: PropTypes.bool,\n  };\n\n  static defaultProps: Partial<CalendarProps> = {\n    minDate: new Date('1900-01-01'),\n    maxDate: new Date('2100-01-01'),\n    disablePast: false,\n    disableFuture: false,\n    allowKeyboardControl: true,\n  };\n\n  static getDerivedStateFromProps(nextProps: CalendarProps, state: CalendarState) {\n    const { utils, date: nextDate } = nextProps;\n\n    if (!utils.isEqual(nextDate, state.lastDate)) {\n      const nextMonth = utils.getMonth(nextDate);\n      const lastDate = state.lastDate || nextDate;\n      const lastMonth = utils.getMonth(lastDate);\n\n      return {\n        lastDate: nextDate,\n        currentMonth: nextProps.utils.startOfMonth(nextDate),\n        // prettier-ignore\n        slideDirection: nextMonth === lastMonth\n          ? state.slideDirection\n          : utils.isAfterDay(nextDate, lastDate)\n            ? 'left'\n            : 'right'\n      };\n    }\n\n    return null;\n  }\n\n  state: CalendarState = {\n    slideDirection: 'left',\n    currentMonth: this.props.utils.startOfMonth(this.props.date),\n    loadingQueue: 0,\n  };\n\n  componentDidMount() {\n    const { date, minDate, maxDate, utils, disablePast, disableFuture } = this.props;\n\n    if (this.shouldDisableDate(date)) {\n      const closestEnabledDate = findClosestEnabledDate({\n        date,\n        utils,\n        minDate: utils.date(minDate),\n        maxDate: utils.date(maxDate),\n        disablePast: Boolean(disablePast),\n        disableFuture: Boolean(disableFuture),\n        shouldDisableDate: this.shouldDisableDate,\n      });\n\n      this.handleDaySelect(closestEnabledDate, false);\n    }\n  }\n\n  private pushToLoadingQueue = () => {\n    const loadingQueue = this.state.loadingQueue + 1;\n    this.setState({ loadingQueue });\n  };\n\n  private popFromLoadingQueue = () => {\n    let loadingQueue = this.state.loadingQueue;\n    loadingQueue = loadingQueue <= 0 ? 0 : loadingQueue - 1;\n    this.setState({ loadingQueue });\n  };\n\n  handleChangeMonth = (newMonth: MaterialUiPickersDate, slideDirection: SlideDirection) => {\n    this.setState({ currentMonth: newMonth, slideDirection });\n\n    if (this.props.onMonthChange) {\n      const returnVal = this.props.onMonthChange(newMonth);\n      if (returnVal) {\n        this.pushToLoadingQueue();\n        returnVal.then(() => {\n          this.popFromLoadingQueue();\n        });\n      }\n    }\n  };\n\n  validateMinMaxDate = (day: MaterialUiPickersDate) => {\n    const { minDate, maxDate, utils, disableFuture, disablePast } = this.props;\n    const now = utils.date();\n\n    return Boolean(\n      (disableFuture && utils.isAfterDay(day, now)) ||\n        (disablePast && utils.isBeforeDay(day, now)) ||\n        (minDate && utils.isBeforeDay(day, utils.date(minDate))) ||\n        (maxDate && utils.isAfterDay(day, utils.date(maxDate)))\n    );\n  };\n\n  shouldDisablePrevMonth = () => {\n    const { utils, disablePast, minDate } = this.props;\n\n    const now = utils.date();\n    const firstEnabledMonth = utils.startOfMonth(\n      disablePast && utils.isAfter(now, utils.date(minDate)) ? now : utils.date(minDate)\n    );\n\n    return !utils.isBefore(firstEnabledMonth, this.state.currentMonth);\n  };\n\n  shouldDisableNextMonth = () => {\n    const { utils, disableFuture, maxDate } = this.props;\n\n    const now = utils.date();\n    const lastEnabledMonth = utils.startOfMonth(\n      disableFuture && utils.isBefore(now, utils.date(maxDate)) ? now : utils.date(maxDate)\n    );\n\n    return !utils.isAfter(lastEnabledMonth, this.state.currentMonth);\n  };\n\n  shouldDisableDate = (day: MaterialUiPickersDate) => {\n    const { shouldDisableDate } = this.props;\n\n    return this.validateMinMaxDate(day) || Boolean(shouldDisableDate && shouldDisableDate(day));\n  };\n\n  handleDaySelect = (day: MaterialUiPickersDate, isFinish = true) => {\n    const { date, utils } = this.props;\n\n    this.props.onChange(utils.mergeDateAndTime(day, date), isFinish);\n  };\n\n  moveToDay = (day: MaterialUiPickersDate) => {\n    const { utils } = this.props;\n\n    if (day && !this.shouldDisableDate(day)) {\n      if (utils.getMonth(day) !== utils.getMonth(this.state.currentMonth)) {\n        this.handleChangeMonth(utils.startOfMonth(day), 'left');\n      }\n\n      this.handleDaySelect(day, false);\n    }\n  };\n\n  handleKeyDown = (event: KeyboardEvent) => {\n    const { theme, date, utils } = this.props;\n\n    runKeyHandler(event, {\n      ArrowUp: () => this.moveToDay(utils.addDays(date, -7)),\n      ArrowDown: () => this.moveToDay(utils.addDays(date, 7)),\n      ArrowLeft: () => this.moveToDay(utils.addDays(date, theme.direction === 'ltr' ? -1 : 1)),\n      ArrowRight: () => this.moveToDay(utils.addDays(date, theme.direction === 'ltr' ? 1 : -1)),\n    });\n  };\n\n  private renderWeeks = () => {\n    const { utils, classes } = this.props;\n    const weeks = utils.getWeekArray(this.state.currentMonth);\n\n    return weeks.map(week => (\n      <div key={`week-${week[0]!.toString()}`} className={classes.week}>\n        {this.renderDays(week)}\n      </div>\n    ));\n  };\n\n  private renderDays = (week: MaterialUiPickersDate[]) => {\n    const { date, renderDay, utils } = this.props;\n\n    const now = utils.date();\n    const selectedDate = utils.startOfDay(date);\n    const currentMonthNumber = utils.getMonth(this.state.currentMonth);\n\n    return week.map(day => {\n      const disabled = this.shouldDisableDate(day);\n      const isDayInCurrentMonth = utils.getMonth(day) === currentMonthNumber;\n\n      let dayComponent = (\n        <Day\n          disabled={disabled}\n          current={utils.isSameDay(day, now)}\n          hidden={!isDayInCurrentMonth}\n          selected={utils.isSameDay(selectedDate, day)}\n        >\n          {utils.getDayText(day)}\n        </Day>\n      );\n\n      if (renderDay) {\n        dayComponent = renderDay(day, selectedDate, isDayInCurrentMonth, dayComponent);\n      }\n\n      return (\n        <DayWrapper\n          value={day}\n          key={day!.toString()}\n          disabled={disabled}\n          dayInCurrentMonth={isDayInCurrentMonth}\n          onSelect={this.handleDaySelect}\n        >\n          {dayComponent}\n        </DayWrapper>\n      );\n    });\n  };\n\n  render() {\n    const { currentMonth, slideDirection } = this.state;\n    const {\n      classes,\n      allowKeyboardControl,\n      leftArrowButtonProps,\n      leftArrowIcon,\n      rightArrowButtonProps,\n      rightArrowIcon,\n      loadingIndicator,\n    } = this.props;\n    const loadingElement = loadingIndicator ? loadingIndicator : <CircularProgress />;\n\n    return (\n      <React.Fragment>\n        {allowKeyboardControl && this.context !== 'static' && (\n          <KeyDownListener onKeyDown={this.handleKeyDown} />\n        )}\n\n        <CalendarHeader\n          currentMonth={currentMonth!}\n          slideDirection={slideDirection}\n          onMonthChange={this.handleChangeMonth}\n          leftArrowIcon={leftArrowIcon}\n          leftArrowButtonProps={leftArrowButtonProps}\n          rightArrowIcon={rightArrowIcon}\n          rightArrowButtonProps={rightArrowButtonProps}\n          disablePrevMonth={this.shouldDisablePrevMonth()}\n          disableNextMonth={this.shouldDisableNextMonth()}\n        />\n\n        <SlideTransition\n          slideDirection={slideDirection}\n          transKey={currentMonth!.toString()}\n          className={classes.transitionContainer}\n        >\n          <>\n            {(this.state.loadingQueue > 0 && (\n              <div className={classes.progressContainer}>{loadingElement}</div>\n            )) || <div>{this.renderWeeks()}</div>}\n          </>\n        </SlideTransition>\n      </React.Fragment>\n    );\n  }\n}\n\nexport const styles = (theme: Theme) => ({\n  transitionContainer: {\n    minHeight: 36 * 6,\n    marginTop: theme.spacing(1.5),\n  },\n  progressContainer: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  week: {\n    display: 'flex',\n    justifyContent: 'center',\n  },\n});\n\nexport default withStyles(styles, {\n  name: 'MuiPickersCalendar',\n  withTheme: true,\n})(withUtils()(Calendar));\n"],"sourceRoot":""}